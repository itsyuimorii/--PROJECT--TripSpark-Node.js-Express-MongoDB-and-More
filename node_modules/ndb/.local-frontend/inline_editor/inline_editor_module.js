self["InlineEditor"]=self["InlineEditor"]||{};InlineEditor.BezierEditor=class extends UI.VBox{constructor(){super(true);this.registerRequiredCSS("inline_editor/bezierEditor.css");this.contentElement.tabIndex=0;this.setDefaultFocusedElement(this.contentElement);this._previewElement=this.contentElement.createChild("div","bezier-preview-container");this._previewElement.createChild("div","bezier-preview-animation");this._previewElement.addEventListener("click",this._startPreviewAnimation.bind(this));this._previewOnion=this.contentElement.createChild("div","bezier-preview-onion");this._previewOnion.addEventListener("click",this._startPreviewAnimation.bind(this));this._outerContainer=this.contentElement.createChild("div","bezier-container");this._presetsContainer=this._outerContainer.createChild("div","bezier-presets");this._presetUI=new InlineEditor.BezierUI(40,40,0,2,false);this._presetCategories=[];for(let e=0;e<InlineEditor.BezierEditor.Presets.length;e++){this._presetCategories[e]=this._createCategory(InlineEditor.BezierEditor.Presets[e]);this._presetsContainer.appendChild(this._presetCategories[e].icon)}this._curveUI=new InlineEditor.BezierUI(150,250,50,7,true);this._curve=this._outerContainer.createSVGChild("svg","bezier-curve");UI.installDragHandle(this._curve,this._dragStart.bind(this),this._dragMove.bind(this),this._dragEnd.bind(this),"default");this._header=this.contentElement.createChild("div","bezier-header");const e=this._createPresetModifyIcon(this._header,"bezier-preset-minus","M 12 6 L 8 10 L 12 14");const t=this._createPresetModifyIcon(this._header,"bezier-preset-plus","M 8 6 L 12 10 L 8 14");e.addEventListener("click",this._presetModifyClicked.bind(this,false));t.addEventListener("click",this._presetModifyClicked.bind(this,true));this._label=this._header.createChild("span","source-code bezier-display-value")}setBezier(e){if(!e)return;this._bezier=e;this._updateUI()}bezier(){return this._bezier}wasShown(){this._unselectPresets();for(const e of this._presetCategories){for(let t=0;t<e.presets.length;t++){if(this._bezier.asCSSText()===e.presets[t].value){e.presetIndex=t;this._presetCategorySelected(e)}}}this._updateUI();this._startPreviewAnimation()}_onchange(){this._updateUI();this.dispatchEventToListeners(InlineEditor.BezierEditor.Events.BezierChanged,this._bezier.asCSSText())}_updateUI(){const e=this._selectedCategory?this._selectedCategory.presets[this._selectedCategory.presetIndex].name:this._bezier.asCSSText().replace(/\s(-\d\.\d)/g,"$1");this._label.textContent=Common.UIString(e);this._curveUI.drawCurve(this._bezier,this._curve);this._previewOnion.removeChildren()}_dragStart(e){this._mouseDownPosition=new UI.Geometry.Point(e.x,e.y);const t=this._curveUI;this._controlPosition=new UI.Geometry.Point(Number.constrain((e.offsetX-t.radius)/t.curveWidth(),0,1),(t.curveHeight()+t.marginTop+t.radius-e.offsetY)/t.curveHeight());const i=this._controlPosition.distanceTo(this._bezier.controlPoints[0])<this._controlPosition.distanceTo(this._bezier.controlPoints[1]);this._selectedPoint=i?0:1;this._bezier.controlPoints[this._selectedPoint]=this._controlPosition;this._unselectPresets();this._onchange();e.consume(true);return true}_updateControlPosition(e,t){const i=(e-this._mouseDownPosition.x)/this._curveUI.curveWidth();const n=(t-this._mouseDownPosition.y)/this._curveUI.curveHeight();const s=new UI.Geometry.Point(Number.constrain(this._controlPosition.x+i,0,1),this._controlPosition.y-n);this._bezier.controlPoints[this._selectedPoint]=s}_dragMove(e){this._updateControlPosition(e.x,e.y);this._onchange()}_dragEnd(e){this._updateControlPosition(e.x,e.y);this._onchange();this._startPreviewAnimation()}_createCategory(e){const t=createElementWithClass("div","bezier-preset-category");const i=t.createSVGChild("svg","bezier-preset monospace");const n={presets:e,presetIndex:0,icon:t};this._presetUI.drawCurve(UI.Geometry.CubicBezier.parse(n.presets[0].value),i);i.addEventListener("click",this._presetCategorySelected.bind(this,n));return n}_createPresetModifyIcon(e,t,i){const n=e.createSVGChild("svg","bezier-preset-modify "+t);n.setAttribute("width",20);n.setAttribute("height",20);const s=n.createSVGChild("path");s.setAttribute("d",i);return n}_unselectPresets(){for(const e of this._presetCategories)e.icon.classList.remove("bezier-preset-selected");delete this._selectedCategory;this._header.classList.remove("bezier-header-active")}_presetCategorySelected(e,t){if(this._selectedCategory===e)return;this._unselectPresets();this._header.classList.add("bezier-header-active");this._selectedCategory=e;this._selectedCategory.icon.classList.add("bezier-preset-selected");this.setBezier(UI.Geometry.CubicBezier.parse(e.presets[e.presetIndex].value));this._onchange();this._startPreviewAnimation();if(t)t.consume(true)}_presetModifyClicked(e,t){if(!this._selectedCategory)return;const i=this._selectedCategory.presets.length;this._selectedCategory.presetIndex=(this._selectedCategory.presetIndex+(e?1:-1)+i)%i;this.setBezier(UI.Geometry.CubicBezier.parse(this._selectedCategory.presets[this._selectedCategory.presetIndex].value));this._onchange();this._startPreviewAnimation()}_startPreviewAnimation(){if(this._previewAnimation)this._previewAnimation.cancel();const e=1600;const t=20;const i=[{offset:0,transform:"translateX(0px)",easing:this._bezier.asCSSText(),opacity:1},{offset:.9,transform:"translateX(218px)",opacity:1},{offset:1,transform:"translateX(218px)",opacity:0}];this._previewAnimation=this._previewElement.animate(i,e);this._previewOnion.removeChildren();for(let i=0;i<=t;i++){const n=this._previewOnion.createChild("div","bezier-preview-animation");const s=n.animate([{transform:"translateX(0px)",easing:this._bezier.asCSSText()},{transform:"translateX(218px)"}],{duration:e,fill:"forwards"});s.pause();s.currentTime=e*i/t}}};InlineEditor.BezierEditor.Events={BezierChanged:Symbol("BezierChanged")};InlineEditor.BezierEditor.Presets=[[{name:"ease-in-out",value:"ease-in-out"},{name:"In Out · Sine",value:"cubic-bezier(0.45, 0.05, 0.55, 0.95)"},{name:"In Out · Quadratic",value:"cubic-bezier(0.46, 0.03, 0.52, 0.96)"},{name:"In Out · Cubic",value:"cubic-bezier(0.65, 0.05, 0.36, 1)"},{name:"Fast Out, Slow In",value:"cubic-bezier(0.4, 0, 0.2, 1)"},{name:"In Out · Back",value:"cubic-bezier(0.68, -0.55, 0.27, 1.55)"}],[{name:"Fast Out, Linear In",value:"cubic-bezier(0.4, 0, 1, 1)"},{name:"ease-in",value:"ease-in"},{name:"In · Sine",value:"cubic-bezier(0.47, 0, 0.75, 0.72)"},{name:"In · Quadratic",value:"cubic-bezier(0.55, 0.09, 0.68, 0.53)"},{name:"In · Cubic",value:"cubic-bezier(0.55, 0.06, 0.68, 0.19)"},{name:"In · Back",value:"cubic-bezier(0.6, -0.28, 0.74, 0.05)"}],[{name:"ease-out",value:"ease-out"},{name:"Out · Sine",value:"cubic-bezier(0.39, 0.58, 0.57, 1)"},{name:"Out · Quadratic",value:"cubic-bezier(0.25, 0.46, 0.45, 0.94)"},{name:"Out · Cubic",value:"cubic-bezier(0.22, 0.61, 0.36, 1)"},{name:"Linear Out, Slow In",value:"cubic-bezier(0, 0, 0.2, 1)"},{name:"Out · Back",value:"cubic-bezier(0.18, 0.89, 0.32, 1.28)"}]];InlineEditor.BezierEditor.PresetCategory;InlineEditor.BezierUI=class{constructor(e,t,i,n,s){this.width=e;this.height=t;this.marginTop=i;this.radius=n;this.linearLine=s}static drawVelocityChart(e,t,i){const n=InlineEditor.BezierUI.Height;let s=["M",0,n];const r=1/40;let o=e.evaluateAt(0);for(let t=r;t<1+r;t+=r){const r=e.evaluateAt(t);let a=(r.y-o.y)/(r.x-o.x);const d=o.x*(1-t)+r.x*t;a=Math.tanh(a/1.5);s=s.concat(["L",(d*i).toFixed(2),(n-a*n).toFixed(2)]);o=r}s=s.concat(["L",i.toFixed(2),n,"Z"]);t.setAttribute("d",s.join(" "))}curveWidth(){return this.width-this.radius*2}curveHeight(){return this.height-this.radius*2-this.marginTop*2}_drawLine(e,t,i,n,s,r){const o=e.createSVGChild("line",t);o.setAttribute("x1",i+this.radius);o.setAttribute("y1",n+this.radius+this.marginTop);o.setAttribute("x2",s+this.radius);o.setAttribute("y2",r+this.radius+this.marginTop)}_drawControlPoints(e,t,i,n,s){this._drawLine(e,"bezier-control-line",t,i,n,s);const r=e.createSVGChild("circle","bezier-control-circle");r.setAttribute("cx",n+this.radius);r.setAttribute("cy",s+this.radius+this.marginTop);r.setAttribute("r",this.radius)}drawCurve(e,t){if(!e)return;const i=this.curveWidth();const n=this.curveHeight();t.setAttribute("width",this.width);t.setAttribute("height",this.height);t.removeChildren();const s=t.createSVGChild("g");if(this.linearLine)this._drawLine(s,"linear-line",0,n,i,0);const r=s.createSVGChild("path","bezier-path");const o=[new UI.Geometry.Point(e.controlPoints[0].x*i+this.radius,(1-e.controlPoints[0].y)*n+this.radius+this.marginTop),new UI.Geometry.Point(e.controlPoints[1].x*i+this.radius,(1-e.controlPoints[1].y)*n+this.radius+this.marginTop),new UI.Geometry.Point(i+this.radius,this.marginTop+this.radius)];r.setAttribute("d","M"+this.radius+","+(n+this.radius+this.marginTop)+" C"+o.join(" "));this._drawControlPoints(s,0,n,e.controlPoints[0].x*i,(1-e.controlPoints[0].y)*n);this._drawControlPoints(s,i,0,e.controlPoints[1].x*i,(1-e.controlPoints[1].y)*n)}};InlineEditor.BezierUI.Height=26;InlineEditor.ColorSwatch=class extends HTMLSpanElement{constructor(){super();const e=UI.createShadowRootWithCoreStyles(this,"inline_editor/colorSwatch.css");this._iconElement=e.createChild("span","color-swatch");this._iconElement.title=Common.UIString("Shift-click to change color format");this._swatchInner=this._iconElement.createChild("span","color-swatch-inner");this._swatchInner.addEventListener("dblclick",e=>e.consume(),false);this._swatchInner.addEventListener("mousedown",e=>e.consume(),false);this._swatchInner.addEventListener("click",this._handleClick.bind(this),true);e.createChild("slot");this._colorValueElement=this.createChild("span")}static create(){if(!InlineEditor.ColorSwatch._constructor){InlineEditor.ColorSwatch._constructor=UI.registerCustomElement("span","color-swatch",InlineEditor.ColorSwatch)}return InlineEditor.ColorSwatch._constructor()}static _nextColorFormat(e,t){const i=Common.Color.Format;switch(t){case i.Original:return!e.hasAlpha()?i.RGB:i.RGBA;case i.RGB:case i.RGBA:return!e.hasAlpha()?i.HSL:i.HSLA;case i.HSL:case i.HSLA:if(e.nickname())return i.Nickname;return e.detectHEXFormat();case i.ShortHEX:return i.HEX;case i.ShortHEXA:return i.HEXA;case i.HEXA:case i.HEX:return i.Original;case i.Nickname:return e.detectHEXFormat();default:return i.RGBA}}color(){return this._color}setColor(e){this._color=e;this._format=this._color.format();const t=this._color.asString(this._format);this.setText(t);this._swatchInner.style.backgroundColor=t}hideText(e){this._colorValueElement.hidden=e}setText(e,t){this._colorValueElement.textContent=e;this._colorValueElement.title=t}format(){return this._format}setFormat(e){this._format=e;this.setText(this._color.asString(this._format))}toggleNextFormat(){let e;do{this._format=InlineEditor.ColorSwatch._nextColorFormat(this._color,this._format);e=this._color.asString(this._format)}while(e===this._colorValueElement.textContent);this.setText(e)}iconElement(){return this._iconElement}_handleClick(e){if(!e.shiftKey)return;e.target.parentNode.parentNode.host.toggleNextFormat();e.consume(true)}};InlineEditor.BezierSwatch=class extends HTMLSpanElement{constructor(){super();const e=UI.createShadowRootWithCoreStyles(this,"inline_editor/bezierSwatch.css");this._iconElement=UI.Icon.create("smallicon-bezier","bezier-swatch-icon");e.appendChild(this._iconElement);this._textElement=this.createChild("span");e.createChild("slot")}static create(){if(!InlineEditor.BezierSwatch._constructor){InlineEditor.BezierSwatch._constructor=UI.registerCustomElement("span","bezier-swatch",InlineEditor.BezierSwatch)}return InlineEditor.BezierSwatch._constructor()}bezierText(){return this._textElement.textContent}setBezierText(e){this._textElement.textContent=e}hideText(e){this._textElement.hidden=e}iconElement(){return this._iconElement}};InlineEditor.CSSShadowSwatch=class extends HTMLSpanElement{constructor(){super();const e=UI.createShadowRootWithCoreStyles(this,"inline_editor/cssShadowSwatch.css");this._iconElement=UI.Icon.create("smallicon-shadow","shadow-swatch-icon");e.appendChild(this._iconElement);e.createChild("slot");this._contentElement=this.createChild("span")}static create(){if(!InlineEditor.CSSShadowSwatch._constructor){InlineEditor.CSSShadowSwatch._constructor=UI.registerCustomElement("span","css-shadow-swatch",InlineEditor.CSSShadowSwatch)}return InlineEditor.CSSShadowSwatch._constructor()}model(){return this._model}setCSSShadow(e){this._model=e;this._contentElement.removeChildren();const t=TextUtils.TextUtils.splitStringByRegexes(e.asCSSText(),[/inset/g,Common.Color.Regex]);for(let i=0;i<t.length;i++){const n=t[i];if(n.regexIndex===1){if(!this._colorSwatch)this._colorSwatch=InlineEditor.ColorSwatch.create();this._colorSwatch.setColor(e.color());this._contentElement.appendChild(this._colorSwatch)}else{this._contentElement.appendChild(createTextNode(n.value))}}}hideText(e){this._contentElement.hidden=e}iconElement(){return this._iconElement}colorSwatch(){return this._colorSwatch}};InlineEditor.CSSShadowEditor=class extends UI.VBox{constructor(){super(true);this.registerRequiredCSS("inline_editor/cssShadowEditor.css");this.contentElement.tabIndex=0;this.setDefaultFocusedElement(this.contentElement);this._typeField=this.contentElement.createChild("div","shadow-editor-field shadow-editor-flex-field");this._typeField.createChild("label","shadow-editor-label").textContent=Common.UIString("Type");this._outsetButton=this._typeField.createChild("button","shadow-editor-button-left");this._outsetButton.textContent=Common.UIString("Outset");this._outsetButton.addEventListener("click",this._onButtonClick.bind(this),false);this._insetButton=this._typeField.createChild("button","shadow-editor-button-right");this._insetButton.textContent=Common.UIString("Inset");this._insetButton.addEventListener("click",this._onButtonClick.bind(this),false);const e=this.contentElement.createChild("div","shadow-editor-field");this._xInput=this._createTextInput(e,Common.UIString("X offset"));const t=this.contentElement.createChild("div","shadow-editor-field");this._yInput=this._createTextInput(t,Common.UIString("Y offset"));this._xySlider=e.createChild("canvas","shadow-editor-2D-slider");this._xySlider.width=InlineEditor.CSSShadowEditor.canvasSize;this._xySlider.height=InlineEditor.CSSShadowEditor.canvasSize;this._xySlider.tabIndex=-1;this._halfCanvasSize=InlineEditor.CSSShadowEditor.canvasSize/2;this._innerCanvasSize=this._halfCanvasSize-InlineEditor.CSSShadowEditor.sliderThumbRadius;UI.installDragHandle(this._xySlider,this._dragStart.bind(this),this._dragMove.bind(this),null,"default");this._xySlider.addEventListener("keydown",this._onCanvasArrowKey.bind(this),false);this._xySlider.addEventListener("blur",this._onCanvasBlur.bind(this),false);const i=this.contentElement.createChild("div","shadow-editor-field shadow-editor-flex-field shadow-editor-blur-field");this._blurInput=this._createTextInput(i,Common.UIString("Blur"));this._blurSlider=this._createSlider(i);this._spreadField=this.contentElement.createChild("div","shadow-editor-field shadow-editor-flex-field");this._spreadInput=this._createTextInput(this._spreadField,Common.UIString("Spread"));this._spreadSlider=this._createSlider(this._spreadField)}_createTextInput(e,t){const i=e.createChild("label","shadow-editor-label");i.textContent=t;i.setAttribute("for",t);const n=UI.createInput("shadow-editor-text-input","text");e.appendChild(n);n.id=t;n.addEventListener("keydown",this._handleValueModification.bind(this),false);n.addEventListener("mousewheel",this._handleValueModification.bind(this),false);n.addEventListener("input",this._onTextInput.bind(this),false);n.addEventListener("blur",this._onTextBlur.bind(this),false);return n}_createSlider(e){const t=UI.createSlider(0,InlineEditor.CSSShadowEditor.maxRange,-1);t.addEventListener("input",this._onSliderInput.bind(this),false);e.appendChild(t);return t}wasShown(){this._updateUI()}setModel(e){this._model=e;this._typeField.classList.toggle("hidden",!e.isBoxShadow());this._spreadField.classList.toggle("hidden",!e.isBoxShadow());this._updateUI()}_updateUI(){this._updateButtons();this._xInput.value=this._model.offsetX().asCSSText();this._yInput.value=this._model.offsetY().asCSSText();this._blurInput.value=this._model.blurRadius().asCSSText();this._spreadInput.value=this._model.spreadRadius().asCSSText();this._blurSlider.value=this._model.blurRadius().amount;this._spreadSlider.value=this._model.spreadRadius().amount;this._updateCanvas(false)}_updateButtons(){this._insetButton.classList.toggle("enabled",this._model.inset());this._outsetButton.classList.toggle("enabled",!this._model.inset())}_updateCanvas(e){const t=this._xySlider.getContext("2d");t.clearRect(0,0,this._xySlider.width,this._xySlider.height);t.save();t.setLineDash([1,1]);t.strokeStyle="rgba(210, 210, 210, 0.8)";t.beginPath();t.moveTo(this._halfCanvasSize,0);t.lineTo(this._halfCanvasSize,InlineEditor.CSSShadowEditor.canvasSize);t.moveTo(0,this._halfCanvasSize);t.lineTo(InlineEditor.CSSShadowEditor.canvasSize,this._halfCanvasSize);t.stroke();t.restore();const i=this._sliderThumbPosition();t.save();t.translate(this._halfCanvasSize,this._halfCanvasSize);t.lineWidth=2;t.strokeStyle="rgba(130, 130, 130, 0.75)";t.beginPath();t.moveTo(0,0);t.lineTo(i.x,i.y);t.stroke();if(e){t.beginPath();t.fillStyle="rgba(66, 133, 244, 0.4)";t.arc(i.x,i.y,InlineEditor.CSSShadowEditor.sliderThumbRadius+2,0,2*Math.PI);t.fill()}t.beginPath();t.fillStyle="#4285F4";t.arc(i.x,i.y,InlineEditor.CSSShadowEditor.sliderThumbRadius,0,2*Math.PI);t.fill();t.restore()}_onButtonClick(e){const t=e.currentTarget===this._insetButton;if(t&&this._model.inset()||!t&&!this._model.inset())return;this._model.setInset(t);this._updateButtons();this.dispatchEventToListeners(InlineEditor.CSSShadowEditor.Events.ShadowChanged,this._model)}_handleValueModification(e){const t=UI.createReplacementString(e.currentTarget.value,e,n);if(!t)return;const i=InlineEditor.CSSLength.parse(t);if(!i)return;if(e.currentTarget===this._blurInput&&i.amount<0)i.amount=0;e.currentTarget.value=i.asCSSText();e.currentTarget.selectionStart=0;e.currentTarget.selectionEnd=e.currentTarget.value.length;this._onTextInput(e);e.consume(true);function n(e,t,i){if(!i.length)i=InlineEditor.CSSShadowEditor.defaultUnit;return e+t+i}}_onTextInput(e){this._changedElement=e.currentTarget;this._changedElement.classList.remove("invalid");const t=InlineEditor.CSSLength.parse(e.currentTarget.value);if(!t||e.currentTarget===this._blurInput&&t.amount<0)return;if(e.currentTarget===this._xInput){this._model.setOffsetX(t);this._updateCanvas(false)}else if(e.currentTarget===this._yInput){this._model.setOffsetY(t);this._updateCanvas(false)}else if(e.currentTarget===this._blurInput){this._model.setBlurRadius(t);this._blurSlider.value=t.amount}else if(e.currentTarget===this._spreadInput){this._model.setSpreadRadius(t);this._spreadSlider.value=t.amount}this.dispatchEventToListeners(InlineEditor.CSSShadowEditor.Events.ShadowChanged,this._model)}_onTextBlur(){if(!this._changedElement)return;let e=!this._changedElement.value.trim()?InlineEditor.CSSLength.zero():InlineEditor.CSSLength.parse(this._changedElement.value);if(!e)e=InlineEditor.CSSLength.parse(this._changedElement.value+InlineEditor.CSSShadowEditor.defaultUnit);if(!e){this._changedElement.classList.add("invalid");this._changedElement=null;return}if(this._changedElement===this._xInput){this._model.setOffsetX(e);this._xInput.value=e.asCSSText();this._updateCanvas(false)}else if(this._changedElement===this._yInput){this._model.setOffsetY(e);this._yInput.value=e.asCSSText();this._updateCanvas(false)}else if(this._changedElement===this._blurInput){if(e.amount<0)e=InlineEditor.CSSLength.zero();this._model.setBlurRadius(e);this._blurInput.value=e.asCSSText();this._blurSlider.value=e.amount}else if(this._changedElement===this._spreadInput){this._model.setSpreadRadius(e);this._spreadInput.value=e.asCSSText();this._spreadSlider.value=e.amount}this._changedElement=null;this.dispatchEventToListeners(InlineEditor.CSSShadowEditor.Events.ShadowChanged,this._model)}_onSliderInput(e){if(e.currentTarget===this._blurSlider){this._model.setBlurRadius(new InlineEditor.CSSLength(this._blurSlider.value,this._model.blurRadius().unit||InlineEditor.CSSShadowEditor.defaultUnit));this._blurInput.value=this._model.blurRadius().asCSSText();this._blurInput.classList.remove("invalid")}else if(e.currentTarget===this._spreadSlider){this._model.setSpreadRadius(new InlineEditor.CSSLength(this._spreadSlider.value,this._model.spreadRadius().unit||InlineEditor.CSSShadowEditor.defaultUnit));this._spreadInput.value=this._model.spreadRadius().asCSSText();this._spreadInput.classList.remove("invalid")}this.dispatchEventToListeners(InlineEditor.CSSShadowEditor.Events.ShadowChanged,this._model)}_dragStart(e){this._xySlider.focus();this._updateCanvas(true);this._canvasOrigin=new UI.Geometry.Point(this._xySlider.totalOffsetLeft()+this._halfCanvasSize,this._xySlider.totalOffsetTop()+this._halfCanvasSize);const t=new UI.Geometry.Point(e.x-this._canvasOrigin.x,e.y-this._canvasOrigin.y);const i=this._sliderThumbPosition();if(t.distanceTo(i)>=InlineEditor.CSSShadowEditor.sliderThumbRadius)this._dragMove(e);return true}_dragMove(e){let t=new UI.Geometry.Point(e.x-this._canvasOrigin.x,e.y-this._canvasOrigin.y);if(e.shiftKey)t=this._snapToClosestDirection(t);const i=this._constrainPoint(t,this._innerCanvasSize);const n=Math.round(i.x/this._innerCanvasSize*InlineEditor.CSSShadowEditor.maxRange);const s=Math.round(i.y/this._innerCanvasSize*InlineEditor.CSSShadowEditor.maxRange);if(e.shiftKey){this._model.setOffsetX(new InlineEditor.CSSLength(n,this._model.offsetX().unit||InlineEditor.CSSShadowEditor.defaultUnit));this._model.setOffsetY(new InlineEditor.CSSLength(s,this._model.offsetY().unit||InlineEditor.CSSShadowEditor.defaultUnit))}else{if(!e.altKey){this._model.setOffsetX(new InlineEditor.CSSLength(n,this._model.offsetX().unit||InlineEditor.CSSShadowEditor.defaultUnit))}if(!UI.KeyboardShortcut.eventHasCtrlOrMeta(e)){this._model.setOffsetY(new InlineEditor.CSSLength(s,this._model.offsetY().unit||InlineEditor.CSSShadowEditor.defaultUnit))}}this._xInput.value=this._model.offsetX().asCSSText();this._yInput.value=this._model.offsetY().asCSSText();this._xInput.classList.remove("invalid");this._yInput.classList.remove("invalid");this._updateCanvas(true);this.dispatchEventToListeners(InlineEditor.CSSShadowEditor.Events.ShadowChanged,this._model)}_onCanvasBlur(){this._updateCanvas(false)}_onCanvasArrowKey(e){let t=0;let i=0;if(e.key==="ArrowRight")t=1;else if(e.key==="ArrowLeft")t=-1;else if(e.key==="ArrowUp")i=-1;else if(e.key==="ArrowDown")i=1;if(!t&&!i)return;e.consume(true);if(t){const e=this._model.offsetX();const i=Number.constrain(e.amount+t,-InlineEditor.CSSShadowEditor.maxRange,InlineEditor.CSSShadowEditor.maxRange);if(i===e.amount)return;this._model.setOffsetX(new InlineEditor.CSSLength(i,e.unit||InlineEditor.CSSShadowEditor.defaultUnit));this._xInput.value=this._model.offsetX().asCSSText();this._xInput.classList.remove("invalid")}if(i){const e=this._model.offsetY();const t=Number.constrain(e.amount+i,-InlineEditor.CSSShadowEditor.maxRange,InlineEditor.CSSShadowEditor.maxRange);if(t===e.amount)return;this._model.setOffsetY(new InlineEditor.CSSLength(t,e.unit||InlineEditor.CSSShadowEditor.defaultUnit));this._yInput.value=this._model.offsetY().asCSSText();this._yInput.classList.remove("invalid")}this._updateCanvas(true);this.dispatchEventToListeners(InlineEditor.CSSShadowEditor.Events.ShadowChanged,this._model)}_constrainPoint(e,t){if(Math.abs(e.x)<=t&&Math.abs(e.y)<=t)return new UI.Geometry.Point(e.x,e.y);return e.scale(t/Math.max(Math.abs(e.x),Math.abs(e.y)))}_snapToClosestDirection(e){let t=Number.MAX_VALUE;let i=e;const n=[new UI.Geometry.Point(0,-1),new UI.Geometry.Point(1,-1),new UI.Geometry.Point(1,0),new UI.Geometry.Point(1,1)];for(const s of n){const n=e.projectOn(s);const r=e.distanceTo(n);if(r<t){t=r;i=n}}return i}_sliderThumbPosition(){const e=this._model.offsetX().amount/InlineEditor.CSSShadowEditor.maxRange*this._innerCanvasSize;const t=this._model.offsetY().amount/InlineEditor.CSSShadowEditor.maxRange*this._innerCanvasSize;return this._constrainPoint(new UI.Geometry.Point(e,t),this._innerCanvasSize)}};InlineEditor.CSSShadowEditor.Events={ShadowChanged:Symbol("ShadowChanged")};InlineEditor.CSSShadowEditor.maxRange=20;InlineEditor.CSSShadowEditor.defaultUnit="px";InlineEditor.CSSShadowEditor.sliderThumbRadius=6;InlineEditor.CSSShadowEditor.canvasSize=88;InlineEditor.SwatchPopoverHelper=class extends Common.Object{constructor(){super();this._popover=new UI.GlassPane;this._popover.registerRequiredCSS("inline_editor/swatchPopover.css");this._popover.setSizeBehavior(UI.GlassPane.SizeBehavior.MeasureContent);this._popover.setMarginBehavior(UI.GlassPane.MarginBehavior.Arrow);this._popover.element.addEventListener("mousedown",e=>e.consume(),false);this._hideProxy=this.hide.bind(this,true);this._boundOnKeyDown=this._onKeyDown.bind(this);this._boundFocusOut=this._onFocusOut.bind(this);this._isHidden=true}_onFocusOut(e){if(!e.relatedTarget||e.relatedTarget.isSelfOrDescendant(this._view.contentElement))return;this._hideProxy()}isShowing(){return this._popover.isShowing()}show(e,t,i){if(this._popover.isShowing()){if(this._anchorElement===t)return;this.hide(true)}delete this._isHidden;this._anchorElement=t;this._view=e;this._hiddenCallback=i;this.reposition();e.focus();const n=this._popover.element.ownerDocument;n.addEventListener("mousedown",this._hideProxy,false);n.defaultView.addEventListener("resize",this._hideProxy,false);this._view.contentElement.addEventListener("keydown",this._boundOnKeyDown,false)}reposition(){this._view.contentElement.removeEventListener("focusout",this._boundFocusOut,false);this._view.show(this._popover.contentElement);this._popover.setContentAnchorBox(this._anchorElement.boxInWindow());this._popover.show(this._anchorElement.ownerDocument);this._view.contentElement.addEventListener("focusout",this._boundFocusOut,false);if(!this._focusRestorer)this._focusRestorer=new UI.WidgetFocusRestorer(this._view)}hide(e){if(this._isHidden)return;const t=this._popover.element.ownerDocument;this._isHidden=true;this._popover.hide();t.removeEventListener("mousedown",this._hideProxy,false);t.defaultView.removeEventListener("resize",this._hideProxy,false);if(this._hiddenCallback)this._hiddenCallback.call(null,!!e);this._focusRestorer.restore();delete this._anchorElement;if(this._view){this._view.detach();this._view.contentElement.removeEventListener("keydown",this._boundOnKeyDown,false);this._view.contentElement.removeEventListener("focusout",this._boundFocusOut,false);delete this._view}}_onKeyDown(e){if(e.key==="Enter"){this.hide(true);e.consume(true);return}if(e.key==="Escape"){this.hide(false);e.consume(true)}}};InlineEditor.CSSShadowModel=class{constructor(e){this._isBoxShadow=e;this._inset=false;this._offsetX=InlineEditor.CSSLength.zero();this._offsetY=InlineEditor.CSSLength.zero();this._blurRadius=InlineEditor.CSSLength.zero();this._spreadRadius=InlineEditor.CSSLength.zero();this._color=Common.Color.parse("black");this._format=[InlineEditor.CSSShadowModel._Part.OffsetX,InlineEditor.CSSShadowModel._Part.OffsetY]}static parseTextShadow(e){return InlineEditor.CSSShadowModel._parseShadow(e,false)}static parseBoxShadow(e){return InlineEditor.CSSShadowModel._parseShadow(e,true)}static _parseShadow(e,t){const i=[];const n=TextUtils.TextUtils.splitStringByRegexes(e,[Common.Color.Regex,/,/g]);let s=0;for(let t=0;t<n.length;t++){if(n[t].regexIndex===1){const r=n[t];i.push(e.substring(s,r.position));s=r.position+1}}i.push(e.substring(s,e.length));const r=[];for(let e=0;e<i.length;e++){const n=new InlineEditor.CSSShadowModel(t);n._format=[];let s=true;const a=[/inset/gi,Common.Color.Regex,InlineEditor.CSSLength.Regex];const d=TextUtils.TextUtils.splitStringByRegexes(i[e],a);for(let e=0;e<d.length;e++){const t=d[e];if(t.regexIndex===-1){if(/\S/.test(t.value))return[];s=true}else{if(!s)return[];s=false;if(t.regexIndex===0){n._inset=true;n._format.push(InlineEditor.CSSShadowModel._Part.Inset)}else if(t.regexIndex===1){const e=Common.Color.parse(t.value);if(!e)return[];n._color=e;n._format.push(InlineEditor.CSSShadowModel._Part.Color)}else if(t.regexIndex===2){const e=InlineEditor.CSSLength.parse(t.value);if(!e)return[];const i=n._format.length>0?n._format[n._format.length-1]:"";if(i===InlineEditor.CSSShadowModel._Part.OffsetX){n._offsetY=e;n._format.push(InlineEditor.CSSShadowModel._Part.OffsetY)}else if(i===InlineEditor.CSSShadowModel._Part.OffsetY){n._blurRadius=e;n._format.push(InlineEditor.CSSShadowModel._Part.BlurRadius)}else if(i===InlineEditor.CSSShadowModel._Part.BlurRadius){n._spreadRadius=e;n._format.push(InlineEditor.CSSShadowModel._Part.SpreadRadius)}else{n._offsetX=e;n._format.push(InlineEditor.CSSShadowModel._Part.OffsetX)}}}}if(o(n,InlineEditor.CSSShadowModel._Part.OffsetX,1,1)||o(n,InlineEditor.CSSShadowModel._Part.OffsetY,1,1)||o(n,InlineEditor.CSSShadowModel._Part.Color,0,1)||o(n,InlineEditor.CSSShadowModel._Part.BlurRadius,0,1)||o(n,InlineEditor.CSSShadowModel._Part.Inset,0,t?1:0)||o(n,InlineEditor.CSSShadowModel._Part.SpreadRadius,0,t?1:0))return[];r.push(n)}return r;function o(e,t,i,n){let s=0;for(let i=0;i<e._format.length;i++){if(e._format[i]===t)s++}return s<i||s>n}}setInset(e){this._inset=e;if(this._format.indexOf(InlineEditor.CSSShadowModel._Part.Inset)===-1)this._format.unshift(InlineEditor.CSSShadowModel._Part.Inset)}setOffsetX(e){this._offsetX=e}setOffsetY(e){this._offsetY=e}setBlurRadius(e){this._blurRadius=e;if(this._format.indexOf(InlineEditor.CSSShadowModel._Part.BlurRadius)===-1){const e=this._format.indexOf(InlineEditor.CSSShadowModel._Part.OffsetY);this._format.splice(e+1,0,InlineEditor.CSSShadowModel._Part.BlurRadius)}}setSpreadRadius(e){this._spreadRadius=e;if(this._format.indexOf(InlineEditor.CSSShadowModel._Part.SpreadRadius)===-1){this.setBlurRadius(this._blurRadius);const e=this._format.indexOf(InlineEditor.CSSShadowModel._Part.BlurRadius);this._format.splice(e+1,0,InlineEditor.CSSShadowModel._Part.SpreadRadius)}}setColor(e){this._color=e;if(this._format.indexOf(InlineEditor.CSSShadowModel._Part.Color)===-1)this._format.push(InlineEditor.CSSShadowModel._Part.Color)}isBoxShadow(){return this._isBoxShadow}inset(){return this._inset}offsetX(){return this._offsetX}offsetY(){return this._offsetY}blurRadius(){return this._blurRadius}spreadRadius(){return this._spreadRadius}color(){return this._color}asCSSText(){const e=[];for(let t=0;t<this._format.length;t++){const i=this._format[t];if(i===InlineEditor.CSSShadowModel._Part.Inset&&this._inset)e.push("inset");else if(i===InlineEditor.CSSShadowModel._Part.OffsetX)e.push(this._offsetX.asCSSText());else if(i===InlineEditor.CSSShadowModel._Part.OffsetY)e.push(this._offsetY.asCSSText());else if(i===InlineEditor.CSSShadowModel._Part.BlurRadius)e.push(this._blurRadius.asCSSText());else if(i===InlineEditor.CSSShadowModel._Part.SpreadRadius)e.push(this._spreadRadius.asCSSText());else if(i===InlineEditor.CSSShadowModel._Part.Color)e.push(this._color.asString(this._color.format()))}return e.join(" ")}};InlineEditor.CSSShadowModel._Part={Inset:"I",OffsetX:"X",OffsetY:"Y",BlurRadius:"B",SpreadRadius:"S",Color:"C"};InlineEditor.CSSLength=class{constructor(e,t){this.amount=e;this.unit=t}static parse(e){const t=new RegExp("^(?:"+InlineEditor.CSSLength.Regex.source+")$","i");const i=e.match(t);if(!i)return null;if(i.length>2&&i[2])return new InlineEditor.CSSLength(parseFloat(i[1]),i[2]);return InlineEditor.CSSLength.zero()}static zero(){return new InlineEditor.CSSLength(0,"")}asCSSText(){return this.amount+this.unit}};InlineEditor.CSSLength.Regex=function(){const e="([+-]?(?:[0-9]*[.])?[0-9]+(?:[eE][+-]?[0-9]+)?)";const t="(ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmax|vmin|vw)";const i="[+-]?(?:0*[.])?0+(?:[eE][+-]?[0-9]+)?";return new RegExp(e+t+"|"+i,"gi")}();Runtime.cachedResources["inline_editor/bezierEditor.css"]="/*\n * Copyright (c) 2015 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n:host {\n    width: 270px;\n    height: 350px;\n    -webkit-user-select: none;\n    padding: 16px;\n    overflow: hidden;\n}\n\n.bezier-preset-selected > svg {\n    background-color: var(--selection-bg-color);\n}\n\n.bezier-preset {\n    width: 50px;\n    height: 50px;\n    padding: 5px;\n    margin: auto;\n    background-color: #f5f5f5;\n    border-radius: 3px;\n}\n\n.bezier-preset line.bezier-control-line {\n    stroke: #666;\n    stroke-width: 1;\n    stroke-linecap: round;\n    fill: none;\n}\n\n.bezier-preset circle.bezier-control-circle {\n    fill: #666;\n}\n\n.bezier-preset path.bezier-path {\n    stroke: black;\n    stroke-width: 2;\n    stroke-linecap: round;\n    fill: none;\n}\n\n.bezier-preset-selected path.bezier-path, .bezier-preset-selected line.bezier-control-line {\n    stroke: white;\n}\n\n.bezier-preset-selected circle.bezier-control-circle {\n    fill: white;\n}\n\n.bezier-curve line.linear-line {\n    stroke: rgb(238, 238, 238);\n    stroke-width: 2;\n    stroke-linecap: round;\n    fill: none;\n}\n\n:host-context(.-theme-with-dark-background) .bezier-curve line.linear-line {\n    stroke: rgb(138, 138, 138);\n}\n\n.bezier-curve line.bezier-control-line {\n    stroke: #9C27B0;\n    stroke-width: 2;\n    stroke-linecap: round;\n    fill: none;\n    opacity: 0.6;\n}\n\n.bezier-curve circle.bezier-control-circle {\n    fill: #9C27B0;\n    cursor: pointer;\n}\n\n.bezier-curve path.bezier-path {\n    stroke: black;\n    stroke-width: 3;\n    stroke-linecap: round;\n    fill: none;\n}\n\n.bezier-preview-container {\n    position: relative;\n    background-color: white;\n    overflow: hidden;\n    border-radius: 20px;\n    width: 200%;\n    height: 20px;\n    z-index: 2;\n    flex-shrink: 0;\n    opacity: 0;\n}\n\n.bezier-preview-animation {\n    background-color: #9C27B0;\n    width: 20px;\n    height: 20px;\n    border-radius: 20px;\n    position: absolute;\n}\n\n.bezier-preview-onion {\n    margin-top: -20px;\n    position: relative;\n    z-index: 1;\n}\n\n.bezier-preview-onion > .bezier-preview-animation {\n    opacity: 0.1;\n}\n\nsvg.bezier-preset-modify {\n    background-color: #f5f5f5;\n    border-radius: 35px;\n    display: inline-block;\n    visibility: hidden;\n    transition: transform 100ms cubic-bezier(0.4, 0, 0.2, 1);\n    cursor: pointer;\n    position: absolute;\n}\n\nsvg.bezier-preset-modify:hover, .bezier-preset:hover {\n    background-color: #999;\n}\n\n.bezier-preset-selected .bezier-preset:hover {\n    background-color: var(--selection-bg-color);\n}\n\n.bezier-preset-modify path {\n    stroke-width: 2;\n    stroke: black;\n    fill: none;\n}\n\n.bezier-preset-selected .bezier-preset-modify {\n    opacity: 1;\n}\n\n.bezier-preset-category {\n    width: 50px;\n    margin: 20px 0;\n    cursor: pointer;\n    transition: transform 100ms cubic-bezier(0.4, 0, 0.2, 1);\n}\n\nspan.bezier-display-value {\n    width: 100%;\n    -webkit-user-select: text;\n    display: block;\n    text-align: center;\n    line-height: 20px;\n    height: 20px;\n    cursor: text;\n    white-space: nowrap !important;\n}\n\n.bezier-container {\n    display: flex;\n    margin-top: 38px;\n}\n\nsvg.bezier-curve {\n    margin-left: 32px;\n    margin-top: -8px;\n}\n\nsvg.bezier-preset-modify.bezier-preset-plus {\n    right: 0;\n}\n\n.bezier-header {\n    margin-top: 16px;\n}\n\nsvg.bezier-preset-modify:active {\n    transform: scale(1.1);\n    background-color: var(--selection-bg-color);\n}\n\n.bezier-preset-category:active {\n    transform: scale(1.05);\n}\n\n.bezier-header-active > svg.bezier-preset-modify {\n    visibility: visible;\n}\n\n.bezier-preset-modify:active path {\n    stroke: white;\n}\n";Runtime.cachedResources["inline_editor/colorSwatch.css"]="/*\n * Copyright (c) 2015 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n:host {\n    white-space: nowrap;\n}\n\n.color-swatch {\n    position: relative;\n    margin-left: 1px;\n    margin-right: 2px;\n    width: 10px;\n    height: 10px;\n    top: 1px;\n    display: inline-block;\n    -webkit-user-select: none;\n    background-image: url(Images/checker.png);\n    line-height: 10px;\n}\n\n.color-swatch-inner {\n    width: 100%;\n    height: 100%;\n    display: inline-block;\n    border: 1px solid rgba(128, 128, 128, 0.6);\n    cursor: default;\n}\n\n.color-swatch-inner:hover {\n    border: 1px solid rgba(64, 64, 64, 0.8);\n}\n";Runtime.cachedResources["inline_editor/bezierSwatch.css"]="/*\n * Copyright 2016 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n:host {\n    white-space: nowrap;\n}\n\n.bezier-swatch-icon {\n    position: relative;\n    margin-left: 1px;\n    margin-right: 2px;\n    top: 1px;\n    -webkit-user-select: none;\n    line-height: 10px;\n    background-color: #9C27B0;\n    cursor: default;\n}\n\n.bezier-swatch-icon:hover {\n    background-color: #800080;\n}\n";Runtime.cachedResources["inline_editor/cssShadowSwatch.css"]="/*\n * Copyright 2016 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n:host {\n    white-space: nowrap;\n}\n\n.shadow-swatch-icon {\n    position: relative;\n    margin-left: 1px;\n    margin-right: 2px;\n    top: 1px;\n    -webkit-user-select: none;\n    line-height: 10px;\n    background-color: #9C27B0;\n}\n\n.shadow-swatch-icon:hover {\n    background-color: #800080;\n}\n";Runtime.cachedResources["inline_editor/cssShadowEditor.css"]="/*\n * Copyright 2016 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n:host {\n    -webkit-user-select: none;\n    padding: 4px 12px 12px 12px;\n}\n\n.shadow-editor-field:last-of-type {\n    margin-bottom: 8px;\n}\n\n.shadow-editor-field {\n    height: 24px;\n    margin-top: 8px;\n    font-size: 12px;\n    flex-shrink: 0;\n}\n\n.shadow-editor-flex-field {\n    display: flex;\n    align-items: center;\n    flex-direction: row;\n}\n\n.shadow-editor-field.shadow-editor-blur-field {\n    margin-top: 40px;\n}\n\n.shadow-editor-2D-slider {\n    position: absolute;\n    height: 88px;\n    width: 88px;\n    border: 1px solid rgba(0, 0, 0, 0.14);\n    border-radius: 2px;\n}\n\n.shadow-editor-label {\n    display: inline-block;\n    width: 52px;\n    height: 24px;\n    line-height: 24px;\n    margin-right: 8px;\n    text-align: right;\n}\n\n.shadow-editor-button-left, .shadow-editor-button-right {\n    width: 74px;\n    height: 24px;\n    padding: 3px 7px;\n    line-height: 16px;\n    border: 1px solid rgba(0, 0, 0, 0.14);\n    background-color: #ffffff;\n    text-align: center;\n    font-weight: 500;\n}\n\n.shadow-editor-button-left {\n    border-radius: 2px 0 0 2px;\n}\n\n.shadow-editor-button-right {\n    border-radius: 0 2px 2px 0;\n    border-left-width: 0;\n}\n\n.shadow-editor-button-left:hover, .shadow-editor-button-right:hover {\n    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n}\n\n.shadow-editor-button-left:focus, .shadow-editor-button-right:focus {\n    background-color: #eeeeee;\n}\n\n.shadow-editor-button-left.enabled, .shadow-editor-button-right.enabled, -theme-preserve {\n    background-color: #4285F4;\n    color: #ffffff;\n}\n\n.shadow-editor-button-left.enabled:focus, .shadow-editor-button-right.enabled:focus, -theme-preserve  {\n    background-color: #3B78E7;\n}\n\n.shadow-editor-text-input {\n    width: 52px;\n    margin-right: 8px;\n    text-align: right;\n    box-shadow: var(--focus-ring-inactive-shadow);\n}\n";Runtime.cachedResources["inline_editor/swatchPopover.css"]="/*\n * Copyright 2017 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.widget {\n    display: flex;\n    background: white;\n    box-shadow: var(--drop-shadow);\n    border-radius: 2px;\n    overflow: auto;\n    -webkit-user-select: text;\n    line-height: 11px;\n}\n";