const allDescriptors=[];let applicationDescriptor;const _loadedScripts={};for(const e of[]){}(function(){const e=self.location?self.location.origin+self.location.pathname:"";self._importScriptPathPrefix=e.substring(0,e.lastIndexOf("/")+1)})();const REMOTE_MODULE_FALLBACK_REVISION="@010ddcfda246975d194964ccf20038ebbdec6084";var Runtime=class{constructor(e){this._modules=[];this._modulesMap={};this._extensions=[];this._cachedTypeClasses={};this._descriptorsMap={};for(let t=0;t<e.length;++t)this._registerModule(e[t])}static loadResourcePromise(e){return new Promise(t);function t(t,s){const n=new XMLHttpRequest;n.open("GET",e,true);n.onreadystatechange=o;function o(o){if(n.readyState!==XMLHttpRequest.DONE)return;const i=/^HTTP\/1.1 404/.test(o.target.response)?404:n.status;if([0,200,304].indexOf(i)===-1)s(new Error("While loading from url "+e+" server responded with a status of "+i));else t(o.target.response)}n.send(null)}}static loadResourcePromiseWithFallback(e){return Runtime.loadResourcePromise(e).catch(t=>{const s=e.replace(/@[0-9a-f]{40}/,REMOTE_MODULE_FALLBACK_REVISION);if(s===e||!e.includes("audits_worker_module"))throw t;return Runtime.loadResourcePromise(s)})}static normalizePath(e){if(e.indexOf("..")===-1&&e.indexOf(".")===-1)return e;const t=[];const s=e.split("/");for(let e=0;e<s.length;e++){const n=s[e];if(n===".")continue;else if(n==="..")t.pop();else if(n)t.push(n)}let n=t.join("/");if(n[n.length-1]==="/")return n;if(e[0]==="/"&&n)n="/"+n;if(e[e.length-1]==="/"||s[s.length-1]==="."||s[s.length-1]==="..")n=n+"/";return n}static _loadScriptsPromise(e,t){const s=[];const n=[];const o=new Array(e.length);let i=0;for(let o=0;o<e.length;++o){const i=e[o];let a=(t||self._importScriptPathPrefix)+i;const l=a.indexOf("://")+3;let h=a.indexOf("/",l);if(h===-1)h=a.length;a=a.substring(0,h)+Runtime.normalizePath(a.substring(h));if(_loadedScripts[a])continue;n.push(a);const c=t?Runtime.loadResourcePromiseWithFallback(a):Runtime.loadResourcePromise(a);s.push(c.then(r.bind(null,o),r.bind(null,o,undefined)))}return Promise.all(s).then(undefined);function r(e,t){o[e]=t||"";while(typeof o[i]!=="undefined"){a(n[i],o[i]);++i}}function a(e,t){_loadedScripts[e]=true;if(!t){console.error("Empty response arrived for script '"+e+"'");return}self.eval(t+"\n//# sourceURL="+e)}}static _loadResourceIntoCache(e,t){return Runtime.loadResourcePromise(e).then(s.bind(this,e),s.bind(this,e,undefined));function s(e,s){if(!s){console.error("Failed to load resource: "+e);return}const n=t?Runtime.resolveSourceURL(e):"";Runtime.cachedResources[e]=s+n}}static async appStarted(){return Runtime._appStartedPromise}static async startApplication(e){console.timeStamp("Runtime.startApplication");const t={};for(let e=0;e<allDescriptors.length;++e){const s=allDescriptors[e];t[s["name"]]=s}if(!applicationDescriptor){let t=await Runtime.loadResourcePromise(e+".json");applicationDescriptor=JSON.parse(t);let s=applicationDescriptor;while(s.extends){t=await Runtime.loadResourcePromise(s.extends+".json");s=JSON.parse(t);applicationDescriptor.modules=s.modules.concat(applicationDescriptor.modules)}}const s=applicationDescriptor.modules;const n=[];const o=[];for(let e=0;e<s.length;++e){const i=s[e];const r=i["name"];const a=t[r];if(a)n.push(Promise.resolve(a));else n.push(Runtime.loadResourcePromise(r+"/module.json").then(JSON.parse.bind(JSON)));if(i["type"]==="autostart")o.push(r)}const i=await Promise.all(n);for(let e=0;e<i.length;++e){i[e].name=s[e]["name"];i[e].condition=s[e]["condition"];i[e].remote=s[e]["type"]==="remote"}self.runtime=new Runtime(i);if(o)await self.runtime._loadAutoStartModules(o);Runtime._appStartedPromiseCallback()}static startWorker(e){return Runtime.startApplication(e).then(t);function t(){self.postMessage("workerReady")}}static queryParam(e){return Runtime._queryParamsObject.get(e)}static queryParamsString(){return location.search}static _experimentsSetting(){try{return JSON.parse(self.localStorage&&self.localStorage["experiments"]?self.localStorage["experiments"]:"{}")}catch(e){console.error("Failed to parse localStorage['experiments']");return{}}}static _assert(e,t){if(e)return;Runtime._originalAssert.call(Runtime._console,e,t+" "+(new Error).stack)}static setPlatform(e){Runtime._platform=e}static _isDescriptorEnabled(e){const t=e["experiment"];if(t==="*")return Runtime.experiments.supportEnabled();if(t&&t.startsWith("!")&&Runtime.experiments.isEnabled(t.substring(1)))return false;if(t&&!t.startsWith("!")&&!Runtime.experiments.isEnabled(t))return false;const s=e["condition"];if(s&&!s.startsWith("!")&&!Runtime.queryParam(s))return false;if(s&&s.startsWith("!")&&Runtime.queryParam(s.substring(1)))return false;return true}static resolveSourceURL(e){let t=self.location.href;if(self.location.search)t=t.replace(self.location.search,"");t=t.substring(0,t.lastIndexOf("/")+1)+e;return"\n/*# sourceURL="+t+" */"}static setL10nCallback(e){Runtime._l10nCallback=e}useTestBase(){Runtime._remoteBase="http://localhost:8000/inspector-sources/";if(Runtime.queryParam("debugFrontend"))Runtime._remoteBase+="debug/"}_registerModule(e){const t=new Runtime.Module(this,e);this._modules.push(t);this._modulesMap[e["name"]]=t}loadModulePromise(e){return this._modulesMap[e]._loadPromise()}_loadAutoStartModules(e){const t=[];for(let s=0;s<e.length;++s)t.push(this.loadModulePromise(e[s]));return Promise.all(t)}_checkExtensionApplicability(e,t){if(!t)return false;const s=e.descriptor().contextTypes;if(!s)return true;for(let e=0;e<s.length;++e){const n=this._resolve(s[e]);const o=!!n&&t(n);if(o)return true}return false}isExtensionApplicableToContext(e,t){if(!t)return true;return this._checkExtensionApplicability(e,s);function s(e){return t instanceof e}}isExtensionApplicableToContextTypes(e,t){if(!e.descriptor().contextTypes)return true;return this._checkExtensionApplicability(e,t?s:null);function s(e){return t.has(e)}}extensions(e,t,s){return this._extensions.filter(n).sort(s?i:o);function n(s){if(s._type!==e&&s._typeClass()!==e)return false;if(!s.enabled())return false;return!t||s.isApplicable(t)}function o(e,t){const s=e.descriptor()["order"]||0;const n=t.descriptor()["order"]||0;return s-n}function i(e,t){const s=e.title()||"";const n=t.title()||"";return s.localeCompare(n)}}extension(e,t){return this.extensions(e,t)[0]||null}allInstances(e,t){return Promise.all(this.extensions(e,t).map(e=>e.instance()))}_resolve(e){if(!this._cachedTypeClasses[e]){const t=e.split(".");let s=self;for(let e=0;s&&e<t.length;++e)s=s[t[e]];if(s)this._cachedTypeClasses[e]=s}return this._cachedTypeClasses[e]||null}sharedInstance(e){if(Runtime._instanceSymbol in e&&Object.getOwnPropertySymbols(e).includes(Runtime._instanceSymbol))return e[Runtime._instanceSymbol];const t=new e;e[Runtime._instanceSymbol]=t;return t}};Runtime._queryParamsObject=new URLSearchParams(Runtime.queryParamsString());Runtime._instanceSymbol=Symbol("instance");Runtime.cachedResources={__proto__:null};Runtime._console=console;Runtime._originalAssert=console.assert;Runtime._platform="";Runtime.ModuleDescriptor=class{constructor(){this.name;this.extensions;this.dependencies;this.scripts;this.condition;this.remote}};Runtime.ExtensionDescriptor=class{constructor(){this.type;this.className;this.factoryName;this.contextTypes}};Runtime.Module=class{constructor(e,t){this._manager=e;this._descriptor=t;this._name=t.name;this._extensions=[];this._extensionsByClassName=new Map;const s=t.extensions;for(let e=0;s&&e<s.length;++e){const t=new Runtime.Extension(this,s[e]);this._manager._extensions.push(t);this._extensions.push(t)}this._loadedForTest=false}name(){return this._name}enabled(){return Runtime._isDescriptorEnabled(this._descriptor)}resource(e){const t=this._name+"/"+e;const s=Runtime.cachedResources[t];if(!s)throw new Error(t+" not preloaded. Check module.json");return s}_loadPromise(){if(!this.enabled())return Promise.reject(new Error("Module "+this._name+" is not enabled"));if(this._pendingLoadPromise)return this._pendingLoadPromise;const e=this._descriptor.dependencies;const t=[];for(let s=0;e&&s<e.length;++s)t.push(this._manager._modulesMap[e[s]]._loadPromise());this._pendingLoadPromise=Promise.all(t).then(this._loadResources.bind(this)).then(this._loadScripts.bind(this)).then(()=>this._loadedForTest=true);return this._pendingLoadPromise}_loadResources(){const e=this._descriptor["resources"];if(!e||!e.length)return Promise.resolve();const t=[];for(let s=0;s<e.length;++s){const n=this._modularizeURL(e[s]);const o=n.endsWith(".html");t.push(Runtime._loadResourceIntoCache(n,!o))}return Promise.all(t).then(undefined)}_loadScripts(){if(!this._descriptor.scripts||!this._descriptor.scripts.length)return Promise.resolve();const e={sdk:"SDK",js_sdk:"JSSDK",browser_sdk:"BrowserSDK",ui:"UI",object_ui:"ObjectUI",javascript_metadata:"JavaScriptMetadata",perf_ui:"PerfUI",har_importer:"HARImporter",sdk_test_runner:"SDKTestRunner",cpu_profiler_test_runner:"CPUProfilerTestRunner"};const t=e[this._name]||this._name.split("_").map(e=>e.substring(0,1).toUpperCase()+e.substring(1)).join("");self[t]=self[t]||{};return Runtime._loadScriptsPromise(this._descriptor.scripts.map(this._modularizeURL,this),this._remoteBase())}_modularizeURL(e){return Runtime.normalizePath(this._name+"/"+e)}_remoteBase(){return!Runtime.queryParam("debugFrontend")&&this._descriptor.remote&&Runtime._remoteBase||undefined}substituteURL(e){const t=this._remoteBase()||"";return e.replace(/@url\(([^\)]*?)\)/g,s.bind(this));function s(e,s){return t+this._modularizeURL(s)}}};Runtime.Extension=class{constructor(e,t){this._module=e;this._descriptor=t;this._type=t.type;this._hasTypeClass=this._type.charAt(0)==="@";this._className=t.className||null;this._factoryName=t.factoryName||null}descriptor(){return this._descriptor}module(){return this._module}enabled(){return this._module.enabled()&&Runtime._isDescriptorEnabled(this.descriptor())}_typeClass(){if(!this._hasTypeClass)return null;return this._module._manager._resolve(this._type.substring(1))}isApplicable(e){return this._module._manager.isExtensionApplicableToContext(this,e)}instance(){return this._module._loadPromise().then(this._createInstance.bind(this))}canInstantiate(){return!!(this._className||this._factoryName)}_createInstance(){const e=this._className||this._factoryName;if(!e)throw new Error("Could not instantiate extension with no class");const t=self.eval(e);if(!(t instanceof Function))throw new Error("Could not instantiate: "+e);if(this._className)return this._module._manager.sharedInstance(t);return new t(this)}title(){const e=this._descriptor["title-"+Runtime._platform]||this._descriptor["title"];if(e&&Runtime._l10nCallback)return Runtime._l10nCallback(e);return e}hasContextType(e){const t=this.descriptor().contextTypes;if(!t)return false;for(let s=0;s<t.length;++s){if(e===this._module._manager._resolve(t[s]))return true}return false}};Runtime.ExperimentsSupport=class{constructor(){this._supportEnabled=Runtime.queryParam("experiments")!==null;this._experiments=[];this._experimentNames={};this._enabledTransiently={};this._serverEnabled=new Set}allConfigurableExperiments(){const e=[];for(let t=0;t<this._experiments.length;t++){const s=this._experiments[t];if(!this._enabledTransiently[s.name])e.push(s)}return e}supportEnabled(){return this._supportEnabled}_setExperimentsSetting(e){if(!self.localStorage)return;self.localStorage["experiments"]=JSON.stringify(e)}register(e,t,s){Runtime._assert(!this._experimentNames[e],"Duplicate registration of experiment "+e);this._experimentNames[e]=true;this._experiments.push(new Runtime.Experiment(this,e,t,!!s))}isEnabled(e){this._checkExperiment(e);if(Runtime._experimentsSetting()[e]===false)return false;if(this._enabledTransiently[e])return true;if(this._serverEnabled.has(e))return true;if(!this.supportEnabled())return false;return!!Runtime._experimentsSetting()[e]}setEnabled(e,t){this._checkExperiment(e);const s=Runtime._experimentsSetting();s[e]=t;this._setExperimentsSetting(s)}setDefaultExperiments(e){for(let t=0;t<e.length;++t){this._checkExperiment(e[t]);this._enabledTransiently[e[t]]=true}}setServerEnabledExperiments(e){for(const t of e){this._checkExperiment(t);this._serverEnabled.add(t)}}enableForTest(e){this._checkExperiment(e);this._enabledTransiently[e]=true}clearForTest(){this._experiments=[];this._experimentNames={};this._enabledTransiently={};this._serverEnabled.clear()}cleanUpStaleExperiments(){const e=Runtime._experimentsSetting();const t={};for(let s=0;s<this._experiments.length;++s){const n=this._experiments[s].name;if(e[n])t[n]=true}this._setExperimentsSetting(t)}_checkExperiment(e){Runtime._assert(this._experimentNames[e],"Unknown experiment "+e)}};Runtime.Experiment=class{constructor(e,t,s,n){this.name=t;this.title=s;this.hidden=n;this._experiments=e}isEnabled(){return this._experiments.isEnabled(this.name)}setEnabled(e){this._experiments.setEnabled(this.name,e)}};Runtime.experiments=new Runtime.ExperimentsSupport;Runtime._appStartedPromiseCallback;Runtime._appStartedPromise=new Promise(e=>Runtime._appStartedPromiseCallback=e);Runtime._l10nCallback;Runtime._remoteBase;(function e(){if(location.href.startsWith("devtools://devtools/bundled/")&&Runtime.queryParam("remoteBase")){const e=/\/serve_file\/(@[0-9a-zA-Z]+)\/?$/.exec(Runtime.queryParam("remoteBase"));if(e)Runtime._remoteBase=`${location.origin}/remote/serve_file/${e[1]}/`}})();function ServicePort(){}ServicePort.prototype={setHandlers(e,t){},send(e){},close(){}};var runtime;allDescriptors.push(...[{name:"heap_snapshot_worker",remote:false,extensions:[],dependencies:["heap_snapshot_model","platform","common"]},{name:"heap_snapshot_model",remote:false,extensions:[],dependencies:[]},{name:"platform",remote:false,extensions:[],dependencies:[]},{name:"text_utils",remote:false,extensions:[],dependencies:["platform"]},{name:"common",remote:false,extensions:[],dependencies:["text_utils","platform"]}]);applicationDescriptor={modules:[{name:"heap_snapshot_worker",type:"autostart"},{name:"heap_snapshot_model",type:"autostart"},{name:"platform",type:"autostart"},{name:"text_utils",type:"autostart"},{name:"common",type:"autostart"}],hasHtml:false};if(!self.Runtime)self.importScripts("Runtime.js");Runtime.startWorker("heap_snapshot_worker");self["HeapSnapshotModel"]=self["HeapSnapshotModel"]||{};HeapSnapshotModel.HeapSnapshotProgressEvent={Update:"ProgressUpdate",BrokenSnapshot:"BrokenSnapshot"};HeapSnapshotModel.baseSystemDistance=1e8;HeapSnapshotModel.AllocationNodeCallers=class{constructor(e,t){this.nodesWithSingleCaller=e;this.branchingCallers=t}};HeapSnapshotModel.SerializedAllocationNode=class{constructor(e,t,s,n,o,i,r,a,l,h,c){this.id=e;this.name=t;this.scriptName=s;this.scriptId=n;this.line=o;this.column=i;this.count=r;this.size=a;this.liveCount=l;this.liveSize=h;this.hasChildren=c}};HeapSnapshotModel.AllocationStackFrame=class{constructor(e,t,s,n,o){this.functionName=e;this.scriptName=t;this.scriptId=s;this.line=n;this.column=o}};HeapSnapshotModel.Node=class{constructor(e,t,s,n,o,i,r){this.id=e;this.name=t;this.distance=s;this.nodeIndex=n;this.retainedSize=o;this.selfSize=i;this.type=r;this.canBeQueried=false;this.detachedDOMTreeNode=false}};HeapSnapshotModel.Edge=class{constructor(e,t,s,n){this.name=e;this.node=t;this.type=s;this.edgeIndex=n}};HeapSnapshotModel.Aggregate=class{constructor(){this.count;this.distance;this.self;this.maxRet;this.type;this.name;this.idxs}};HeapSnapshotModel.AggregateForDiff=class{constructor(){this.indexes=[];this.ids=[];this.selfSizes=[]}};HeapSnapshotModel.Diff=class{constructor(){this.addedCount=0;this.removedCount=0;this.addedSize=0;this.removedSize=0;this.deletedIndexes=[];this.addedIndexes=[]}};HeapSnapshotModel.DiffForClass=class{constructor(){this.addedCount;this.removedCount;this.addedSize;this.removedSize;this.deletedIndexes;this.addedIndexes;this.countDelta;this.sizeDelta}};HeapSnapshotModel.ComparatorConfig=class{constructor(){this.fieldName1;this.ascending1;this.fieldName2;this.ascending2}};HeapSnapshotModel.WorkerCommand=class{constructor(){this.callId;this.disposition;this.objectId;this.newObjectId;this.methodName;this.methodArguments;this.source}};HeapSnapshotModel.ItemsRange=class{constructor(e,t,s,n){this.startPosition=e;this.endPosition=t;this.totalLength=s;this.items=n}};HeapSnapshotModel.StaticData=class{constructor(e,t,s,n){this.nodeCount=e;this.rootNodeIndex=t;this.totalSize=s;this.maxJSObjectId=n}};HeapSnapshotModel.Statistics=class{constructor(){this.total;this.v8heap;this.native;this.code;this.jsArrays;this.strings;this.system}};HeapSnapshotModel.NodeFilter=class{constructor(e,t){this.minNodeId=e;this.maxNodeId=t;this.allocationNodeId}equals(e){return this.minNodeId===e.minNodeId&&this.maxNodeId===e.maxNodeId&&this.allocationNodeId===e.allocationNodeId}};HeapSnapshotModel.SearchConfig=class{constructor(e,t,s,n,o){this.query=e;this.caseSensitive=t;this.isRegex=s;this.shouldJump=n;this.jumpBackward=o}};HeapSnapshotModel.Samples=class{constructor(e,t,s){this.timestamps=e;this.lastAssignedIds=t;this.sizes=s}};HeapSnapshotModel.Location=class{constructor(e,t,s){this.scriptId=e;this.lineNumber=t;this.columnNumber=s}};self["Platform"]=self["Platform"]||{};let ArrayLike;function mod(e,t){return(e%t+t)%t}String.prototype.findAll=function(e){const t=[];let s=this.indexOf(e);while(s!==-1){t.push(s);s=this.indexOf(e,s+e.length)}return t};String.prototype.reverse=function(){return this.split("").reverse().join("")};String.prototype.replaceControlCharacters=function(){return this.replace(/[\u0000-\u0008\u000b\u000c\u000e-\u001f\u0080-\u009f]/g,"�")};String.prototype.isWhitespace=function(){return/^\s*$/.test(this)};String.prototype.computeLineEndings=function(){const e=this.findAll("\n");e.push(this.length);return e};String.prototype.escapeCharacters=function(e){let t=false;for(let s=0;s<e.length;++s){if(this.indexOf(e.charAt(s))!==-1){t=true;break}}if(!t)return String(this);let s="";for(let t=0;t<this.length;++t){if(e.indexOf(this.charAt(t))!==-1)s+="\\";s+=this.charAt(t)}return s};String.regexSpecialCharacters=function(){return"^[]{}()\\.^$*+?|-,"};String.prototype.escapeForRegExp=function(){return this.escapeCharacters(String.regexSpecialCharacters())};String.filterRegex=function(e){const t=String.regexSpecialCharacters();let s="";for(let n=0;n<e.length;++n){let o=e.charAt(n);if(t.indexOf(o)!==-1)o="\\"+o;if(n)s+="[^\\0"+o+"]*";s+=o}return new RegExp(s,"i")};String.escapeInvalidUnicodeCharacters=function(e){if(!String._invalidCharactersRegExp){let e="";for(let t=65534;t<=1114111;t+=65536)e+=String.fromCodePoint(t,t+1);String._invalidCharactersRegExp=new RegExp(`[${e}\ud800-\udfff﷐-﷯]`,"gu")}let t="";let s=0;while(true){const n=String._invalidCharactersRegExp.exec(e);if(!n)break;t+=e.substring(s,n.index)+"\\u"+e.charCodeAt(n.index).toString(16);if(n.index+1<String._invalidCharactersRegExp.lastIndex)t+="\\u"+e.charCodeAt(n.index+1).toString(16);s=String._invalidCharactersRegExp.lastIndex}return t+e.substring(s)};String.prototype.escapeHTML=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};String.prototype.unescapeHTML=function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#58;/g,":").replace(/&quot;/g,'"').replace(/&#60;/g,"<").replace(/&#62;/g,">").replace(/&amp;/g,"&")};String.prototype.collapseWhitespace=function(){return this.replace(/[\s\xA0]+/g," ")};String.prototype.trimMiddle=function(e){if(this.length<=e)return String(this);let t=e>>1;let s=e-t-1;if(this.codePointAt(this.length-s-1)>=65536){--s;++t}if(t>0&&this.codePointAt(t-1)>=65536)--t;return this.substr(0,t)+"…"+this.substr(this.length-s,s)};String.prototype.trimEnd=function(e){if(this.length<=e)return String(this);return this.substr(0,e-1)+"…"};String.prototype.trimURL=function(e){let t=this.replace(/^(https|http|file):\/\//i,"");if(e){if(t.toLowerCase().startsWith(e.toLowerCase()))t=t.substr(e.length)}return t};String.prototype.toTitleCase=function(){return this.substring(0,1).toUpperCase()+this.substring(1)};String.prototype.compareTo=function(e){if(this>e)return 1;if(this<e)return-1;return 0};String.prototype.removeURLFragment=function(){let e=this.indexOf("#");if(e===-1)e=this.length;return this.substring(0,e)};String.hashCode=function(e){if(!e)return 0;const t=(1<<30)*4-5;const s=1345575271;const n=1506996573;let o=0;let i=1;for(let r=0;r<e.length;r++){const a=e.charCodeAt(r)*n;o=(o+i*a)%t;i=i*s%t}o=(o+i*(t-1))%t;return Math.abs(o|0)};String.isDigitAt=function(e,t){const s=e.charCodeAt(t);return 48<=s&&s<=57};String.prototype.toBase64=function(){function e(e){return e<26?e+65:e<52?e+71:e<62?e-4:e===62?43:e===63?47:65}const t=new TextEncoder;const s=t.encode(this.toString());const n=s.length;let o="";if(n===0)return o;let i;let r=0;for(let t=0;t<n;t++){i=t%3;r|=s[t]<<(16>>>i&24);if(i===2){o+=String.fromCharCode(e(r>>>18&63),e(r>>>12&63),e(r>>>6&63),e(r&63));r=0}}if(i===0)o+=String.fromCharCode(e(r>>>18&63),e(r>>>12&63),61,61);else if(i===1)o+=String.fromCharCode(e(r>>>18&63),e(r>>>12&63),e(r>>>6&63),61);return o};String.naturalOrderComparator=function(e,t){const s=/^\d+|^\D+/;let n,o,i,r;while(1){if(e){if(!t)return 1}else{if(t)return-1;else return 0}n=e.match(s)[0];o=t.match(s)[0];i=!isNaN(n);r=!isNaN(o);if(i&&!r)return-1;if(r&&!i)return 1;if(i&&r){const e=n-o;if(e)return e;if(n.length!==o.length){if(!+n&&!+o)return n.length-o.length;else return o.length-n.length}}else if(n!==o){return n<o?-1:1}e=e.substring(n.length);t=t.substring(o.length)}};String.caseInsensetiveComparator=function(e,t){e=e.toUpperCase();t=t.toUpperCase();if(e===t)return 0;return e>t?1:-1};Number.constrain=function(e,t,s){if(e<t)e=t;else if(e>s)e=s;return e};Number.gcd=function(e,t){if(t===0)return e;else return Number.gcd(t,e%t)};Number.toFixedIfFloating=function(e){if(!e||isNaN(e))return e;const t=Number(e);return t%1?t.toFixed(3):String(t)};Date.prototype.isValid=function(){return!isNaN(this.getTime())};Date.prototype.toISO8601Compact=function(){function e(e){return(e>9?"":"0")+e}return this.getFullYear()+e(this.getMonth()+1)+e(this.getDate())+"T"+e(this.getHours())+e(this.getMinutes())+e(this.getSeconds())};Object.defineProperty(Array.prototype,"remove",{value:function(e,t){let s=this.indexOf(e);if(s===-1)return false;if(t){this.splice(s,1);return true}for(let t=s+1,n=this.length;t<n;++t){if(this[t]!==e)this[s++]=this[t]}this.length=s;return true}});Object.defineProperty(Array.prototype,"pushAll",{value:function(e){for(let t=0;t<e.length;++t)this.push(e[t])}});Object.defineProperty(Array.prototype,"rotate",{value:function(e){const t=[];for(let s=e;s<e+this.length;++s)t.push(this[s%this.length]);return t}});Object.defineProperty(Array.prototype,"sortNumbers",{value:function(){function e(e,t){return e-t}this.sort(e)}});Object.defineProperty(Uint32Array.prototype,"sort",{value:Array.prototype.sort});(function(){const e={value:function(e,t,s,n){function o(e,t,s){const n=e[t];e[t]=e[s];e[s]=n}const i=this[n];o(this,s,n);let r=t;for(let n=t;n<s;++n){if(e(this[n],i)<0){o(this,r,n);++r}}o(this,s,r);return r}};Object.defineProperty(Array.prototype,"partition",e);Object.defineProperty(Uint32Array.prototype,"partition",e);const t={value:function(e,t,s,n,o){function i(e,t,s,n,o,r){if(n<=s)return;const a=Math.floor(Math.random()*(n-s))+s;const l=e.partition(t,s,n,a);if(o<l)i(e,t,s,l-1,o,r);if(l<r)i(e,t,l+1,n,o,r)}if(t===0&&s===this.length-1&&n===0&&o>=s)this.sort(e);else i(this,e,t,s,n,o);return this}};Object.defineProperty(Array.prototype,"sortRange",t);Object.defineProperty(Uint32Array.prototype,"sortRange",t)})();Object.defineProperty(Array.prototype,"stableSort",{value:function(e){function t(e,t){return e<t?-1:e>t?1:0}e=e||t;const s=new Array(this.length);for(let e=0;e<this.length;++e)s[e]=e;const n=this;function o(t,s){const o=e(n[t],n[s]);return o?o:t-s}s.sort(o);for(let e=0;e<this.length;++e){if(s[e]<0||e===s[e])continue;let t=e;const n=this[e];while(true){const o=s[t];s[t]=-1;if(o===e){this[t]=n;break}else{this[t]=this[o];t=o}}}return this}});Object.defineProperty(Array.prototype,"qselect",{value:function(e,t){if(e<0||e>=this.length)return;if(!t){t=function(e,t){return e-t}}let s=0;let n=this.length-1;for(;;){const o=this.partition(t,s,n,Math.floor((n+s)/2));if(o===e)return this[e];else if(o>e)n=o-1;else s=o+1}}});Object.defineProperty(Array.prototype,"lowerBound",{value:function(e,t,s,n){function o(e,t){return e<t?-1:e>t?1:0}t=t||o;let i=s||0;let r=n!==undefined?n:this.length;while(i<r){const s=i+r>>1;if(t(e,this[s])>0)i=s+1;else r=s}return r}});Object.defineProperty(Array.prototype,"upperBound",{value:function(e,t,s,n){function o(e,t){return e<t?-1:e>t?1:0}t=t||o;let i=s||0;let r=n!==undefined?n:this.length;while(i<r){const s=i+r>>1;if(t(e,this[s])>=0)i=s+1;else r=s}return r}});Object.defineProperty(Uint32Array.prototype,"lowerBound",{value:Array.prototype.lowerBound});Object.defineProperty(Uint32Array.prototype,"upperBound",{value:Array.prototype.upperBound});Object.defineProperty(Int32Array.prototype,"lowerBound",{value:Array.prototype.lowerBound});Object.defineProperty(Int32Array.prototype,"upperBound",{value:Array.prototype.upperBound});Object.defineProperty(Float64Array.prototype,"lowerBound",{value:Array.prototype.lowerBound});Object.defineProperty(Array.prototype,"binaryIndexOf",{value:function(e,t){const s=this.lowerBound(e,t);return s<this.length&&t(e,this[s])===0?s:-1}});Object.defineProperty(Array.prototype,"select",{value:function(e){const t=new Array(this.length);for(let s=0;s<this.length;++s)t[s]=this[s][e];return t}});Object.defineProperty(Array.prototype,"peekLast",{value:function(){return this[this.length-1]}});(function(){function e(e,t,s,n){const o=[];let i=0;let r=0;while(i<e.length&&r<t.length){const a=s(e[i],t[r]);if(n||!a)o.push(a<=0?e[i]:t[r]);if(a<=0)i++;if(a>=0)r++}if(n){while(i<e.length)o.push(e[i++]);while(r<t.length)o.push(t[r++])}return o}Object.defineProperty(Array.prototype,"intersectOrdered",{value:function(t,s){return e(this,t,s,false)}});Object.defineProperty(Array.prototype,"mergeOrdered",{value:function(t,s){return e(this,t,s,true)}})})();String.sprintf=function(e,t){return String.vsprintf(e,Array.prototype.slice.call(arguments,1))};String.tokenizeFormatString=function(e,t){const s=[];function n(e){if(!e)return;if(s.length&&s[s.length-1].type==="string")s[s.length-1].value+=e;else s.push({type:"string",value:e})}function o(e,t,n){s.push({type:"specifier",specifier:e,precision:t,substitutionIndex:n})}function i(e){const t={3:"color",9:"colorLight",4:"bgColor",10:"bgColorLight"};const n=["black","red","green","yellow","blue","magenta","cyan","lightGray","","default"];const o=["darkGray","lightRed","lightGreen","lightYellow","lightBlue","lightMagenta","lightCyan","white",""];const i={color:n,colorLight:o,bgColor:n,bgColorLight:o};const r=t[Math.floor(e/10)];if(!r)return;const a=i[r][e%10];if(!a)return;s.push({type:"specifier",specifier:"c",value:{description:(r.startsWith("bg")?"background : ":"color: ")+a}})}let r=0;let a=0;const l=new RegExp(`%%|%(?:(\\d+)\\$)?(?:\\.(\\d*))?([${Object.keys(t).join("")}])|\\u001b\\[(\\d+)m`,"g");for(let t=l.exec(e);!!t;t=l.exec(e)){const s=t.index;if(s>r)n(e.substring(r,s));if(t[0]==="%%"){n("%")}else if(t[0].startsWith("%")){const[e,s,n,i]=t;if(s&&Number(s)>0)a=Number(s)-1;const r=n?Number(n):-1;o(i,r,a);++a}else{const e=Number(t[4]);i(e)}r=s+t[0].length}n(e.substring(r));return s};String.standardFormatters={d:function(e){return!isNaN(e)?e:0},f:function(e,t){if(e&&t.precision>-1)e=e.toFixed(t.precision);return!isNaN(e)?e:t.precision>-1?Number(0).toFixed(t.precision):0},s:function(e){return e}};String.vsprintf=function(e,t){return String.format(e,t,String.standardFormatters,"",function(e,t){return e+t}).formattedResult};String.format=function(e,t,s,n,o,i){if(!e||(!t||!t.length)&&e.search(/\u001b\[(\d+)m/)===-1)return{formattedResult:o(n,e),unusedSubstitutions:t};function r(){return'String.format("'+e+'", "'+Array.prototype.join.call(t,'", "')+'")'}function a(e){console.warn(r()+": "+e)}function l(e){console.error(r()+": "+e)}let h=n;const c=i||String.tokenizeFormatString(e,s);const d={};for(let e=0;e<c.length;++e){const n=c[e];if(n.type==="string"){h=o(h,n.value);continue}if(n.type!=="specifier"){l('Unknown token type "'+n.type+'" found.');continue}if(!n.value&&n.substitutionIndex>=t.length){l("not enough substitution arguments. Had "+t.length+" but needed "+(n.substitutionIndex+1)+", so substitution was skipped.");h=o(h,"%"+(n.precision>-1?n.precision:"")+n.specifier);continue}if(!n.value)d[n.substitutionIndex]=true;if(!(n.specifier in s)){a("unsupported format character “"+n.specifier+"”. Treating as a string.");h=o(h,n.value?"":t[n.substitutionIndex]);continue}h=o(h,s[n.specifier](n.value||t[n.substitutionIndex],n))}const u=[];for(let e=0;e<t.length;++e){if(e in d)continue;u.push(t[e])}return{formattedResult:h,unusedSubstitutions:u}};function createSearchRegex(e,t,s){const n=t?"g":"gi";let o;if(s){try{o=new RegExp(e,n)}catch(e){}}if(!o)o=createPlainTextSearchRegex(e,n);return o}function createPlainTextSearchRegex(e,t){const s=String.regexSpecialCharacters();let n="";for(let t=0;t<e.length;++t){const o=e.charAt(t);if(s.indexOf(o)!==-1)n+="\\";n+=o}return new RegExp(n,t||"")}function countRegexMatches(e,t){let s=t;let n=0;let o;while(s&&(o=e.exec(s))){if(o[0].length>0)++n;s=s.substring(o.index+1)}return n}function spacesPadding(e){return" ".repeat(e)}function numberToStringWithSpacesPadding(e,t){const s=e.toString();const n=Math.max(0,t-s.length);return spacesPadding(n)+s}Set.prototype.valuesArray=function(){return Array.from(this.values())};Set.prototype.firstValue=function(){if(!this.size)return null;return this.values().next().value};Set.prototype.addAll=function(e){for(const t of e)this.add(t)};Set.prototype.containsAll=function(e){for(const t of e){if(!this.has(t))return false}return true};Map.prototype.remove=function(e){const t=this.get(e);this.delete(e);return t};Map.prototype.valuesArray=function(){return Array.from(this.values())};Map.prototype.keysArray=function(){return Array.from(this.keys())};Map.prototype.inverse=function(){const e=new Multimap;for(const t of this.keys()){const s=this.get(t);e.set(s,t)}return e};var Multimap=function(){this._map=new Map};Multimap.prototype={set:function(e,t){let s=this._map.get(e);if(!s){s=new Set;this._map.set(e,s)}s.add(t)},get:function(e){return this._map.get(e)||new Set},has:function(e){return this._map.has(e)},hasValue:function(e,t){const s=this._map.get(e);if(!s)return false;return s.has(t)},get size(){return this._map.size},delete:function(e,t){const s=this.get(e);if(!s)return false;const n=s.delete(t);if(!s.size)this._map.delete(e);return n},deleteAll:function(e){this._map.delete(e)},keysArray:function(){return this._map.keysArray()},valuesArray:function(){const e=[];const t=this.keysArray();for(let s=0;s<t.length;++s)e.pushAll(this.get(t[s]).valuesArray());return e},clear:function(){this._map.clear()}};function loadXHR(e){return new Promise(t);function t(t,s){function n(){if(o.readyState!==XMLHttpRequest.DONE)return;if(o.status!==200){o.onreadystatechange=null;s(new Error(o.status));return}o.onreadystatechange=null;t(o.responseText)}const o=new XMLHttpRequest;o.withCredentials=false;o.open("GET",e,true);o.onreadystatechange=n;o.send(null)}}function suppressUnused(e){}self.setImmediate=function(e){const t=[...arguments].slice(1);Promise.resolve().then(()=>e(...t));return 0};Promise.prototype.spread=function(e){return this.then(t);function t(t){return e.apply(null,t)}};Promise.prototype.catchException=function(e){return this.catch(function(t){console.error(t);return e})};Map.prototype.diff=function(e,t){const s=this.keysArray();const n=e.keysArray();s.sort((e,t)=>e-t);n.sort((e,t)=>e-t);const o=[];const i=[];const r=[];let a=0;let l=0;while(a<s.length&&l<n.length){const h=s[a];const c=n[l];if(h===c&&t(this.get(h),e.get(c))){r.push(this.get(h));++a;++l;continue}if(h<=c){o.push(this.get(h));++a;continue}i.push(e.get(c));++l}while(a<s.length){const e=s[a++];o.push(this.get(e))}while(l<n.length){const t=n[l++];i.push(e.get(t))}return{added:i,removed:o,equal:r}};function runOnWindowLoad(e){function t(){self.removeEventListener("DOMContentLoaded",t,false);e()}if(document.readyState==="complete"||document.readyState==="interactive")e();else self.addEventListener("DOMContentLoaded",t,false)}const _singletonSymbol=Symbol("singleton");function singleton(e){if(_singletonSymbol in e)return e[_singletonSymbol];const t=new e;e[_singletonSymbol]=t;return t}function base64ToSize(e){if(!e)return 0;let t=e.length*3/4;if(e[e.length-1]==="=")t--;if(e.length>1&&e[e.length-2]==="=")t--;return t}self["TextUtils"]=self["TextUtils"]||{};TextUtils.Text=class{constructor(e){this._value=e}lineEndings(){if(!this._lineEndings)this._lineEndings=this._value.computeLineEndings();return this._lineEndings}value(){return this._value}lineCount(){const e=this.lineEndings();return e.length}offsetFromPosition(e,t){return(e?this.lineEndings()[e-1]+1:0)+t}positionFromOffset(e){const t=this.lineEndings();const s=t.lowerBound(e);return{lineNumber:s,columnNumber:e-(s&&t[s-1]+1)}}lineAt(e){const t=this.lineEndings();const s=e>0?t[e-1]+1:0;const n=t[e];let o=this._value.substring(s,n);if(o.length>0&&o.charAt(o.length-1)==="\r")o=o.substring(0,o.length-1);return o}toSourceRange(e){const t=this.offsetFromPosition(e.startLine,e.startColumn);const s=this.offsetFromPosition(e.endLine,e.endColumn);return new TextUtils.SourceRange(t,s-t)}toTextRange(e){const t=new TextUtils.TextCursor(this.lineEndings());const s=TextUtils.TextRange.createFromLocation(0,0);t.resetTo(e.offset);s.startLine=t.lineNumber();s.startColumn=t.columnNumber();t.advance(e.offset+e.length);s.endLine=t.lineNumber();s.endColumn=t.columnNumber();return s}replaceRange(e,t){const s=this.toSourceRange(e);return this._value.substring(0,s.offset)+t+this._value.substring(s.offset+s.length)}extract(e){const t=this.toSourceRange(e);return this._value.substr(t.offset,t.length)}};TextUtils.Text.Position;TextUtils.TextCursor=class{constructor(e){this._lineEndings=e;this._offset=0;this._lineNumber=0;this._columnNumber=0}advance(e){this._offset=e;while(this._lineNumber<this._lineEndings.length&&this._lineEndings[this._lineNumber]<this._offset)++this._lineNumber;this._columnNumber=this._lineNumber?this._offset-this._lineEndings[this._lineNumber-1]-1:this._offset}offset(){return this._offset}resetTo(e){this._offset=e;this._lineNumber=this._lineEndings.lowerBound(e);this._columnNumber=this._lineNumber?this._offset-this._lineEndings[this._lineNumber-1]-1:this._offset}lineNumber(){return this._lineNumber}columnNumber(){return this._columnNumber}};TextUtils.TextUtils={isStopChar:function(e){return e>" "&&e<"0"||e>"9"&&e<"A"||e>"Z"&&e<"_"||e>"_"&&e<"a"||e>"z"&&e<="~"},isWordChar:function(e){return!TextUtils.TextUtils.isStopChar(e)&&!TextUtils.TextUtils.isSpaceChar(e)},isSpaceChar:function(e){return TextUtils.TextUtils._SpaceCharRegex.test(e)},isWord:function(e){for(let t=0;t<e.length;++t){if(!TextUtils.TextUtils.isWordChar(e.charAt(t)))return false}return true},isOpeningBraceChar:function(e){return e==="("||e==="{"},isClosingBraceChar:function(e){return e===")"||e==="}"},isBraceChar:function(e){return TextUtils.TextUtils.isOpeningBraceChar(e)||TextUtils.TextUtils.isClosingBraceChar(e)},textToWords:function(e,t,s){let n=-1;for(let o=0;o<e.length;++o){if(!t(e.charAt(o))){if(n!==-1)s(e.substring(n,o));n=-1}else if(n===-1){n=o}}if(n!==-1)s(e.substring(n))},lineIndent:function(e){let t=0;while(t<e.length&&TextUtils.TextUtils.isSpaceChar(e.charAt(t)))++t;return e.substr(0,t)},isUpperCase:function(e){return e===e.toUpperCase()},isLowerCase:function(e){return e===e.toLowerCase()},splitStringByRegexes(e,t){const s=[];const n=[];for(let e=0;e<t.length;e++){const s=t[e];if(!s.global)n.push(new RegExp(s.source,s.flags?s.flags+"g":"g"));else n.push(s)}o(e,0,0);return s;function o(e,t,i){if(t>=n.length){s.push({value:e,position:i,regexIndex:-1,captureGroups:[]});return}const r=n[t];let a=0;let l;r.lastIndex=0;while((l=r.exec(e))!==null){const n=e.substring(a,l.index);if(n)o(n,t+1,i+a);const r=l[0];s.push({value:r,position:i+l.index,regexIndex:t,captureGroups:l.slice(1)});a=l.index+r.length}const h=e.substring(a);if(h)o(h,t+1,i+a)}}};TextUtils.FilterParser=class{constructor(e){this._keys=e}static cloneFilter(e){return{key:e.key,text:e.text,regex:e.regex,negative:e.negative}}parse(e){const t=TextUtils.TextUtils.splitStringByRegexes(e,[TextUtils.TextUtils._keyValueFilterRegex,TextUtils.TextUtils._regexFilterRegex,TextUtils.TextUtils._textFilterRegex]);const s=[];for(let e=0;e<t.length;e++){const n=t[e].regexIndex;if(n===-1)continue;const o=t[e].captureGroups;if(n===0){if(this._keys.indexOf(o[1])!==-1)s.push({key:o[1],text:o[2],negative:!!o[0]});else s.push({text:o[1]+":"+o[2],negative:!!o[0]})}else if(n===1){try{s.push({regex:new RegExp(o[1],"i"),negative:!!o[0]})}catch(e){s.push({text:"/"+o[1]+"/",negative:!!o[0]})}}else if(n===2){s.push({text:o[1],negative:!!o[0]})}}return s}};TextUtils.FilterParser.ParsedFilter;TextUtils.TextUtils._keyValueFilterRegex=/(?:^|\s)(\-)?([\w\-]+):([^\s]+)/;TextUtils.TextUtils._regexFilterRegex=/(?:^|\s)(\-)?\/([^\s]+)\//;TextUtils.TextUtils._textFilterRegex=/(?:^|\s)(\-)?([^\s]+)/;TextUtils.TextUtils._SpaceCharRegex=/\s/;TextUtils.TextUtils.Indent={TwoSpaces:"  ",FourSpaces:"    ",EightSpaces:"        ",TabCharacter:"\t"};TextUtils.TextUtils.BalancedJSONTokenizer=class{constructor(e,t){this._callback=e;this._index=0;this._balance=0;this._buffer="";this._findMultiple=t||false;this._closingDoubleQuoteRegex=/[^\\](?:\\\\)*"/g}write(e){this._buffer+=e;const t=this._buffer.length;const s=this._buffer;let n;for(n=this._index;n<t;++n){const e=s[n];if(e==='"'){this._closingDoubleQuoteRegex.lastIndex=n;if(!this._closingDoubleQuoteRegex.test(s))break;n=this._closingDoubleQuoteRegex.lastIndex-1}else if(e==="{"){++this._balance}else if(e==="}"){--this._balance;if(this._balance<0){this._reportBalanced();return false}if(!this._balance){this._lastBalancedIndex=n+1;if(!this._findMultiple)break}}else if(e==="]"&&!this._balance){this._reportBalanced();return false}}this._index=n;this._reportBalanced();return true}_reportBalanced(){if(!this._lastBalancedIndex)return;this._callback(this._buffer.slice(0,this._lastBalancedIndex));this._buffer=this._buffer.slice(this._lastBalancedIndex);this._index-=this._lastBalancedIndex;this._lastBalancedIndex=0}remainder(){return this._buffer}};TextUtils.TokenizerFactory=function(){};TextUtils.TokenizerFactory.prototype={createTokenizer(e){}};TextUtils.isMinified=function(e){const t=500;let s=10;let n=0;do{let s=e.indexOf("\n",n);if(s<0)s=e.length;if(s-n>t&&e.substr(n,3)!=="//#")return true;n=s+1}while(--s>=0&&n<e.length);s=10;n=e.length;do{let s=e.lastIndexOf("\n",n);if(s<0)s=0;if(n-s>t&&e.substr(n,3)!=="//#")return true;n=s-1}while(--s>=0&&n>0);return false};TextUtils.TextRange=class{constructor(e,t,s,n){this.startLine=e;this.startColumn=t;this.endLine=s;this.endColumn=n}static createFromLocation(e,t){return new TextUtils.TextRange(e,t,e,t)}static fromObject(e){return new TextUtils.TextRange(e.startLine,e.startColumn,e.endLine,e.endColumn)}static comparator(e,t){return e.compareTo(t)}static fromEdit(e,t){let s=e.startLine;let n=e.startColumn+t.length;const o=t.computeLineEndings();if(o.length>1){s=e.startLine+o.length-1;const t=o.length;n=o[t-1]-o[t-2]-1}return new TextUtils.TextRange(e.startLine,e.startColumn,s,n)}isEmpty(){return this.startLine===this.endLine&&this.startColumn===this.endColumn}immediatelyPrecedes(e){if(!e)return false;return this.endLine===e.startLine&&this.endColumn===e.startColumn}immediatelyFollows(e){if(!e)return false;return e.immediatelyPrecedes(this)}follows(e){return e.endLine===this.startLine&&e.endColumn<=this.startColumn||e.endLine<this.startLine}get linesCount(){return this.endLine-this.startLine}collapseToEnd(){return new TextUtils.TextRange(this.endLine,this.endColumn,this.endLine,this.endColumn)}collapseToStart(){return new TextUtils.TextRange(this.startLine,this.startColumn,this.startLine,this.startColumn)}normalize(){if(this.startLine>this.endLine||this.startLine===this.endLine&&this.startColumn>this.endColumn)return new TextUtils.TextRange(this.endLine,this.endColumn,this.startLine,this.startColumn);else return this.clone()}clone(){return new TextUtils.TextRange(this.startLine,this.startColumn,this.endLine,this.endColumn)}serializeToObject(){const e={};e.startLine=this.startLine;e.startColumn=this.startColumn;e.endLine=this.endLine;e.endColumn=this.endColumn;return e}compareTo(e){if(this.startLine>e.startLine)return 1;if(this.startLine<e.startLine)return-1;if(this.startColumn>e.startColumn)return 1;if(this.startColumn<e.startColumn)return-1;return 0}compareToPosition(e,t){if(e<this.startLine||e===this.startLine&&t<this.startColumn)return-1;if(e>this.endLine||e===this.endLine&&t>this.endColumn)return 1;return 0}equal(e){return this.startLine===e.startLine&&this.endLine===e.endLine&&this.startColumn===e.startColumn&&this.endColumn===e.endColumn}relativeTo(e,t){const s=this.clone();if(this.startLine===e)s.startColumn-=t;if(this.endLine===e)s.endColumn-=t;s.startLine-=e;s.endLine-=e;return s}relativeFrom(e,t){const s=this.clone();if(this.startLine===0)s.startColumn+=t;if(this.endLine===0)s.endColumn+=t;s.startLine+=e;s.endLine+=e;return s}rebaseAfterTextEdit(e,t){console.assert(e.startLine===t.startLine);console.assert(e.startColumn===t.startColumn);const s=this.clone();if(!this.follows(e))return s;const n=t.endLine-e.endLine;const o=t.endColumn-e.endColumn;s.startLine+=n;s.endLine+=n;if(s.startLine===t.endLine)s.startColumn+=o;if(s.endLine===t.endLine)s.endColumn+=o;return s}toString(){return JSON.stringify(this)}containsLocation(e,t){if(this.startLine===this.endLine)return this.startLine===e&&this.startColumn<=t&&t<=this.endColumn;if(this.startLine===e)return this.startColumn<=t;if(this.endLine===e)return t<=this.endColumn;return this.startLine<e&&e<this.endLine}};TextUtils.SourceRange=class{constructor(e,t){this.offset=e;this.length=t}};TextUtils.SourceEdit=class{constructor(e,t,s){this.sourceURL=e;this.oldRange=t;this.newText=s}static comparator(e,t){return TextUtils.TextRange.comparator(e.oldRange,t.oldRange)}newRange(){return TextUtils.TextRange.fromEdit(this.oldRange,this.newText)}};self["Common"]=self["Common"]||{};Common.Worker=class{constructor(e){let t=e+".js";t+=Runtime.queryParamsString();this._workerPromise=new Promise(e=>{this._worker=new Worker(t);this._worker.onmessage=s.bind(this);function s(t){console.assert(t.data==="workerReady");this._worker.onmessage=null;e(this._worker);this._worker=null}})}postMessage(e){this._workerPromise.then(t=>{if(!this._disposed)t.postMessage(e)})}dispose(){this._disposed=true;this._workerPromise.then(e=>e.terminate())}terminate(){this.dispose()}set onmessage(e){this._workerPromise.then(t=>t.onmessage=e)}set onerror(e){this._workerPromise.then(t=>t.onerror=e)}};Common.TextDictionary=class{constructor(){this._words=new Map;this._index=new Common.Trie}addWord(e){let t=this._words.get(e)||0;++t;this._words.set(e,t);this._index.add(e)}removeWord(e){let t=this._words.get(e)||0;if(!t)return;if(t===1){this._words.delete(e);this._index.remove(e);return}--t;this._words.set(e,t)}wordsWithPrefix(e){return this._index.words(e)}hasWord(e){return this._words.has(e)}wordCount(e){return this._words.get(e)||0}reset(){this._words.clear();this._index.clear()}};Common.Object=class{constructor(){this._listeners}addEventListener(e,t,s){if(!t)console.assert(false);if(!this._listeners)this._listeners=new Map;if(!this._listeners.has(e))this._listeners.set(e,[]);this._listeners.get(e).push({thisObject:s,listener:t});return{eventTarget:this,eventType:e,thisObject:s,listener:t}}once(e){return new Promise(t=>{const s=this.addEventListener(e,n=>{this.removeEventListener(e,s.listener);t(n.data)})})}removeEventListener(e,t,s){console.assert(t);if(!this._listeners||!this._listeners.has(e))return;const n=this._listeners.get(e);for(let e=0;e<n.length;++e){if(n[e].listener===t&&n[e].thisObject===s){n[e].disposed=true;n.splice(e--,1)}}if(!n.length)this._listeners.delete(e)}hasEventListeners(e){return!!(this._listeners&&this._listeners.has(e))}dispatchEventToListeners(e,t){if(!this._listeners||!this._listeners.has(e))return;const s={data:t};const n=this._listeners.get(e).slice(0);for(let e=0;e<n.length;++e){if(!n[e].disposed)n[e].listener.call(n[e].thisObject,s)}}};Common.Event;Common.Object._listenerCallbackTuple;Common.EventTarget=function(){};Common.EventTarget.EventDescriptor;Common.EventTarget.removeEventListeners=function(e){for(const t of e)t.eventTarget.removeEventListener(t.eventType,t.listener,t.thisObject);e.splice(0)};Common.EventTarget.prototype={addEventListener(e,t,s){},once(e){},removeEventListener(e,t,s){},hasEventListeners(e){},dispatchEventToListeners(e,t){}};Common.Color=class{constructor(e,t,s){this._rgba=e;this._originalText=s||null;this._originalTextIsValid=!!this._originalText;this._format=t;if(typeof this._rgba[3]==="undefined")this._rgba[3]=1;for(let e=0;e<4;++e){if(this._rgba[e]<0){this._rgba[e]=0;this._originalTextIsValid=false}if(this._rgba[e]>1){this._rgba[e]=1;this._originalTextIsValid=false}}}static parse(e){const t=e.toLowerCase().replace(/\s+/g,"");const s=/^(?:#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})|(\w+))$/i;let n=t.match(s);if(n){if(n[1]){let t=n[1].toLowerCase();let s;if(t.length===3){s=Common.Color.Format.ShortHEX;t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)}else if(t.length===4){s=Common.Color.Format.ShortHEXA;t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)+t.charAt(3)+t.charAt(3)}else if(t.length===6){s=Common.Color.Format.HEX}else{s=Common.Color.Format.HEXA}const o=parseInt(t.substring(0,2),16);const i=parseInt(t.substring(2,4),16);const r=parseInt(t.substring(4,6),16);let a=1;if(t.length===8)a=parseInt(t.substring(6,8),16)/255;return new Common.Color([o/255,i/255,r/255,a],s,e)}if(n[2]){const t=n[2].toLowerCase();if(t in Common.Color.Nicknames){const s=Common.Color.Nicknames[t];const n=Common.Color.fromRGBA(s);n._format=Common.Color.Format.Nickname;n._originalText=e;return n}return null}return null}n=e.toLowerCase().match(/^\s*(?:(rgba?)|(hsla?))\((.*)\)\s*$/);if(n){const t=n[3].trim();let s=t.split(/\s*,\s*/);if(s.length===1){s=t.split(/\s+/);if(s[3]==="/"){s.splice(3,1);if(s.length!==4)return null}else if(s.length>2&&s[2].indexOf("/")!==-1||s.length>3&&s[3].indexOf("/")!==-1){const e=s.slice(2,4).join("");s=s.slice(0,2).concat(e.split(/\//)).concat(s.slice(4))}else if(s.length>=4){return null}}if(s.length!==3&&s.length!==4||s.indexOf("")>-1)return null;const o=s[3]!==undefined;if(n[1]){const t=[Common.Color._parseRgbNumeric(s[0]),Common.Color._parseRgbNumeric(s[1]),Common.Color._parseRgbNumeric(s[2]),o?Common.Color._parseAlphaNumeric(s[3]):1];if(t.indexOf(null)>-1)return null;return new Common.Color(t,o?Common.Color.Format.RGBA:Common.Color.Format.RGB,e)}if(n[2]){const t=[Common.Color._parseHueNumeric(s[0]),Common.Color._parseSatLightNumeric(s[1]),Common.Color._parseSatLightNumeric(s[2]),o?Common.Color._parseAlphaNumeric(s[3]):1];if(t.indexOf(null)>-1)return null;const n=[];Common.Color.hsl2rgb(t,n);return new Common.Color(n,o?Common.Color.Format.HSLA:Common.Color.Format.HSL,e)}}return null}static fromRGBA(e){return new Common.Color([e[0]/255,e[1]/255,e[2]/255,e[3]],Common.Color.Format.RGBA)}static fromHSVA(e){const t=[];Common.Color.hsva2rgba(e,t);return new Common.Color(t,Common.Color.Format.HSLA)}static _parsePercentOrNumber(e){if(isNaN(e.replace("%","")))return null;const t=parseFloat(e);if(e.indexOf("%")!==-1){if(e.indexOf("%")!==e.length-1)return null;return t/100}return t}static _parseRgbNumeric(e){const t=Common.Color._parsePercentOrNumber(e);if(t===null)return null;if(e.indexOf("%")!==-1)return t;return t/255}static _parseHueNumeric(e){const t=e.replace(/(deg|g?rad|turn)$/,"");if(isNaN(t)||e.match(/\s+(deg|g?rad|turn)/))return null;const s=parseFloat(t);if(e.indexOf("turn")!==-1)return s%1;else if(e.indexOf("grad")!==-1)return s/400%1;else if(e.indexOf("rad")!==-1)return s/(2*Math.PI)%1;return s/360%1}static _parseSatLightNumeric(e){if(e.indexOf("%")!==e.length-1||isNaN(e.replace("%","")))return null;const t=parseFloat(e);return Math.min(1,t/100)}static _parseAlphaNumeric(e){return Common.Color._parsePercentOrNumber(e)}static _hsva2hsla(e,t){const s=e[0];let n=e[1];const o=e[2];const i=(2-n)*o;if(o===0||n===0)n=0;else n*=o/(i<1?i:2-i);t[0]=s;t[1]=n;t[2]=i/2;t[3]=e[3]}static hsl2rgb(e,t){const s=e[0];let n=e[1];const o=e[2];function i(e,t,s){if(s<0)s+=1;else if(s>1)s-=1;if(s*6<1)return e+(t-e)*s*6;else if(s*2<1)return t;else if(s*3<2)return e+(t-e)*(2/3-s)*6;else return e}if(n<0)n=0;let r;if(o<=.5)r=o*(1+n);else r=o+n-o*n;const a=2*o-r;const l=s+1/3;const h=s;const c=s-1/3;t[0]=i(a,r,l);t[1]=i(a,r,h);t[2]=i(a,r,c);t[3]=e[3]}static hsva2rgba(e,t){Common.Color._hsva2hsla(e,Common.Color.hsva2rgba._tmpHSLA);Common.Color.hsl2rgb(Common.Color.hsva2rgba._tmpHSLA,t);for(let e=0;e<Common.Color.hsva2rgba._tmpHSLA.length;e++)Common.Color.hsva2rgba._tmpHSLA[e]=0}static luminance(e){const t=e[0];const s=e[1];const n=e[2];const o=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4);const i=s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4);const r=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4);return.2126*o+.7152*i+.0722*r}static blendColors(e,t,s){const n=e[3];s[0]=(1-n)*t[0]+n*e[0];s[1]=(1-n)*t[1]+n*e[1];s[2]=(1-n)*t[2]+n*e[2];s[3]=n+t[3]*(1-n)}static calculateContrastRatio(e,t){Common.Color.blendColors(e,t,Common.Color.calculateContrastRatio._blendedFg);const s=Common.Color.luminance(Common.Color.calculateContrastRatio._blendedFg);const n=Common.Color.luminance(t);const o=(Math.max(s,n)+.05)/(Math.min(s,n)+.05);for(let e=0;e<Common.Color.calculateContrastRatio._blendedFg.length;e++)Common.Color.calculateContrastRatio._blendedFg[e]=0;return o}static desiredLuminance(e,t,s){function n(){if(s)return(e+.05)*t-.05;else return(e+.05)/t-.05}let o=n();if(o<0||o>1){s=!s;o=n()}return o}static detectColorFormat(e){const t=Common.Color.Format;let s;const n=Common.moduleSetting("colorFormat").get();if(n===t.Original)s=t.Original;else if(n===t.RGB)s=e.hasAlpha()?t.RGBA:t.RGB;else if(n===t.HSL)s=e.hasAlpha()?t.HSLA:t.HSL;else if(n===t.HEX)s=e.detectHEXFormat();else s=t.RGBA;return s}format(){return this._format}hsla(){if(this._hsla)return this._hsla;const e=this._rgba[0];const t=this._rgba[1];const s=this._rgba[2];const n=Math.max(e,t,s);const o=Math.min(e,t,s);const i=n-o;const r=n+o;let a;if(o===n)a=0;else if(e===n)a=(1/6*(t-s)/i+1)%1;else if(t===n)a=1/6*(s-e)/i+1/3;else a=1/6*(e-t)/i+2/3;const l=.5*r;let h;if(l===0)h=0;else if(l===1)h=0;else if(l<=.5)h=i/r;else h=i/(2-r);this._hsla=[a,h,l,this._rgba[3]];return this._hsla}canonicalHSLA(){const e=this.hsla();return[Math.round(e[0]*360),Math.round(e[1]*100),Math.round(e[2]*100),e[3]]}hsva(){const e=this.hsla();const t=e[0];let s=e[1];const n=e[2];s*=n<.5?n:1-n;return[t,s!==0?2*s/(n+s):0,n+s,e[3]]}hasAlpha(){return this._rgba[3]!==1}detectHEXFormat(){let e=true;for(let t=0;t<4;++t){const s=Math.round(this._rgba[t]*255);if(s%17){e=false;break}}const t=this.hasAlpha();const s=Common.Color.Format;if(e)return t?s.ShortHEXA:s.ShortHEX;return t?s.HEXA:s.HEX}asString(e){if(e===this._format&&this._originalTextIsValid)return this._originalText;if(!e)e=this._format;function t(e){return Math.round(e*255)}function s(e){const t=Math.round(e*255).toString(16);return t.length===1?"0"+t:t}function n(e){return(Math.round(e*255)/17).toString(16)}switch(e){case Common.Color.Format.Original:return this._originalText;case Common.Color.Format.RGB:if(this.hasAlpha())return null;return String.sprintf("rgb(%d, %d, %d)",t(this._rgba[0]),t(this._rgba[1]),t(this._rgba[2]));case Common.Color.Format.RGBA:return String.sprintf("rgba(%d, %d, %d, %f)",t(this._rgba[0]),t(this._rgba[1]),t(this._rgba[2]),this._rgba[3]);case Common.Color.Format.HSL:if(this.hasAlpha())return null;const o=this.hsla();return String.sprintf("hsl(%d, %d%, %d%)",Math.round(o[0]*360),Math.round(o[1]*100),Math.round(o[2]*100));case Common.Color.Format.HSLA:const i=this.hsla();return String.sprintf("hsla(%d, %d%, %d%, %f)",Math.round(i[0]*360),Math.round(i[1]*100),Math.round(i[2]*100),i[3]);case Common.Color.Format.HEXA:return String.sprintf("#%s%s%s%s",s(this._rgba[0]),s(this._rgba[1]),s(this._rgba[2]),s(this._rgba[3])).toLowerCase();case Common.Color.Format.HEX:if(this.hasAlpha())return null;return String.sprintf("#%s%s%s",s(this._rgba[0]),s(this._rgba[1]),s(this._rgba[2])).toLowerCase();case Common.Color.Format.ShortHEXA:const r=this.detectHEXFormat();if(r!==Common.Color.Format.ShortHEXA&&r!==Common.Color.Format.ShortHEX)return null;return String.sprintf("#%s%s%s%s",n(this._rgba[0]),n(this._rgba[1]),n(this._rgba[2]),n(this._rgba[3])).toLowerCase();case Common.Color.Format.ShortHEX:if(this.hasAlpha())return null;if(this.detectHEXFormat()!==Common.Color.Format.ShortHEX)return null;return String.sprintf("#%s%s%s",n(this._rgba[0]),n(this._rgba[1]),n(this._rgba[2])).toLowerCase();case Common.Color.Format.Nickname:return this.nickname()}return this._originalText}rgba(){return this._rgba.slice()}canonicalRGBA(){const e=new Array(4);for(let t=0;t<3;++t)e[t]=Math.round(this._rgba[t]*255);e[3]=this._rgba[3];return e}nickname(){if(!Common.Color._rgbaToNickname){Common.Color._rgbaToNickname={};for(const e in Common.Color.Nicknames){let t=Common.Color.Nicknames[e];if(t.length!==4)t=t.concat(1);Common.Color._rgbaToNickname[t]=e}}return Common.Color._rgbaToNickname[this.canonicalRGBA()]||null}toProtocolRGBA(){const e=this.canonicalRGBA();const t={r:e[0],g:e[1],b:e[2]};if(e[3]!==1)t.a=e[3];return t}invert(){const e=[];e[0]=1-this._rgba[0];e[1]=1-this._rgba[1];e[2]=1-this._rgba[2];e[3]=this._rgba[3];return new Common.Color(e,Common.Color.Format.RGBA)}setAlpha(e){const t=this._rgba.slice();t[3]=e;return new Common.Color(t,Common.Color.Format.RGBA)}blendWith(e){const t=[];Common.Color.blendColors(e._rgba,this._rgba,t);return new Common.Color(t,Common.Color.Format.RGBA)}};Common.Color.Regex=/((?:rgb|hsl)a?\([^)]+\)|#[0-9a-fA-F]{8}|#[0-9a-fA-F]{6}|#[0-9a-fA-F]{3,4}|\b[a-zA-Z]+\b(?!-))/g;Common.Color.Format={Original:"original",Nickname:"nickname",HEX:"hex",ShortHEX:"shorthex",HEXA:"hexa",ShortHEXA:"shorthexa",RGB:"rgb",RGBA:"rgba",HSL:"hsl",HSLA:"hsla"};Common.Color.hsva2rgba._tmpHSLA=[0,0,0,0];Common.Color.calculateContrastRatio._blendedFg=[0,0,0,0];Common.Color.Nicknames={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[237,20,61],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgreen:[144,238,144],lightgray:[211,211,211],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]};Common.Color.PageHighlight={Content:Common.Color.fromRGBA([111,168,220,.66]),ContentLight:Common.Color.fromRGBA([111,168,220,.5]),ContentOutline:Common.Color.fromRGBA([9,83,148]),Padding:Common.Color.fromRGBA([147,196,125,.55]),PaddingLight:Common.Color.fromRGBA([147,196,125,.4]),Border:Common.Color.fromRGBA([255,229,153,.66]),BorderLight:Common.Color.fromRGBA([255,229,153,.5]),Margin:Common.Color.fromRGBA([246,178,107,.66]),MarginLight:Common.Color.fromRGBA([246,178,107,.5]),EventTarget:Common.Color.fromRGBA([255,196,196,.66]),Shape:Common.Color.fromRGBA([96,82,177,.8]),ShapeMargin:Common.Color.fromRGBA([96,82,127,.6]),CssGrid:Common.Color.fromRGBA([75,0,130,1])};Common.Color.Generator=class{constructor(e,t,s,n){this._hueSpace=e||{min:0,max:360};this._satSpace=t||67;this._lightnessSpace=s||80;this._alphaSpace=n||1;this._colors=new Map}setColorForID(e,t){this._colors.set(e,t)}colorForID(e){let t=this._colors.get(e);if(!t){t=this._generateColorForID(e);this._colors.set(e,t)}return t}_generateColorForID(e){const t=String.hashCode(e);const s=this._indexToValueInSpace(t,this._hueSpace);const n=this._indexToValueInSpace(t>>8,this._satSpace);const o=this._indexToValueInSpace(t>>16,this._lightnessSpace);const i=this._indexToValueInSpace(t>>24,this._alphaSpace);return`hsla(${s}, ${n}%, ${o}%, ${i})`}_indexToValueInSpace(e,t){if(typeof t==="number")return t;const s=t.count||t.max-t.min;e%=s;return t.min+Math.floor(e/(s-1)*(t.max-t.min))}};Common.Console=class extends Common.Object{constructor(){super();this._messages=[]}addMessage(e,t,s){const n=new Common.Console.Message(e,t||Common.Console.MessageLevel.Info,Date.now(),s||false);this._messages.push(n);this.dispatchEventToListeners(Common.Console.Events.MessageAdded,n)}log(e){this.addMessage(e,Common.Console.MessageLevel.Info)}warn(e){this.addMessage(e,Common.Console.MessageLevel.Warning)}error(e){this.addMessage(e,Common.Console.MessageLevel.Error,true)}messages(){return this._messages}show(){this.showPromise()}showPromise(){return Common.Revealer.reveal(this)}};Common.Console.Events={MessageAdded:Symbol("messageAdded")};Common.Console.MessageLevel={Info:"info",Warning:"warning",Error:"error"};Common.Console.Message=class{constructor(e,t,s,n){this.text=e;this.level=t;this.timestamp=typeof s==="number"?s:Date.now();this.show=n}};Common.console=new Common.Console;Common.ContentProvider=function(){};Common.ContentProvider.prototype={contentURL(){},contentType(){},contentEncoded(){},requestContent(){},searchInContent(e,t,s){}};Common.ContentProvider.SearchMatch=class{constructor(e,t){this.lineNumber=e;this.lineContent=t}};Common.ContentProvider.performSearchInContent=function(e,t,s,n){const o=createSearchRegex(t,s,n);const i=new TextUtils.Text(e);const r=[];for(let e=0;e<i.lineCount();++e){const t=i.lineAt(e);o.lastIndex=0;if(o.exec(t))r.push(new Common.ContentProvider.SearchMatch(e,t))}return r};Common.ContentProvider.contentAsDataURL=function(e,t,s,n){const o=1024*1024;if(e===null||e.length>o)return null;return"data:"+t+(n?";charset="+n:"")+(s?";base64":"")+","+e};Common.ParsedURL=class{constructor(e){this.isValid=false;this.url=e;this.scheme="";this.user="";this.host="";this.port="";this.path="";this.queryParams="";this.fragment="";this.folderPathComponents="";this.lastPathComponent="";const t=this.url.startsWith("blob:");const s=t?e.substring(5):e;const n=s.match(Common.ParsedURL._urlRegex());if(n){this.isValid=true;if(t){this._blobInnerScheme=n[2].toLowerCase();this.scheme="blob"}else{this.scheme=n[2].toLowerCase()}this.user=n[3];this.host=n[4];this.port=n[5];this.path=n[6]||"/";this.queryParams=n[7]||"";this.fragment=n[8]}else{if(this.url.startsWith("data:")){this.scheme="data";return}if(this.url.startsWith("blob:")){this.scheme="blob";return}if(this.url==="about:blank"){this.scheme="about";return}this.path=this.url}const o=this.path.lastIndexOf("/");if(o!==-1){this.folderPathComponents=this.path.substring(0,o);this.lastPathComponent=this.path.substring(o+1)}else{this.lastPathComponent=this.path}}static platformPathToURL(e){e=e.replace(/\\/g,"/");if(!e.startsWith("file://")){if(e.startsWith("/"))e="file://"+e;else e="file:///"+e}return e}static urlToPlatformPath(e,t){console.assert(e.startsWith("file://"),"This must be a file URL.");if(t)return e.substr("file:///".length).replace(/\//g,"\\");return e.substr("file://".length)}static urlWithoutHash(e){const t=e.indexOf("#");if(t!==-1)return e.substr(0,t);return e}static _urlRegex(){if(Common.ParsedURL._urlRegexInstance)return Common.ParsedURL._urlRegexInstance;const e=/([A-Za-z][A-Za-z0-9+.-]*):\/\//;const t=/(?:([A-Za-z0-9\-._~%!$&'()*+,;=:]*)@)?/;const s=/((?:\[::\d?\])|(?:[^\s\/:]*))/;const n=/(?::([\d]+))?/;const o=/(\/[^#?]*)?/;const i=/(?:\?([^#]*))?/;const r=/(?:#(.*))?/;Common.ParsedURL._urlRegexInstance=new RegExp("^("+e.source+t.source+s.source+n.source+")"+o.source+i.source+r.source+"$");return Common.ParsedURL._urlRegexInstance}static extractPath(e){const t=e.asParsedURL();return t?t.path:""}static extractOrigin(e){const t=e.asParsedURL();return t?t.securityOrigin():""}static extractExtension(e){e=Common.ParsedURL.urlWithoutHash(e);const t=e.indexOf("?");if(t!==-1)e=e.substr(0,t);const s=e.lastIndexOf("/");if(s!==-1)e=e.substr(s+1);const n=e.lastIndexOf(".");if(n!==-1){e=e.substr(n+1);const t=e.indexOf("%");if(t!==-1)return e.substr(0,t);return e}return""}static extractName(e){let t=e.lastIndexOf("/");const s=t!==-1?e.substr(t+1):e;t=s.indexOf("?");return t<0?s:s.substr(0,t)}static completeURL(e,t){const s=t.trim();if(s.startsWith("data:")||s.startsWith("blob:")||s.startsWith("javascript:")||s.startsWith("mailto:"))return t;const n=s.asParsedURL();if(n&&n.scheme)return s;const o=e.asParsedURL();if(!o)return null;if(o.isDataURL())return t;if(t.length>1&&t.charAt(0)==="/"&&t.charAt(1)==="/"){return o.scheme+":"+t}const i=o.securityOrigin();const r=o.path;const a=o.queryParams?"?"+o.queryParams:"";if(!t.length)return i+r+a;if(t.charAt(0)==="#")return i+r+a+t;if(t.charAt(0)==="?")return i+r+t;let l=t.match(/^[^#?]*/)[0];const h=t.substring(l.length);if(l.charAt(0)!=="/")l=o.folderPathComponents+"/"+l;return i+Runtime.normalizePath(l)+h}static splitLineAndColumn(e){const t=e.match(Common.ParsedURL._urlRegex());let s="";let n=e;if(t){s=t[1];n=e.substring(t[1].length)}const o=/(?::(\d+))?(?::(\d+))?$/;const i=o.exec(n);let r;let a;console.assert(i);if(typeof i[1]==="string"){r=parseInt(i[1],10);r=isNaN(r)?undefined:r-1}if(typeof i[2]==="string"){a=parseInt(i[2],10);a=isNaN(a)?undefined:a-1}return{url:s+n.substring(0,n.length-i[0].length),lineNumber:r,columnNumber:a}}static isRelativeURL(e){return!/^[A-Za-z][A-Za-z0-9+.-]*:/.test(e)}get displayName(){if(this._displayName)return this._displayName;if(this.isDataURL())return this.dataURLDisplayName();if(this.isBlobURL())return this.url;if(this.isAboutBlank())return this.url;this._displayName=this.lastPathComponent;if(!this._displayName)this._displayName=(this.host||"")+"/";if(this._displayName==="/")this._displayName=this.url;return this._displayName}dataURLDisplayName(){if(this._dataURLDisplayName)return this._dataURLDisplayName;if(!this.isDataURL())return"";this._dataURLDisplayName=this.url.trimEnd(20);return this._dataURLDisplayName}isAboutBlank(){return this.url==="about:blank"}isDataURL(){return this.scheme==="data"}isBlobURL(){return this.url.startsWith("blob:")}lastPathComponentWithFragment(){return this.lastPathComponent+(this.fragment?"#"+this.fragment:"")}domain(){if(this.isDataURL())return"data:";return this.host+(this.port?":"+this.port:"")}securityOrigin(){if(this.isDataURL())return"data:";const e=this.isBlobURL()?this._blobInnerScheme:this.scheme;return e+"://"+this.domain()}urlWithoutScheme(){if(this.scheme&&this.url.startsWith(this.scheme+"://"))return this.url.substring(this.scheme.length+3);return this.url}};String.prototype.asParsedURL=function(){const e=new Common.ParsedURL(this.toString());if(e.isValid)return e;return null};Common.Progress=function(){};Common.Progress.prototype={setTotalWork(e){},setTitle(e){},setWorked(e,t){},worked(e){},done(){},isCanceled(){return false}};Common.CompositeProgress=class{constructor(e){this._parent=e;this._children=[];this._childrenDone=0;this._parent.setTotalWork(1);this._parent.setWorked(0)}_childDone(){if(++this._childrenDone!==this._children.length)return;this._parent.done()}createSubProgress(e){const t=new Common.SubProgress(this,e);this._children.push(t);return t}_update(){let e=0;let t=0;for(let s=0;s<this._children.length;++s){const n=this._children[s];if(n._totalWork)t+=n._weight*n._worked/n._totalWork;e+=n._weight}this._parent.setWorked(t/e)}};Common.SubProgress=class{constructor(e,t){this._composite=e;this._weight=t||1;this._worked=0}isCanceled(){return this._composite._parent.isCanceled()}setTitle(e){this._composite._parent.setTitle(e)}done(){this.setWorked(this._totalWork);this._composite._childDone()}setTotalWork(e){this._totalWork=e;this._composite._update()}setWorked(e,t){this._worked=e;if(typeof t!=="undefined")this.setTitle(t);this._composite._update()}worked(e){this.setWorked(this._worked+(e||1))}};Common.ProgressProxy=class{constructor(e,t){this._delegate=e;this._doneCallback=t}isCanceled(){return this._delegate?this._delegate.isCanceled():false}setTitle(e){if(this._delegate)this._delegate.setTitle(e)}done(){if(this._delegate)this._delegate.done();if(this._doneCallback)this._doneCallback()}setTotalWork(e){if(this._delegate)this._delegate.setTotalWork(e)}setWorked(e,t){if(this._delegate)this._delegate.setWorked(e,t)}worked(e){if(this._delegate)this._delegate.worked(e)}};Common.ResourceType=class{constructor(e,t,s,n){this._name=e;this._title=t;this._category=s;this._isTextType=n}static fromMimeType(e){if(e.startsWith("text/html"))return Common.resourceTypes.Document;if(e.startsWith("text/css"))return Common.resourceTypes.Stylesheet;if(e.startsWith("image/"))return Common.resourceTypes.Image;if(e.startsWith("text/"))return Common.resourceTypes.Script;if(e.includes("font"))return Common.resourceTypes.Font;if(e.includes("script"))return Common.resourceTypes.Script;if(e.includes("octet"))return Common.resourceTypes.Other;if(e.includes("application"))return Common.resourceTypes.Script;return Common.resourceTypes.Other}static fromURL(e){return Common.ResourceType._resourceTypeByExtension.get(Common.ParsedURL.extractExtension(e))||null}static fromName(e){for(const t in Common.resourceTypes){const s=Common.resourceTypes[t];if(s.name()===e)return s}return null}static mimeFromURL(e){const t=Common.ParsedURL.extractName(e);if(Common.ResourceType._mimeTypeByName.has(t))return Common.ResourceType._mimeTypeByName.get(t);const s=Common.ParsedURL.extractExtension(e).toLowerCase();return Common.ResourceType._mimeTypeByExtension.get(s)}static mimeFromExtension(e){return Common.ResourceType._mimeTypeByExtension.get(e)}name(){return this._name}title(){return this._title}category(){return this._category}isTextType(){return this._isTextType}isScript(){return this._name==="script"||this._name==="sm-script"}hasScripts(){return this.isScript()||this.isDocument()}isStyleSheet(){return this._name==="stylesheet"||this._name==="sm-stylesheet"}isDocument(){return this._name==="document"}isDocumentOrScriptOrStyleSheet(){return this.isDocument()||this.isScript()||this.isStyleSheet()}isFromSourceMap(){return this._name.startsWith("sm-")}toString(){return this._name}canonicalMimeType(){if(this.isDocument())return"text/html";if(this.isScript())return"text/javascript";if(this.isStyleSheet())return"text/css";return""}};Common.ResourceCategory=class{constructor(e,t){this.title=e;this.shortTitle=t}};Common.resourceCategories={XHR:new Common.ResourceCategory("XHR and Fetch","XHR"),Script:new Common.ResourceCategory("Scripts","JS"),Stylesheet:new Common.ResourceCategory("Stylesheets","CSS"),Image:new Common.ResourceCategory("Images","Img"),Media:new Common.ResourceCategory("Media","Media"),Font:new Common.ResourceCategory("Fonts","Font"),Document:new Common.ResourceCategory("Documents","Doc"),WebSocket:new Common.ResourceCategory("WebSockets","WS"),Manifest:new Common.ResourceCategory("Manifest","Manifest"),Other:new Common.ResourceCategory("Other","Other")};Common.resourceTypes={XHR:new Common.ResourceType("xhr","XHR",Common.resourceCategories.XHR,true),Fetch:new Common.ResourceType("fetch","Fetch",Common.resourceCategories.XHR,true),EventSource:new Common.ResourceType("eventsource","EventSource",Common.resourceCategories.XHR,true),Script:new Common.ResourceType("script","Script",Common.resourceCategories.Script,true),Stylesheet:new Common.ResourceType("stylesheet","Stylesheet",Common.resourceCategories.Stylesheet,true),Image:new Common.ResourceType("image","Image",Common.resourceCategories.Image,false),Media:new Common.ResourceType("media","Media",Common.resourceCategories.Media,false),Font:new Common.ResourceType("font","Font",Common.resourceCategories.Font,false),Document:new Common.ResourceType("document","Document",Common.resourceCategories.Document,true),TextTrack:new Common.ResourceType("texttrack","TextTrack",Common.resourceCategories.Other,true),WebSocket:new Common.ResourceType("websocket","WebSocket",Common.resourceCategories.WebSocket,false),Other:new Common.ResourceType("other","Other",Common.resourceCategories.Other,false),SourceMapScript:new Common.ResourceType("sm-script","Script",Common.resourceCategories.Script,true),SourceMapStyleSheet:new Common.ResourceType("sm-stylesheet","Stylesheet",Common.resourceCategories.Stylesheet,true),Manifest:new Common.ResourceType("manifest","Manifest",Common.resourceCategories.Manifest,true),SignedExchange:new Common.ResourceType("signed-exchange","SignedExchange",Common.resourceCategories.Other,false)};Common.ResourceType._mimeTypeByName=new Map([["Cakefile","text/x-coffeescript"]]);Common.ResourceType._resourceTypeByExtension=new Map([["js",Common.resourceTypes.Script],["mjs",Common.resourceTypes.Script],["css",Common.resourceTypes.Stylesheet],["xsl",Common.resourceTypes.Stylesheet],["jpeg",Common.resourceTypes.Image],["jpg",Common.resourceTypes.Image],["svg",Common.resourceTypes.Image],["gif",Common.resourceTypes.Image],["png",Common.resourceTypes.Image],["ico",Common.resourceTypes.Image],["tiff",Common.resourceTypes.Image],["tif",Common.resourceTypes.Image],["bmp",Common.resourceTypes.Image],["webp",Common.resourceTypes.Media],["ttf",Common.resourceTypes.Font],["otf",Common.resourceTypes.Font],["ttc",Common.resourceTypes.Font],["woff",Common.resourceTypes.Font]]);Common.ResourceType._mimeTypeByExtension=new Map([["js","text/javascript"],["mjs","text/javascript"],["css","text/css"],["html","text/html"],["htm","text/html"],["xml","application/xml"],["xsl","application/xml"],["asp","application/x-aspx"],["aspx","application/x-aspx"],["jsp","application/x-jsp"],["c","text/x-c++src"],["cc","text/x-c++src"],["cpp","text/x-c++src"],["h","text/x-c++src"],["m","text/x-c++src"],["mm","text/x-c++src"],["coffee","text/x-coffeescript"],["dart","text/javascript"],["ts","text/typescript"],["tsx","text/typescript-jsx"],["json","application/json"],["gyp","application/json"],["gypi","application/json"],["cs","text/x-csharp"],["java","text/x-java"],["less","text/x-less"],["php","text/x-php"],["phtml","application/x-httpd-php"],["py","text/x-python"],["sh","text/x-sh"],["scss","text/x-scss"],["vtt","text/vtt"],["ls","text/x-livescript"],["md","text/markdown"],["cljs","text/x-clojure"],["cljc","text/x-clojure"],["cljx","text/x-clojure"],["styl","text/x-styl"],["jsx","text/jsx"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["svg","image/svg+xml"],["gif","image/gif"],["webp","image/webp"],["png","image/png"],["ico","image/ico"],["tiff","image/tiff"],["tif","image/tif"],["bmp","image/bmp"],["ttf","font/opentype"],["otf","font/opentype"],["ttc","font/opentype"],["woff","application/font-woff"]]);Common.Settings=class{constructor(e,t){this._globalStorage=e;this._localStorage=t;this._sessionStorage=new Common.SettingsStorage({});this._eventSupport=new Common.Object;this._registry=new Map;this._moduleSettings=new Map;self.runtime.extensions("setting").forEach(this._registerModuleSetting.bind(this))}_registerModuleSetting(e){const t=e.descriptor();const s=t["settingName"];const n=t["settingType"]==="regex";const o=t["defaultValue"];let i;switch(t["storageType"]){case"local":i=Common.SettingStorageType.Local;break;case"session":i=Common.SettingStorageType.Session;break;case"global":i=Common.SettingStorageType.Global;break;default:i=Common.SettingStorageType.Global}const r=n?this.createRegExpSetting(s,o,undefined,i):this.createSetting(s,o,i);if(t["title"])r.setTitle(t["title"]);if(t["userActionCondition"])r.setRequiresUserAction(!!Runtime.queryParam(t["userActionCondition"]));r._extension=e;this._moduleSettings.set(s,r)}moduleSetting(e){const t=this._moduleSettings.get(e);if(!t)throw new Error("No setting registered: "+e);return t}settingForTest(e){const t=this._registry.get(e);if(!t)throw new Error("No setting registered: "+e);return t}createSetting(e,t,s){const n=this._storageFromType(s);if(!this._registry.get(e))this._registry.set(e,new Common.Setting(this,e,t,this._eventSupport,n));return this._registry.get(e)}createLocalSetting(e,t){return this.createSetting(e,t,Common.SettingStorageType.Local)}createRegExpSetting(e,t,s,n){if(!this._registry.get(e)){this._registry.set(e,new Common.RegExpSetting(this,e,t,this._eventSupport,this._storageFromType(n),s))}return this._registry.get(e)}clearAll(){this._globalStorage.removeAll();this._localStorage.removeAll();const e=Common.settings.createSetting(Common.VersionController._currentVersionName,0);e.set(Common.VersionController.currentVersion)}_storageFromType(e){switch(e){case Common.SettingStorageType.Local:return this._localStorage;case Common.SettingStorageType.Session:return this._sessionStorage;case Common.SettingStorageType.Global:return this._globalStorage}return this._globalStorage}};Common.SettingsStorage=class{constructor(e,t,s,n,o){this._object=e;this._setCallback=t||function(){};this._removeCallback=s||function(){};this._removeAllCallback=n||function(){};this._storagePrefix=o||""}set(e,t){e=this._storagePrefix+e;this._object[e]=t;this._setCallback(e,t)}has(e){e=this._storagePrefix+e;return e in this._object}get(e){e=this._storagePrefix+e;return this._object[e]}remove(e){e=this._storagePrefix+e;delete this._object[e];this._removeCallback(e)}removeAll(){this._object={};this._removeAllCallback()}_dumpSizes(){Common.console.log("Ten largest settings: ");const e={__proto__:null};for(const t in this._object)e[t]=this._object[t].length;const t=Object.keys(e);function s(t,s){return e[s]-e[t]}t.sort(s);for(let s=0;s<10&&s<t.length;++s)Common.console.log("Setting: '"+t[s]+"', size: "+e[t[s]])}};Common.Setting=class{constructor(e,t,s,n,o){this._settings=e;this._name=t;this._defaultValue=s;this._eventSupport=n;this._storage=o;this._title="";this._extension=null}addChangeListener(e,t){return this._eventSupport.addEventListener(this._name,e,t)}removeChangeListener(e,t){this._eventSupport.removeEventListener(this._name,e,t)}get name(){return this._name}title(){return this._title}setTitle(e){this._title=e}setRequiresUserAction(e){this._requiresUserAction=e}get(){if(this._requiresUserAction&&!this._hadUserAction)return this._defaultValue;if(typeof this._value!=="undefined")return this._value;this._value=this._defaultValue;if(this._storage.has(this._name)){try{this._value=JSON.parse(this._storage.get(this._name))}catch(e){this._storage.remove(this._name)}}return this._value}set(e){this._hadUserAction=true;this._value=e;try{const t=JSON.stringify(e);try{this._storage.set(this._name,t)}catch(e){this._printSettingsSavingError(e.message,this._name,t)}}catch(e){Common.console.error("Cannot stringify setting with name: "+this._name+", error: "+e.message)}this._eventSupport.dispatchEventToListeners(this._name,e)}remove(){this._settings._registry.delete(this._name);this._settings._moduleSettings.delete(this._name);this._storage.remove(this._name)}extension(){return this._extension}_printSettingsSavingError(e,t,s){const n="Error saving setting with name: "+this._name+", value length: "+s.length+". Error: "+e;console.error(n);Common.console.error(n);this._storage._dumpSizes()}};Common.RegExpSetting=class extends Common.Setting{constructor(e,t,s,n,o,i){super(e,t,s?[{pattern:s}]:[],n,o);this._regexFlags=i}get(){const e=[];const t=this.getAsArray();for(let s=0;s<t.length;++s){const n=t[s];if(n.pattern&&!n.disabled)e.push(n.pattern)}return e.join("|")}getAsArray(){return super.get()}set(e){this.setAsArray([{pattern:e}])}setAsArray(e){delete this._regex;super.set(e)}asRegExp(){if(typeof this._regex!=="undefined")return this._regex;this._regex=null;try{const e=this.get();if(e)this._regex=new RegExp(e,this._regexFlags||"")}catch(e){}return this._regex}};Common.VersionController=class{updateVersion(){const e=window.localStorage?window.localStorage[Common.VersionController._currentVersionName]:0;const t=Common.settings.createSetting(Common.VersionController._currentVersionName,0);const s=Common.VersionController.currentVersion;const n=t.get()||parseInt(e||"0",10);if(n===0){t.set(s);return}const o=this._methodsToRunToUpdateVersion(n,s);for(let e=0;e<o.length;++e)this[o[e]].call(this);t.set(s)}_methodsToRunToUpdateVersion(e,t){const s=[];for(let n=e;n<t;++n)s.push("_updateVersionFrom"+n+"To"+(n+1));return s}_updateVersionFrom0To1(){this._clearBreakpointsWhenTooMany(Common.settings.createLocalSetting("breakpoints",[]),5e5)}_updateVersionFrom1To2(){Common.settings.createSetting("previouslyViewedFiles",[]).set([])}_updateVersionFrom2To3(){Common.settings.createSetting("fileSystemMapping",{}).set({});Common.settings.createSetting("fileMappingEntries",[]).remove()}_updateVersionFrom3To4(){const e=Common.settings.createSetting("showHeaSnapshotObjectsHiddenProperties",false);Common.moduleSetting("showAdvancedHeapSnapshotProperties").set(e.get());e.remove()}_updateVersionFrom4To5(){const e={FileSystemViewSidebarWidth:"fileSystemViewSplitViewState",elementsSidebarWidth:"elementsPanelSplitViewState",StylesPaneSplitRatio:"stylesPaneSplitViewState",heapSnapshotRetainersViewSize:"heapSnapshotSplitViewState","InspectorView.splitView":"InspectorView.splitViewState","InspectorView.screencastSplitView":"InspectorView.screencastSplitViewState","Inspector.drawerSplitView":"Inspector.drawerSplitViewState",layerDetailsSplitView:"layerDetailsSplitViewState",networkSidebarWidth:"networkPanelSplitViewState",sourcesSidebarWidth:"sourcesPanelSplitViewState",scriptsPanelNavigatorSidebarWidth:"sourcesPanelNavigatorSplitViewState",sourcesPanelSplitSidebarRatio:"sourcesPanelDebuggerSidebarSplitViewState","timeline-details":"timelinePanelDetailsSplitViewState","timeline-split":"timelinePanelRecorsSplitViewState","timeline-view":"timelinePanelTimelineStackSplitViewState",auditsSidebarWidth:"auditsPanelSplitViewState",layersSidebarWidth:"layersPanelSplitViewState",profilesSidebarWidth:"profilesPanelSplitViewState",resourcesSidebarWidth:"resourcesPanelSplitViewState"};const t={};for(const s in e){const n=e[s];const o=s+"H";let i=null;const r=Common.settings.createSetting(s,t);if(r.get()!==t){i=i||{};i.vertical={};i.vertical.size=r.get();r.remove()}const a=Common.settings.createSetting(o,t);if(a.get()!==t){i=i||{};i.horizontal={};i.horizontal.size=a.get();a.remove()}if(i)Common.settings.createSetting(n,{}).set(i)}}_updateVersionFrom5To6(){const e={debuggerSidebarHidden:"sourcesPanelSplitViewState",navigatorHidden:"sourcesPanelNavigatorSplitViewState","WebInspector.Drawer.showOnLoad":"Inspector.drawerSplitViewState"};for(const t in e){const s=Common.settings.createSetting(t,null);if(s.get()===null){s.remove();continue}const n=e[t];const o=t==="WebInspector.Drawer.showOnLoad";const i=s.get()!==o;s.remove();const r=i?"OnlyMain":"Both";const a=Common.settings.createSetting(n,{});const l=a.get()||{};l.vertical=l.vertical||{};l.vertical.showMode=r;l.horizontal=l.horizontal||{};l.horizontal.showMode=r;a.set(l)}}_updateVersionFrom6To7(){const e={sourcesPanelNavigatorSplitViewState:"sourcesPanelNavigatorSplitViewState",elementsPanelSplitViewState:"elementsPanelSplitViewState",stylesPaneSplitViewState:"stylesPaneSplitViewState",sourcesPanelDebuggerSidebarSplitViewState:"sourcesPanelDebuggerSidebarSplitViewState"};const t={};for(const s in e){const e=Common.settings.createSetting(s,t);const n=e.get();if(n===t)continue;if(n.vertical&&n.vertical.size&&n.vertical.size<1)n.vertical.size=0;if(n.horizontal&&n.horizontal.size&&n.horizontal.size<1)n.horizontal.size=0;e.set(n)}}_updateVersionFrom7To8(){}_updateVersionFrom8To9(){const e=["skipStackFramesPattern","workspaceFolderExcludePattern"];for(let t=0;t<e.length;++t){const s=Common.settings.createSetting(e[t],"");let n=s.get();if(!n)return;if(typeof n==="string")n=[n];for(let e=0;e<n.length;++e){if(typeof n[e]==="string")n[e]={pattern:n[e]}}s.set(n)}}_updateVersionFrom9To10(){if(!window.localStorage)return;for(const e in window.localStorage){if(e.startsWith("revision-history"))window.localStorage.removeItem(e)}}_updateVersionFrom10To11(){const e="customDevicePresets";const t="customEmulatedDeviceList";const s=Common.settings.createSetting(e,undefined);const n=s.get();if(!Array.isArray(n))return;const o=[];for(let e=0;e<n.length;++e){const t=n[e];const s={};s["title"]=t["title"];s["type"]="unknown";s["user-agent"]=t["userAgent"];s["capabilities"]=[];if(t["touch"])s["capabilities"].push("touch");if(t["mobile"])s["capabilities"].push("mobile");s["screen"]={};s["screen"]["vertical"]={width:t["width"],height:t["height"]};s["screen"]["horizontal"]={width:t["height"],height:t["width"]};s["screen"]["device-pixel-ratio"]=t["deviceScaleFactor"];s["modes"]=[];s["show-by-default"]=true;s["show"]="Default";o.push(s)}if(o.length)Common.settings.createSetting(t,[]).set(o);s.remove()}_updateVersionFrom11To12(){this._migrateSettingsFromLocalStorage()}_updateVersionFrom12To13(){this._migrateSettingsFromLocalStorage();Common.settings.createSetting("timelineOverviewMode","").remove()}_updateVersionFrom13To14(){const e={throughput:-1,latency:0};Common.settings.createSetting("networkConditions",e).set(e)}_updateVersionFrom14To15(){const e=Common.settings.createLocalSetting("workspaceExcludedFolders",{});const t=e.get();const s={};for(const e in t){s[e]=[];for(const n of t[e])s[e].push(n.path)}e.set(s)}_updateVersionFrom15To16(){const e=Common.settings.createSetting("InspectorView.panelOrder",{});const t=e.get();for(const e of Object.keys(t))t[e]=(t[e]+1)*10;e.set(t)}_updateVersionFrom16To17(){const e=Common.settings.createSetting("networkConditionsCustomProfiles",[]);const t=e.get();const s=[];if(Array.isArray(t)){for(const e of t){if(typeof e.title==="string"&&typeof e.value==="object"&&typeof e.value.throughput==="number"&&typeof e.value.latency==="number"){s.push({title:e.title,value:{download:e.value.throughput,upload:e.value.throughput,latency:e.value.latency}})}}}e.set(s)}_updateVersionFrom17To18(){const e=Common.settings.createLocalSetting("workspaceExcludedFolders",{});const t=e.get();const s={};for(const e in t){let n=e.replace(/\\/g,"/");if(!n.startsWith("file://")){if(n.startsWith("/"))n="file://"+n;else n="file:///"+n}s[n]=t[e]}e.set(s)}_updateVersionFrom18To19(){const e={status:true,type:true,initiator:true,size:true,time:true};const t=Common.settings.createSetting("networkLogColumnsVisibility",e);const s=t.get();s.name=true;s.timeline=true;const n={};for(const e in s){if(!s.hasOwnProperty(e))continue;n[e.toLowerCase()]={visible:s[e]}}const o=Common.settings.createSetting("networkLogColumns",{});o.set(n);t.remove()}_updateVersionFrom19To20(){const e=Common.settings.createSetting("InspectorView.panelOrder",{});const t=Common.settings.createSetting("panel-tabOrder",{});t.set(e.get());e.remove()}_updateVersionFrom20To21(){const e=Common.settings.createSetting("networkLogColumns",{});const t=e.get();delete t["timeline"];delete t["waterfall"];e.set(t)}_updateVersionFrom21To22(){const e=Common.settings.createLocalSetting("breakpoints",[]);const t=e.get();for(const e of t){e["url"]=e["sourceFileId"];delete e["sourceFileId"]}e.set(t)}_updateVersionFrom22To23(){}_updateVersionFrom23To24(){const e=Common.settings.createSetting("searchInContentScripts",false);const t=Common.settings.createSetting("searchInAnonymousAndContentScripts",false);t.set(e.get());e.remove()}_updateVersionFrom24To25(){const e={status:true,type:true,initiator:true,size:true,time:true};const t=Common.settings.createSetting("networkLogColumns",e);const s=t.get();delete s.product;t.set(s)}_updateVersionFrom25To26(){const e=Common.settings.createSetting("messageURLFilters",{});const t=Object.keys(e.get());const s=t.map(e=>`-url:${e}`).join(" ");if(s){const e=Common.settings.createSetting("console.textFilter","");const t=e.get()?` ${e.get()}`:"";e.set(`${s}${t}`)}e.remove()}_updateVersionFrom26To27(){function e(e,t,s){const n=Common.settings.createSetting(e,{});const o=n.get();if(t in o){o[s]=o[t];delete o[t];n.set(o)}}function t(e,t,s){const n=Common.settings.createSetting(e,"");const o=n.get();if(o===t)n.set(s)}e("panel-tabOrder","audits2","audits");e("panel-closeableTabs","audits2","audits");t("panel-selectedTab","audits2","audits")}_updateVersionFrom27To28(){const e=Common.settings.createSetting("uiTheme","systemPreferred");if(e.get()==="default")e.set("systemPreferred")}_migrateSettingsFromLocalStorage(){const e=new Set(["advancedSearchConfig","breakpoints","consoleHistory","domBreakpoints","eventListenerBreakpoints","fileSystemMapping","lastSelectedSourcesSidebarPaneTab","previouslyViewedFiles","savedURLs","watchExpressions","workspaceExcludedFolders","xhrBreakpoints"]);if(!window.localStorage)return;for(const t in window.localStorage){if(e.has(t))continue;const s=window.localStorage[t];window.localStorage.removeItem(t);Common.settings._globalStorage[t]=s}}_clearBreakpointsWhenTooMany(e,t){if(e.get().length>t)e.set([])}};Common.VersionController._currentVersionName="inspectorVersion";Common.VersionController.currentVersion=28;Common.settings;Common.SettingStorageType={Global:Symbol("Global"),Local:Symbol("Local"),Session:Symbol("Session")};Common.moduleSetting=function(e){return Common.settings.moduleSetting(e)};Common.settingForTest=function(e){return Common.settings.settingForTest(e)};Common.StaticContentProvider=class{constructor(e,t,s){this._contentURL=e;this._contentType=t;this._lazyContent=s}static fromString(e,t,s){const n=()=>Promise.resolve(s);return new Common.StaticContentProvider(e,t,n)}contentURL(){return this._contentURL}contentType(){return this._contentType}contentEncoded(){return Promise.resolve(false)}requestContent(){return this._lazyContent()}async searchInContent(e,t,s){const n=await this._lazyContent();return n?Common.ContentProvider.performSearchInContent(n,e,t,s):[]}};Common.OutputStream=function(){};Common.OutputStream.prototype={write(e){},close(){}};Common.StringOutputStream=class{constructor(){this._data=""}async write(e){this._data+=e}close(){}data(){return this._data}};Common.Segment=class{constructor(e,t,s){if(e>t)console.assert(false,"Invalid segment");this.begin=e;this.end=t;this.data=s}intersects(e){return this.begin<e.end&&e.begin<this.end}};Common.SegmentedRange=class{constructor(e){this._segments=[];this._mergeCallback=e}append(e){let t=this._segments.lowerBound(e,(e,t)=>e.begin-t.begin);let s=t;let n=null;if(t>0){const s=this._segments[t-1];n=this._tryMerge(s,e);if(n){--t;e=n}else if(this._segments[t-1].end>=e.begin){if(e.end<s.end){this._segments.splice(t,0,new Common.Segment(e.end,s.end,s.data))}s.end=e.begin}}while(s<this._segments.length&&this._segments[s].end<=e.end)++s;if(s<this._segments.length){n=this._tryMerge(e,this._segments[s]);if(n){s++;e=n}else if(e.intersects(this._segments[s])){this._segments[s].begin=e.end}}this._segments.splice(t,s-t,e)}appendRange(e){e.segments().forEach(e=>this.append(e))}segments(){return this._segments}_tryMerge(e,t){const s=this._mergeCallback&&this._mergeCallback(e,t);if(!s)return null;s.begin=e.begin;s.end=Math.max(e.end,t.end);return s}};Common.Throttler=class{constructor(e){this._timeout=e;this._isRunningProcess=false;this._asSoonAsPossible=false;this._process=null;this._lastCompleteTime=0;this._schedulePromise=new Promise(e=>{this._scheduleResolve=e})}_processCompleted(){this._lastCompleteTime=this._getTime();this._isRunningProcess=false;if(this._process)this._innerSchedule(false);this._processCompletedForTests()}_processCompletedForTests(){}_onTimeout(){delete this._processTimeout;this._asSoonAsPossible=false;this._isRunningProcess=true;Promise.resolve().then(this._process).catch(console.error.bind(console)).then(this._processCompleted.bind(this)).then(this._scheduleResolve);this._schedulePromise=new Promise(e=>{this._scheduleResolve=e});this._process=null}schedule(e,t){this._process=e;const s=!!this._processTimeout||this._isRunningProcess;const n=this._getTime()-this._lastCompleteTime>this._timeout;t=!!t||!s&&n;const o=t&&!this._asSoonAsPossible;this._asSoonAsPossible=this._asSoonAsPossible||t;this._innerSchedule(o);return this._schedulePromise}_innerSchedule(e){if(this._isRunningProcess)return;if(this._processTimeout&&!e)return;if(this._processTimeout)this._clearTimeout(this._processTimeout);const t=this._asSoonAsPossible?0:this._timeout;this._processTimeout=this._setTimeout(this._onTimeout.bind(this),t)}_clearTimeout(e){clearTimeout(e)}_setTimeout(e,t){return setTimeout(e,t)}_getTime(){return window.performance.now()}};Common.Throttler.FinishCallback;Common.Trie=class{constructor(){this.clear()}add(e){let t=this._root;++this._wordsInSubtree[this._root];for(let s=0;s<e.length;++s){const n=e[s];let o=this._edges[t][n];if(!o){if(this._freeNodes.length){o=this._freeNodes.pop()}else{o=this._size++;this._isWord.push(false);this._wordsInSubtree.push(0);this._edges.push({__proto__:null})}this._edges[t][n]=o}++this._wordsInSubtree[o];t=o}this._isWord[t]=true}remove(e){if(!this.has(e))return false;let t=this._root;--this._wordsInSubtree[this._root];for(let s=0;s<e.length;++s){const n=e[s];const o=this._edges[t][n];if(!--this._wordsInSubtree[o]){delete this._edges[t][n];this._freeNodes.push(o)}t=o}this._isWord[t]=false;return true}has(e){let t=this._root;for(let s=0;s<e.length;++s){t=this._edges[t][e[s]];if(!t)return false}return this._isWord[t]}words(e){e=e||"";let t=this._root;for(let s=0;s<e.length;++s){t=this._edges[t][e[s]];if(!t)return[]}const s=[];this._dfs(t,e,s);return s}_dfs(e,t,s){if(this._isWord[e])s.push(t);const n=this._edges[e];for(const e in n)this._dfs(n[e],t+e,s)}longestPrefix(e,t){let s=this._root;let n=0;for(let o=0;o<e.length;++o){s=this._edges[s][e[o]];if(!s)break;if(!t||this._isWord[s])n=o+1}return e.substring(0,n)}clear(){this._size=1;this._root=0;this._edges=[{__proto__:null}];this._isWord=[false];this._wordsInSubtree=[0];this._freeNodes=[]}};self["Common"]=self["Common"]||{};Common.UIString=function(e,t){return String.vsprintf(Common.localize(e),Array.prototype.slice.call(arguments,1))};Common.localize=function(e){return e};Common.UIStringFormat=class{constructor(e){this._localizedFormat=Common.localize(e);this._tokenizedFormat=String.tokenizeFormatString(this._localizedFormat,String.standardFormatters)}static _append(e,t){return e+t}format(e){return String.format(this._localizedFormat,arguments,String.standardFormatters,"",Common.UIStringFormat._append,this._tokenizedFormat).formattedResult}};Common._substitutionStrings=new WeakMap;self.ls=function(e,t){if(typeof e==="string")return e;let s=Common._substitutionStrings.get(e);if(!s){s=e.join("%s");Common._substitutionStrings.set(e,s)}return Common.UIString(s,...Array.prototype.slice.call(arguments,1))};Common.Revealer=function(){};Common.Revealer.reveal=function(e,t){if(!e)return Promise.reject(new Error("Can't reveal "+e));return self.runtime.allInstances(Common.Revealer,e).then(s);function s(s){const n=[];for(let o=0;o<s.length;++o)n.push(s[o].reveal(e,t));return Promise.race(n)}};Common.Revealer.revealDestination=function(e){const t=self.runtime.extension(Common.Revealer,e);if(!t)return null;return t.descriptor()["destination"]};Common.Revealer.prototype={reveal(e,t){}};Common.App=function(){};Common.App.prototype={presentUI(e){}};Common.AppProvider=function(){};Common.AppProvider.prototype={createApp(){}};Common.QueryParamHandler=function(){};Common.QueryParamHandler.prototype={handleQueryParam(e){}};Common.Runnable=function(){};Common.Runnable.prototype={run(){}};Common.Linkifier=function(){};Common.Linkifier.prototype={linkify(e,t){}};Common.Linkifier.linkify=function(e,t){if(!e)return Promise.reject(new Error("Can't linkify "+e));return self.runtime.extension(Common.Linkifier,e).instance().then(s=>s.linkify(e,t))};Common.Linkifier.Options;Common.JavaScriptMetadata=function(){};Common.JavaScriptMetadata.prototype={signaturesForNativeFunction(e){},signaturesForInstanceMethod(e,t){},signaturesForStaticMethod(e,t){}};Common.CharacterIdMap=class{constructor(){this._elementToCharacter=new Map;this._characterToElement=new Map;this._charCode=33}toChar(e){let t=this._elementToCharacter.get(e);if(!t){if(this._charCode>=65535)throw new Error("CharacterIdMap ran out of capacity!");t=String.fromCharCode(this._charCode++);this._elementToCharacter.set(e,t);this._characterToElement.set(t,e)}return t}fromChar(e){const t=this._characterToElement.get(e);if(t===undefined)return null;return t}};self["HeapSnapshotWorker"]=self["HeapSnapshotWorker"]||{};HeapSnapshotWorker.AllocationProfile=class{constructor(e,t){this._strings=e.strings;this._liveObjectStats=t;this._nextNodeId=1;this._functionInfos=[];this._idToNode={};this._idToTopDownNode={};this._collapsedTopNodeIdToFunctionInfo={};this._traceTops=null;this._buildFunctionAllocationInfos(e);this._traceTree=this._buildAllocationTree(e,t)}_buildFunctionAllocationInfos(e){const t=this._strings;const s=e.snapshot.meta.trace_function_info_fields;const n=s.indexOf("name");const o=s.indexOf("script_name");const i=s.indexOf("script_id");const r=s.indexOf("line");const a=s.indexOf("column");const l=s.length;const h=e.trace_function_infos;const c=h.length;const d=this._functionInfos=new Array(c/l);let u=0;for(let e=0;e<c;e+=l){d[u++]=new HeapSnapshotWorker.FunctionAllocationInfo(t[h[e+n]],t[h[e+o]],h[e+i],h[e+r],h[e+a])}}_buildAllocationTree(e,t){const s=e.trace_tree;const n=this._functionInfos;const o=this._idToTopDownNode;const i=e.snapshot.meta.trace_node_fields;const r=i.indexOf("id");const a=i.indexOf("function_info_index");const l=i.indexOf("count");const h=i.indexOf("size");const c=i.indexOf("children");const d=i.length;function u(e,s,i){const p=n[e[s+a]];const m=e[s+r];const g=t[m];const f=g?g.count:0;const _=g?g.size:0;const S=new HeapSnapshotWorker.TopDownAllocationNode(m,p,e[s+l],e[s+h],f,_,i);o[m]=S;p.addTraceTopNode(S);const C=e[s+c];for(let e=0;e<C.length;e+=d)S.children.push(u(C,e,S));return S}return u(s,0,null)}serializeTraceTops(){if(this._traceTops)return this._traceTops;const e=this._traceTops=[];const t=this._functionInfos;for(let s=0;s<t.length;s++){const n=t[s];if(n.totalCount===0)continue;const o=this._nextNodeId++;const i=s===0;e.push(this._serializeNode(o,n,n.totalCount,n.totalSize,n.totalLiveCount,n.totalLiveSize,!i));this._collapsedTopNodeIdToFunctionInfo[o]=n}e.sort(function(e,t){return t.size-e.size});return e}serializeCallers(e){let t=this._ensureBottomUpNode(e);const s=[];while(t.callers().length===1){t=t.callers()[0];s.push(this._serializeCaller(t))}const n=[];const o=t.callers();for(let e=0;e<o.length;e++)n.push(this._serializeCaller(o[e]));return new HeapSnapshotModel.AllocationNodeCallers(s,n)}serializeAllocationStack(e){let t=this._idToTopDownNode[e];const s=[];while(t){const e=t.functionInfo;s.push(new HeapSnapshotModel.AllocationStackFrame(e.functionName,e.scriptName,e.scriptId,e.line,e.column));t=t.parent}return s}traceIds(e){return this._ensureBottomUpNode(e).traceTopIds}_ensureBottomUpNode(e){let t=this._idToNode[e];if(!t){const s=this._collapsedTopNodeIdToFunctionInfo[e];t=s.bottomUpRoot();delete this._collapsedTopNodeIdToFunctionInfo[e];this._idToNode[e]=t}return t}_serializeCaller(e){const t=this._nextNodeId++;this._idToNode[t]=e;return this._serializeNode(t,e.functionInfo,e.allocationCount,e.allocationSize,e.liveCount,e.liveSize,e.hasCallers())}_serializeNode(e,t,s,n,o,i,r){return new HeapSnapshotModel.SerializedAllocationNode(e,t.functionName,t.scriptName,t.scriptId,t.line,t.column,s,n,o,i,r)}};HeapSnapshotWorker.TopDownAllocationNode=class{constructor(e,t,s,n,o,i,r){this.id=e;this.functionInfo=t;this.allocationCount=s;this.allocationSize=n;this.liveCount=o;this.liveSize=i;this.parent=r;this.children=[]}};HeapSnapshotWorker.BottomUpAllocationNode=class{constructor(e){this.functionInfo=e;this.allocationCount=0;this.allocationSize=0;this.liveCount=0;this.liveSize=0;this.traceTopIds=[];this._callers=[]}addCaller(e){const t=e.functionInfo;let s;for(let e=0;e<this._callers.length;e++){const n=this._callers[e];if(n.functionInfo===t){s=n;break}}if(!s){s=new HeapSnapshotWorker.BottomUpAllocationNode(t);this._callers.push(s)}return s}callers(){return this._callers}hasCallers(){return this._callers.length>0}};HeapSnapshotWorker.FunctionAllocationInfo=class{constructor(e,t,s,n,o){this.functionName=e;this.scriptName=t;this.scriptId=s;this.line=n;this.column=o;this.totalCount=0;this.totalSize=0;this.totalLiveCount=0;this.totalLiveSize=0;this._traceTops=[]}addTraceTopNode(e){if(e.allocationCount===0)return;this._traceTops.push(e);this.totalCount+=e.allocationCount;this.totalSize+=e.allocationSize;this.totalLiveCount+=e.liveCount;this.totalLiveSize+=e.liveSize}bottomUpRoot(){if(!this._traceTops.length)return null;if(!this._bottomUpTree)this._buildAllocationTraceTree();return this._bottomUpTree}_buildAllocationTraceTree(){this._bottomUpTree=new HeapSnapshotWorker.BottomUpAllocationNode(this);for(let e=0;e<this._traceTops.length;e++){let t=this._traceTops[e];let s=this._bottomUpTree;const n=t.allocationCount;const o=t.allocationSize;const i=t.liveCount;const r=t.liveSize;const a=t.id;while(true){s.allocationCount+=n;s.allocationSize+=o;s.liveCount+=i;s.liveSize+=r;s.traceTopIds.push(a);t=t.parent;if(t===null)break;s=s.addCaller(t)}}}};HeapSnapshotWorker.HeapSnapshotItem=function(){};HeapSnapshotWorker.HeapSnapshotItem.prototype={itemIndex(){},serialize(){}};HeapSnapshotWorker.HeapSnapshotEdge=class{constructor(e,t){this._snapshot=e;this._edges=e.containmentEdges;this.edgeIndex=t||0}clone(){return new HeapSnapshotWorker.HeapSnapshotEdge(this._snapshot,this.edgeIndex)}hasStringName(){throw new Error("Not implemented")}name(){throw new Error("Not implemented")}node(){return this._snapshot.createNode(this.nodeIndex())}nodeIndex(){return this._edges[this.edgeIndex+this._snapshot._edgeToNodeOffset]}toString(){return"HeapSnapshotEdge: "+this.name()}type(){return this._snapshot._edgeTypes[this.rawType()]}itemIndex(){return this.edgeIndex}serialize(){return new HeapSnapshotModel.Edge(this.name(),this.node().serialize(),this.type(),this.edgeIndex)}rawType(){return this._edges[this.edgeIndex+this._snapshot._edgeTypeOffset]}};HeapSnapshotWorker.HeapSnapshotItemIterator=function(){};HeapSnapshotWorker.HeapSnapshotItemIterator.prototype={hasNext(){},item(){},next(){}};HeapSnapshotWorker.HeapSnapshotItemIndexProvider=function(){};HeapSnapshotWorker.HeapSnapshotItemIndexProvider.prototype={itemForIndex(e){}};HeapSnapshotWorker.HeapSnapshotNodeIndexProvider=class{constructor(e){this._node=e.createNode()}itemForIndex(e){this._node.nodeIndex=e;return this._node}};HeapSnapshotWorker.HeapSnapshotEdgeIndexProvider=class{constructor(e){this._edge=e.createEdge(0)}itemForIndex(e){this._edge.edgeIndex=e;return this._edge}};HeapSnapshotWorker.HeapSnapshotRetainerEdgeIndexProvider=class{constructor(e){this._retainerEdge=e.createRetainingEdge(0)}itemForIndex(e){this._retainerEdge.setRetainerIndex(e);return this._retainerEdge}};HeapSnapshotWorker.HeapSnapshotEdgeIterator=class{constructor(e){this._sourceNode=e;this.edge=e._snapshot.createEdge(e.edgeIndexesStart())}hasNext(){return this.edge.edgeIndex<this._sourceNode.edgeIndexesEnd()}item(){return this.edge}next(){this.edge.edgeIndex+=this.edge._snapshot._edgeFieldsCount}};HeapSnapshotWorker.HeapSnapshotRetainerEdge=class{constructor(e,t){this._snapshot=e;this.setRetainerIndex(t)}clone(){return new HeapSnapshotWorker.HeapSnapshotRetainerEdge(this._snapshot,this.retainerIndex())}hasStringName(){return this._edge().hasStringName()}name(){return this._edge().name()}node(){return this._node()}nodeIndex(){return this._retainingNodeIndex}retainerIndex(){return this._retainerIndex}setRetainerIndex(e){if(e===this._retainerIndex)return;this._retainerIndex=e;this._globalEdgeIndex=this._snapshot._retainingEdges[e];this._retainingNodeIndex=this._snapshot._retainingNodes[e];this._edgeInstance=null;this._nodeInstance=null}set edgeIndex(e){this.setRetainerIndex(e)}_node(){if(!this._nodeInstance)this._nodeInstance=this._snapshot.createNode(this._retainingNodeIndex);return this._nodeInstance}_edge(){if(!this._edgeInstance)this._edgeInstance=this._snapshot.createEdge(this._globalEdgeIndex);return this._edgeInstance}toString(){return this._edge().toString()}itemIndex(){return this._retainerIndex}serialize(){return new HeapSnapshotModel.Edge(this.name(),this.node().serialize(),this.type(),this._globalEdgeIndex)}type(){return this._edge().type()}};HeapSnapshotWorker.HeapSnapshotRetainerEdgeIterator=class{constructor(e){const t=e._snapshot;const s=e.ordinal();const n=t._firstRetainerIndex[s];this._retainersEnd=t._firstRetainerIndex[s+1];this.retainer=t.createRetainingEdge(n)}hasNext(){return this.retainer.retainerIndex()<this._retainersEnd}item(){return this.retainer}next(){this.retainer.setRetainerIndex(this.retainer.retainerIndex()+1)}};HeapSnapshotWorker.HeapSnapshotNode=class{constructor(e,t){this._snapshot=e;this.nodeIndex=t||0}distance(){return this._snapshot._nodeDistances[this.nodeIndex/this._snapshot._nodeFieldCount]}className(){throw new Error("Not implemented")}classIndex(){throw new Error("Not implemented")}dominatorIndex(){const e=this._snapshot._nodeFieldCount;return this._snapshot._dominatorsTree[this.nodeIndex/this._snapshot._nodeFieldCount]*e}edges(){return new HeapSnapshotWorker.HeapSnapshotEdgeIterator(this)}edgesCount(){return(this.edgeIndexesEnd()-this.edgeIndexesStart())/this._snapshot._edgeFieldsCount}id(){throw new Error("Not implemented")}isRoot(){return this.nodeIndex===this._snapshot._rootNodeIndex}name(){return this._snapshot.strings[this._name()]}retainedSize(){return this._snapshot._retainedSizes[this.ordinal()]}retainers(){return new HeapSnapshotWorker.HeapSnapshotRetainerEdgeIterator(this)}retainersCount(){const e=this._snapshot;const t=this.ordinal();return e._firstRetainerIndex[t+1]-e._firstRetainerIndex[t]}selfSize(){const e=this._snapshot;return e.nodes[this.nodeIndex+e._nodeSelfSizeOffset]}type(){return this._snapshot._nodeTypes[this.rawType()]}traceNodeId(){const e=this._snapshot;return e.nodes[this.nodeIndex+e._nodeTraceNodeIdOffset]}itemIndex(){return this.nodeIndex}serialize(){return new HeapSnapshotModel.Node(this.id(),this.name(),this.distance(),this.nodeIndex,this.retainedSize(),this.selfSize(),this.type())}_name(){const e=this._snapshot;return e.nodes[this.nodeIndex+e._nodeNameOffset]}edgeIndexesStart(){return this._snapshot._firstEdgeIndexes[this.ordinal()]}edgeIndexesEnd(){return this._snapshot._firstEdgeIndexes[this.ordinal()+1]}ordinal(){return this.nodeIndex/this._snapshot._nodeFieldCount}_nextNodeIndex(){return this.nodeIndex+this._snapshot._nodeFieldCount}rawType(){const e=this._snapshot;return e.nodes[this.nodeIndex+e._nodeTypeOffset]}};HeapSnapshotWorker.HeapSnapshotNodeIterator=class{constructor(e){this.node=e;this._nodesLength=e._snapshot.nodes.length}hasNext(){return this.node.nodeIndex<this._nodesLength}item(){return this.node}next(){this.node.nodeIndex=this.node._nextNodeIndex()}};HeapSnapshotWorker.HeapSnapshotIndexRangeIterator=class{constructor(e,t){this._itemProvider=e;this._indexes=t;this._position=0}hasNext(){return this._position<this._indexes.length}item(){const e=this._indexes[this._position];return this._itemProvider.itemForIndex(e)}next(){++this._position}};HeapSnapshotWorker.HeapSnapshotFilteredIterator=class{constructor(e,t){this._iterator=e;this._filter=t;this._skipFilteredItems()}hasNext(){return this._iterator.hasNext()}item(){return this._iterator.item()}next(){this._iterator.next();this._skipFilteredItems()}_skipFilteredItems(){while(this._iterator.hasNext()&&!this._filter(this._iterator.item()))this._iterator.next()}};HeapSnapshotWorker.HeapSnapshotProgress=class{constructor(e){this._dispatcher=e}updateStatus(e){this._sendUpdateEvent(Common.UIString(e))}updateProgress(e,t,s){const n=((s?t/s:0)*100).toFixed(0);this._sendUpdateEvent(Common.UIString(e,n))}reportProblem(e){if(this._dispatcher)this._dispatcher.sendEvent(HeapSnapshotModel.HeapSnapshotProgressEvent.BrokenSnapshot,e)}_sendUpdateEvent(e){if(this._dispatcher)this._dispatcher.sendEvent(HeapSnapshotModel.HeapSnapshotProgressEvent.Update,e)}};HeapSnapshotWorker.HeapSnapshotProblemReport=class{constructor(e){this._errors=[e]}addError(e){if(this._errors.length>100)return;this._errors.push(e)}toString(){return this._errors.join("\n  ")}};HeapSnapshotWorker.HeapSnapshot=class{constructor(e,t){this.nodes=e.nodes;this.containmentEdges=e.edges;this._metaNode=e.snapshot.meta;this._rawSamples=e.samples;this._samples=null;this.strings=e.strings;this._locations=e.locations;this._progress=t;this._noDistance=-5;this._rootNodeIndex=0;if(e.snapshot.root_index)this._rootNodeIndex=e.snapshot.root_index;this._snapshotDiffs={};this._aggregatesForDiff=null;this._aggregates={};this._aggregatesSortedFlags={};this._profile=e}initialize(){const e=this._metaNode;this._nodeTypeOffset=e.node_fields.indexOf("type");this._nodeNameOffset=e.node_fields.indexOf("name");this._nodeIdOffset=e.node_fields.indexOf("id");this._nodeSelfSizeOffset=e.node_fields.indexOf("self_size");this._nodeEdgeCountOffset=e.node_fields.indexOf("edge_count");this._nodeTraceNodeIdOffset=e.node_fields.indexOf("trace_node_id");this._nodeFieldCount=e.node_fields.length;this._nodeTypes=e.node_types[this._nodeTypeOffset];this._nodeArrayType=this._nodeTypes.indexOf("array");this._nodeHiddenType=this._nodeTypes.indexOf("hidden");this._nodeObjectType=this._nodeTypes.indexOf("object");this._nodeNativeType=this._nodeTypes.indexOf("native");this._nodeConsStringType=this._nodeTypes.indexOf("concatenated string");this._nodeSlicedStringType=this._nodeTypes.indexOf("sliced string");this._nodeCodeType=this._nodeTypes.indexOf("code");this._nodeSyntheticType=this._nodeTypes.indexOf("synthetic");this._edgeFieldsCount=e.edge_fields.length;this._edgeTypeOffset=e.edge_fields.indexOf("type");this._edgeNameOffset=e.edge_fields.indexOf("name_or_index");this._edgeToNodeOffset=e.edge_fields.indexOf("to_node");this._edgeTypes=e.edge_types[this._edgeTypeOffset];this._edgeTypes.push("invisible");this._edgeElementType=this._edgeTypes.indexOf("element");this._edgeHiddenType=this._edgeTypes.indexOf("hidden");this._edgeInternalType=this._edgeTypes.indexOf("internal");this._edgeShortcutType=this._edgeTypes.indexOf("shortcut");this._edgeWeakType=this._edgeTypes.indexOf("weak");this._edgeInvisibleType=this._edgeTypes.indexOf("invisible");const t=e.location_fields||[];this._locationIndexOffset=t.indexOf("object_index");this._locationScriptIdOffset=t.indexOf("script_id");this._locationLineOffset=t.indexOf("line");this._locationColumnOffset=t.indexOf("column");this._locationFieldCount=t.length;this.nodeCount=this.nodes.length/this._nodeFieldCount;this._edgeCount=this.containmentEdges.length/this._edgeFieldsCount;this._retainedSizes=new Float64Array(this.nodeCount);this._firstEdgeIndexes=new Uint32Array(this.nodeCount+1);this._retainingNodes=new Uint32Array(this._edgeCount);this._retainingEdges=new Uint32Array(this._edgeCount);this._firstRetainerIndex=new Uint32Array(this.nodeCount+1);this._nodeDistances=new Int32Array(this.nodeCount);this._firstDominatedNodeIndex=new Uint32Array(this.nodeCount+1);this._dominatedNodes=new Uint32Array(this.nodeCount-1);this._progress.updateStatus("Building edge indexes…");this._buildEdgeIndexes();this._progress.updateStatus("Building retainers…");this._buildRetainers();this._progress.updateStatus("Calculating node flags…");this.calculateFlags();this._progress.updateStatus("Calculating distances…");this.calculateDistances();this._progress.updateStatus("Building postorder index…");const s=this._buildPostOrderIndex();this._progress.updateStatus("Building dominator tree…");this._dominatorsTree=this._buildDominatorTree(s.postOrderIndex2NodeOrdinal,s.nodeOrdinal2PostOrderIndex);this._progress.updateStatus("Calculating retained sizes…");this._calculateRetainedSizes(s.postOrderIndex2NodeOrdinal);this._progress.updateStatus("Building dominated nodes…");this._buildDominatedNodes();this._progress.updateStatus("Calculating statistics…");this.calculateStatistics();this._progress.updateStatus("Calculating samples…");this._buildSamples();this._progress.updateStatus("Building locations…");this._buildLocationMap();this._progress.updateStatus("Finished processing.");if(this._profile.snapshot.trace_function_count){this._progress.updateStatus("Building allocation statistics…");const e=this.nodes;const t=e.length;const s=this._nodeFieldCount;const n=this.rootNode();const o={};for(let e=0;e<t;e+=s){n.nodeIndex=e;const t=n.traceNodeId();let s=o[t];if(!s)o[t]=s={count:0,size:0,ids:[]};s.count++;s.size+=n.selfSize();s.ids.push(n.id())}this._allocationProfile=new HeapSnapshotWorker.AllocationProfile(this._profile,o);this._progress.updateStatus("Done")}}_buildEdgeIndexes(){const e=this.nodes;const t=this.nodeCount;const s=this._firstEdgeIndexes;const n=this._nodeFieldCount;const o=this._edgeFieldsCount;const i=this._nodeEdgeCountOffset;s[t]=this.containmentEdges.length;for(let r=0,a=0;r<t;++r){s[r]=a;a+=e[r*n+i]*o}}_buildRetainers(){const e=this._retainingNodes;const t=this._retainingEdges;const s=this._firstRetainerIndex;const n=this.containmentEdges;const o=this._edgeFieldsCount;const i=this._nodeFieldCount;const r=this._edgeToNodeOffset;const a=this._firstEdgeIndexes;const l=this.nodeCount;for(let e=r,t=n.length;e<t;e+=o){const t=n[e];if(t%i)throw new Error("Invalid toNodeIndex "+t);++s[t/i]}for(let t=0,n=0;t<l;t++){const o=s[t];s[t]=n;e[n]=o;n+=o}s[l]=e.length;let h=a[0];for(let c=0;c<l;++c){const l=h;h=a[c+1];const d=c*i;for(let a=l;a<h;a+=o){const o=n[a+r];if(o%i)throw new Error("Invalid toNodeIndex "+o);const l=s[o/i];const h=l+--e[l];e[h]=d;t[h]=a}}}createNode(e){throw new Error("Not implemented")}createEdge(e){throw new Error("Not implemented")}createRetainingEdge(e){throw new Error("Not implemented")}_allNodes(){return new HeapSnapshotWorker.HeapSnapshotNodeIterator(this.rootNode())}rootNode(){return this.createNode(this._rootNodeIndex)}get rootNodeIndex(){return this._rootNodeIndex}get totalSize(){return this.rootNode().retainedSize()}_getDominatedIndex(e){if(e%this._nodeFieldCount)throw new Error("Invalid nodeIndex: "+e);return this._firstDominatedNodeIndex[e/this._nodeFieldCount]}_createFilter(e){const t=e.minNodeId;const s=e.maxNodeId;const n=e.allocationNodeId;let o;if(typeof n==="number"){o=this._createAllocationStackFilter(n);o.key="AllocationNodeId: "+n}else if(typeof t==="number"&&typeof s==="number"){o=this._createNodeIdFilter(t,s);o.key="NodeIdRange: "+t+".."+s}return o}search(e,t){const s=e.query;function n(e,t,n){if(t.indexOf(s)!==-1)e.add(n);return e}const o=e.isRegex?new RegExp(s):createPlainTextSearchRegex(s,"i");function i(e,t,s){if(o.test(t))e.add(s);return e}const r=e.isRegex||!e.caseSensitive?i:n;const a=this.strings.reduce(r,new Set);if(!a.size)return[];const l=this._createFilter(t);const h=[];const c=this.nodes.length;const d=this.nodes;const u=this._nodeNameOffset;const p=this._nodeIdOffset;const m=this._nodeFieldCount;const g=this.rootNode();for(let e=0;e<c;e+=m){g.nodeIndex=e;if(l&&!l(g))continue;if(a.has(d[e+u]))h.push(d[e+p])}return h}aggregatesWithFilter(e){const t=this._createFilter(e);const s=t?t.key:"allObjects";return this.aggregates(false,s,t)}_createNodeIdFilter(e,t){function s(s){const n=s.id();return n>e&&n<=t}return s}_createAllocationStackFilter(e){const t=this._allocationProfile.traceIds(e);if(!t.length)return undefined;const s={};for(let e=0;e<t.length;e++)s[t[e]]=true;function n(e){return!!s[e.traceNodeId()]}return n}aggregates(e,t,s){let n=t&&this._aggregates[t];if(!n){const e=this._buildAggregates(s);this._calculateClassesRetainedSize(e.aggregatesByClassIndex,s);n=e.aggregatesByClassName;if(t)this._aggregates[t]=n}if(e&&(!t||!this._aggregatesSortedFlags[t])){this._sortAggregateIndexes(n);if(t)this._aggregatesSortedFlags[t]=e}return n}allocationTracesTops(){return this._allocationProfile.serializeTraceTops()}allocationNodeCallers(e){return this._allocationProfile.serializeCallers(e)}allocationStack(e){const t=this.createNode(e);const s=t.traceNodeId();if(!s)return null;return this._allocationProfile.serializeAllocationStack(s)}aggregatesForDiff(){if(this._aggregatesForDiff)return this._aggregatesForDiff;const e=this.aggregates(true,"allObjects");this._aggregatesForDiff={};const t=this.createNode();for(const s in e){const n=e[s];const o=n.idxs;const i=new Array(o.length);const r=new Array(o.length);for(let e=0;e<o.length;e++){t.nodeIndex=o[e];i[e]=t.id();r[e]=t.selfSize()}this._aggregatesForDiff[s]={indexes:o,ids:i,selfSizes:r}}return this._aggregatesForDiff}isUserRoot(e){return true}calculateDistances(e){const t=this.nodeCount;const s=this._nodeDistances;const n=this._noDistance;for(let e=0;e<t;++e)s[e]=n;const o=new Uint32Array(this.nodeCount);let i=0;for(let e=this.rootNode().edges();e.hasNext();e.next()){const t=e.edge.node();if(this.isUserRoot(t)){s[t.ordinal()]=1;o[i++]=t.nodeIndex}}this._bfs(o,i,s,e);s[this.rootNode().ordinal()]=i>0?HeapSnapshotModel.baseSystemDistance:0;o[0]=this.rootNode().nodeIndex;i=1;this._bfs(o,i,s,e)}_bfs(e,t,s,n){const o=this._edgeFieldsCount;const i=this._nodeFieldCount;const r=this.containmentEdges;const a=this._firstEdgeIndexes;const l=this._edgeToNodeOffset;const h=this._edgeTypeOffset;const c=this.nodeCount;const d=this._edgeWeakType;const u=this._noDistance;let p=0;const m=this.createEdge(0);const g=this.createNode(0);while(p<t){const c=e[p++];const f=c/i;const _=s[f]+1;const S=a[f];const C=a[f+1];g.nodeIndex=c;for(let a=S;a<C;a+=o){const o=r[a+h];if(o===d)continue;const c=r[a+l];const p=c/i;if(s[p]!==u)continue;m.edgeIndex=a;if(n&&!n(g,m))continue;s[p]=_;e[t++]=c}}if(t>c){throw new Error("BFS failed. Nodes to visit ("+t+") is more than nodes count ("+c+")")}}_buildAggregates(e){const t={};const s={};const n=[];const o=this.nodes;const i=o.length;const r=this._nodeNativeType;const a=this._nodeFieldCount;const l=this._nodeSelfSizeOffset;const h=this._nodeTypeOffset;const c=this.rootNode();const d=this._nodeDistances;for(let u=0;u<i;u+=a){c.nodeIndex=u;if(e&&!e(c))continue;const i=o[u+l];if(!i&&o[u+h]!==r)continue;const p=c.classIndex();const m=u/a;const g=d[m];if(!(p in t)){const e=c.type();const o=e==="object"||e==="native";const r={count:1,distance:g,self:i,maxRet:0,type:e,name:o?c.name():null,idxs:[u]};t[p]=r;n.push(p);s[c.className()]=r}else{const e=t[p];e.distance=Math.min(e.distance,g);++e.count;e.self+=i;e.idxs.push(u)}}for(let e=0,s=n.length;e<s;++e){const s=n[e];t[s].idxs=t[s].idxs.slice()}return{aggregatesByClassName:s,aggregatesByClassIndex:t}}_calculateClassesRetainedSize(e,t){const s=this._rootNodeIndex;const n=this.createNode(s);const o=[s];const i=[-1];const r=[];const a={};const l=this._nodeFieldCount;const h=this._nodeTypeOffset;const c=this._nodeNativeType;const d=this._dominatedNodes;const u=this.nodes;const p=this._firstDominatedNodeIndex;while(o.length){const s=o.pop();n.nodeIndex=s;let m=n.classIndex();const g=!!a[m];const f=s/l;const _=p[f];const S=p[f+1];if(!g&&(!t||t(n))&&(n.selfSize()||u[s+h]===c)){e[m].maxRet+=n.retainedSize();if(_!==S){a[m]=true;i.push(o.length);r.push(m)}}for(let e=_;e<S;e++)o.push(d[e]);const C=o.length;while(i[i.length-1]===C){i.pop();m=r.pop();a[m]=false}}}_sortAggregateIndexes(e){const t=this.createNode();const s=this.createNode();for(const n in e){e[n].idxs.sort((e,n)=>{t.nodeIndex=e;s.nodeIndex=n;return t.id()<s.id()?-1:1})}}_isEssentialEdge(e,t){return t!==this._edgeWeakType&&(t!==this._edgeShortcutType||e===this._rootNodeIndex)}_buildPostOrderIndex(){const e=this._nodeFieldCount;const t=this.nodeCount;const s=this._rootNodeIndex/e;const n=this._edgeFieldsCount;const o=this._edgeTypeOffset;const i=this._edgeToNodeOffset;const r=this._firstEdgeIndexes;const a=this.containmentEdges;const l=this.userObjectsMapAndFlag();const h=l?l.map:null;const c=l?l.flag:0;const d=new Uint32Array(t);const u=new Uint32Array(t);const p=new Uint32Array(t);const m=new Uint32Array(t);const g=new Uint8Array(t);let f=0;let _=0;d[0]=s;u[0]=r[s];g[s]=1;let S=0;while(true){++S;while(_>=0){const t=d[_];const l=u[_];const S=r[t+1];if(l<S){u[_]+=n;const p=a[l+o];if(!this._isEssentialEdge(t*e,p))continue;const m=a[l+i];const f=m/e;if(g[f])continue;const S=!h||h[t]&c;const C=!h||h[f]&c;if(t!==s&&C&&!S)continue;++_;d[_]=f;u[_]=r[f];g[f]=1}else{m[t]=f;p[f++]=t;--_}}if(f===t||S>1)break;const l=new HeapSnapshotWorker.HeapSnapshotProblemReport(`Heap snapshot: ${t-f} nodes are unreachable from the root. Following nodes have only weak retainers:`);const C=this.rootNode();--f;_=0;d[0]=s;u[0]=r[s+1];for(let s=0;s<t;++s){if(g[s]||!this._hasOnlyWeakRetainers(s))continue;d[++_]=s;u[_]=r[s];g[s]=1;C.nodeIndex=s*e;const t=[];for(let e=C.retainers();e.hasNext();e.next())t.push(`${e.item().node().name()}@${e.item().node().id()}.${e.item().name()}`);l.addError(`${C.name()} @${C.id()}  weak retainers: ${t.join(", ")}`)}console.warn(l.toString())}if(f!==t){const n=new HeapSnapshotWorker.HeapSnapshotProblemReport("Still found "+(t-f)+" unreachable nodes in heap snapshot:");const o=this.rootNode();--f;for(let s=0;s<t;++s){if(g[s])continue;o.nodeIndex=s*e;n.addError(o.name()+" @"+o.id());m[s]=f;p[f++]=s}m[s]=f;p[f++]=s;console.warn(n.toString())}return{postOrderIndex2NodeOrdinal:p,nodeOrdinal2PostOrderIndex:m}}_hasOnlyWeakRetainers(e){const t=this._edgeTypeOffset;const s=this._edgeWeakType;const n=this._edgeShortcutType;const o=this.containmentEdges;const i=this._retainingEdges;const r=this._firstRetainerIndex[e];const a=this._firstRetainerIndex[e+1];for(let e=r;e<a;++e){const r=i[e];const a=o[r+t];if(a!==s&&a!==n)return false}return true}_buildDominatorTree(e,t){const s=this._nodeFieldCount;const n=this._firstRetainerIndex;const o=this._retainingNodes;const i=this._retainingEdges;const r=this._edgeFieldsCount;const a=this._edgeTypeOffset;const l=this._edgeToNodeOffset;const h=this._firstEdgeIndexes;const c=this.containmentEdges;const d=this._rootNodeIndex;const u=this.userObjectsMapAndFlag();const p=u?u.map:null;const m=u?u.flag:0;const g=e.length;const f=g-1;const _=g;const S=new Uint32Array(g);for(let e=0;e<f;++e)S[e]=_;S[f]=f;const C=new Uint8Array(g);let x;{x=this._rootNodeIndex/s;const e=h[x+1];for(let n=h[x];n<e;n+=r){const e=c[n+a];if(!this._isEssentialEdge(this._rootNodeIndex,e))continue;const o=c[n+l]/s;C[t[o]]=1}}let y=true;while(y){y=false;for(let u=f-1;u>=0;--u){if(C[u]===0)continue;C[u]=0;if(S[u]===f)continue;x=e[u];const g=!p||p[x]&m;let b=_;const w=n[x];const T=n[x+1];let I=true;for(let e=w;e<T;++e){const n=i[e];const r=c[n+a];const l=o[e];if(!this._isEssentialEdge(l,r))continue;I=false;const h=l/s;const u=!p||p[h]&m;if(l!==d&&g&&!u)continue;let C=t[h];if(S[C]!==_){if(b===_){b=C}else{while(C!==b){while(C<b)C=S[C];while(b<C)b=S[b]}}if(b===f)break}}if(I)b=f;if(b!==_&&S[u]!==b){S[u]=b;y=true;x=e[u];const n=h[x]+l;const o=h[x+1];for(let e=n;e<o;e+=r){const n=c[e]/s;C[t[n]]=1}}}}const b=new Uint32Array(g);for(let t=0,s=S.length;t<s;++t){x=e[t];b[x]=e[S[t]]}return b}_calculateRetainedSizes(e){const t=this.nodeCount;const s=this.nodes;const n=this._nodeSelfSizeOffset;const o=this._nodeFieldCount;const i=this._dominatorsTree;const r=this._retainedSizes;for(let e=0;e<t;++e)r[e]=s[e*o+n];for(let s=0;s<t-1;++s){const t=e[s];const n=i[t];r[n]+=r[t]}}_buildDominatedNodes(){const e=this._firstDominatedNodeIndex;const t=this._dominatedNodes;const s=this._nodeFieldCount;const n=this._dominatorsTree;let o=0;let i=this.nodeCount;const r=this._rootNodeIndex/s;if(r===o)o=1;else if(r===i-1)i=i-1;else throw new Error("Root node is expected to be either first or last");for(let t=o;t<i;++t)++e[n[t]];let a=0;for(let s=0,n=this.nodeCount;s<n;++s){const n=t[a]=e[s];e[s]=a;a+=n}e[this.nodeCount]=t.length;for(let r=o;r<i;++r){const o=n[r];let i=e[o];i+=--t[i];t[i]=r*s}}_buildSamples(){const e=this._rawSamples;if(!e||!e.length)return;const t=e.length/2;const s=new Array(t);const n=new Array(t);const o=new Array(t);const i=this._metaNode.sample_fields.indexOf("timestamp_us");const r=this._metaNode.sample_fields.indexOf("last_assigned_id");for(let a=0;a<t;a++){s[a]=0;n[a]=e[2*a+i]/1e3;o[a]=e[2*a+r]}const a=this.nodes;const l=a.length;const h=this._nodeFieldCount;const c=this.rootNode();for(let e=0;e<l;e+=h){c.nodeIndex=e;const n=c.id();if(n%2===0)continue;const i=o.lowerBound(n);if(i===t){continue}s[i]+=c.selfSize()}this._samples=new HeapSnapshotModel.Samples(n,o,s)}_buildLocationMap(){const e=new Map;const t=this._locations;for(let s=0;s<t.length;s+=this._locationFieldCount){const n=t[s+this._locationIndexOffset];const o=t[s+this._locationScriptIdOffset];const i=t[s+this._locationLineOffset];const r=t[s+this._locationColumnOffset];e.set(n,new HeapSnapshotModel.Location(o,i,r))}this._locationMap=e}getLocation(e){return this._locationMap.get(e)||null}getSamples(){return this._samples}calculateFlags(){throw new Error("Not implemented")}calculateStatistics(){throw new Error("Not implemented")}userObjectsMapAndFlag(){throw new Error("Not implemented")}calculateSnapshotDiff(e,t){let s=this._snapshotDiffs[e];if(s)return s;s={};const n=this.aggregates(true,"allObjects");for(const e in t){const o=t[e];const i=this._calculateDiffForClass(o,n[e]);if(i)s[e]=i}const o=new HeapSnapshotModel.AggregateForDiff;for(const e in n){if(e in t)continue;s[e]=this._calculateDiffForClass(o,n[e])}this._snapshotDiffs[e]=s;return s}_calculateDiffForClass(e,t){const s=e.ids;const n=e.indexes;const o=e.selfSizes;const i=t?t.idxs:[];let r=0;let a=0;const l=s.length;const h=i.length;const c=new HeapSnapshotModel.Diff;const d=this.createNode(i[a]);while(r<l&&a<h){const e=s[r];if(e<d.id()){c.deletedIndexes.push(n[r]);c.removedCount++;c.removedSize+=o[r];++r}else if(e>d.id()){c.addedIndexes.push(i[a]);c.addedCount++;c.addedSize+=d.selfSize();d.nodeIndex=i[++a]}else{++r;d.nodeIndex=i[++a]}}while(r<l){c.deletedIndexes.push(n[r]);c.removedCount++;c.removedSize+=o[r];++r}while(a<h){c.addedIndexes.push(i[a]);c.addedCount++;c.addedSize+=d.selfSize();d.nodeIndex=i[++a]}c.countDelta=c.addedCount-c.removedCount;c.sizeDelta=c.addedSize-c.removedSize;if(!c.addedCount&&!c.removedCount)return null;return c}_nodeForSnapshotObjectId(e){for(let t=this._allNodes();t.hasNext();t.next()){if(t.node.id()===e)return t.node}return null}nodeClassName(e){const t=this._nodeForSnapshotObjectId(e);if(t)return t.className();return null}idsOfObjectsWithName(e){const t=[];for(let s=this._allNodes();s.hasNext();s.next()){if(s.item().name()===e)t.push(s.item().id())}return t}createEdgesProvider(e){const t=this.createNode(e);const s=this.containmentEdgesFilter();const n=new HeapSnapshotWorker.HeapSnapshotEdgeIndexProvider(this);return new HeapSnapshotWorker.HeapSnapshotEdgesProvider(this,s,t.edges(),n)}createEdgesProviderForTest(e,t){const s=this.createNode(e);const n=new HeapSnapshotWorker.HeapSnapshotEdgeIndexProvider(this);return new HeapSnapshotWorker.HeapSnapshotEdgesProvider(this,t,s.edges(),n)}retainingEdgesFilter(){return null}containmentEdgesFilter(){return null}createRetainingEdgesProvider(e){const t=this.createNode(e);const s=this.retainingEdgesFilter();const n=new HeapSnapshotWorker.HeapSnapshotRetainerEdgeIndexProvider(this);return new HeapSnapshotWorker.HeapSnapshotEdgesProvider(this,s,t.retainers(),n)}createAddedNodesProvider(e,t){const s=this._snapshotDiffs[e];const n=s[t];return new HeapSnapshotWorker.HeapSnapshotNodesProvider(this,n.addedIndexes)}createDeletedNodesProvider(e){return new HeapSnapshotWorker.HeapSnapshotNodesProvider(this,e)}createNodesProviderForClass(e,t){return new HeapSnapshotWorker.HeapSnapshotNodesProvider(this,this.aggregatesWithFilter(t)[e].idxs)}_maxJsNodeId(){const e=this._nodeFieldCount;const t=this.nodes;const s=t.length;let n=0;for(let o=this._nodeIdOffset;o<s;o+=e){const e=t[o];if(e%2===0)continue;if(n<e)n=e}return n}updateStaticData(){return new HeapSnapshotModel.StaticData(this.nodeCount,this._rootNodeIndex,this.totalSize,this._maxJsNodeId())}};HeapSnapshotWorker.HeapSnapshot.AggregatedInfo;const HeapSnapshotMetainfo=class{constructor(){this.node_fields=[];this.node_types=[];this.edge_fields=[];this.edge_types=[];this.trace_function_info_fields=[];this.trace_node_fields=[];this.sample_fields=[];this.type_strings={}}};const HeapSnapshotHeader=class{constructor(){this.title="";this.meta=new HeapSnapshotMetainfo;this.node_count=0;this.edge_count=0;this.trace_function_count=0}};HeapSnapshotWorker.HeapSnapshotItemProvider=class{constructor(e,t){this._iterator=e;this._indexProvider=t;this._isEmpty=!e.hasNext();this._iterationOrder=null;this._currentComparator=null;this._sortedPrefixLength=0;this._sortedSuffixLength=0}_createIterationOrder(){if(this._iterationOrder)return;this._iterationOrder=[];for(let e=this._iterator;e.hasNext();e.next())this._iterationOrder.push(e.item().itemIndex())}isEmpty(){return this._isEmpty}serializeItemsRange(e,t){this._createIterationOrder();if(e>t)throw new Error("Start position > end position: "+e+" > "+t);if(t>this._iterationOrder.length)t=this._iterationOrder.length;if(this._sortedPrefixLength<t&&e<this._iterationOrder.length-this._sortedSuffixLength){this.sort(this._currentComparator,this._sortedPrefixLength,this._iterationOrder.length-1-this._sortedSuffixLength,e,t-1);if(e<=this._sortedPrefixLength)this._sortedPrefixLength=t;if(t>=this._iterationOrder.length-this._sortedSuffixLength)this._sortedSuffixLength=this._iterationOrder.length-e}let s=e;const n=t-e;const o=new Array(n);for(let e=0;e<n;++e){const t=this._iterationOrder[s++];const n=this._indexProvider.itemForIndex(t);o[e]=n.serialize()}return new HeapSnapshotModel.ItemsRange(e,t,this._iterationOrder.length,o)}sortAndRewind(e){this._currentComparator=e;this._sortedPrefixLength=0;this._sortedSuffixLength=0}};HeapSnapshotWorker.HeapSnapshotEdgesProvider=class extends HeapSnapshotWorker.HeapSnapshotItemProvider{constructor(e,t,s,n){const o=t?new HeapSnapshotWorker.HeapSnapshotFilteredIterator(s,t):s;super(o,n);this.snapshot=e}sort(e,t,s,n,o){const i=e.fieldName1;const r=e.fieldName2;const a=e.ascending1;const l=e.ascending2;const h=this._iterator.item().clone();const c=h.clone();const d=this.snapshot.createNode();const u=this.snapshot.createNode();function p(e,t,s){h.edgeIndex=t;c.edgeIndex=s;if(c.name()==="__proto__")return-1;if(h.name()==="__proto__")return 1;const n=h.hasStringName()===c.hasStringName()?h.name()<c.name()?-1:h.name()>c.name()?1:0:h.hasStringName()?-1:1;return e?n:-n}function m(e,t,s,n){h.edgeIndex=s;d.nodeIndex=h.nodeIndex();const o=d[e]();c.edgeIndex=n;u.nodeIndex=c.nodeIndex();const i=u[e]();const r=o<i?-1:o>i?1:0;return t?r:-r}function g(e,t){let s=p(a,e,t);if(s===0)s=m(r,l,e,t);if(s===0)return e-t;return s}function f(e,t){let s=m(i,a,e,t);if(s===0)s=p(l,e,t);if(s===0)return e-t;return s}function _(e,t){let s=m(i,a,e,t);if(s===0)s=m(r,l,e,t);if(s===0)return e-t;return s}if(i==="!edgeName")this._iterationOrder.sortRange(g,t,s,n,o);else if(r==="!edgeName")this._iterationOrder.sortRange(f,t,s,n,o);else this._iterationOrder.sortRange(_,t,s,n,o)}};HeapSnapshotWorker.HeapSnapshotNodesProvider=class extends HeapSnapshotWorker.HeapSnapshotItemProvider{constructor(e,t){const s=new HeapSnapshotWorker.HeapSnapshotNodeIndexProvider(e);const n=new HeapSnapshotWorker.HeapSnapshotIndexRangeIterator(s,t);super(n,s);this.snapshot=e}nodePosition(e){this._createIterationOrder();const t=this.snapshot.createNode();let s=0;for(;s<this._iterationOrder.length;s++){t.nodeIndex=this._iterationOrder[s];if(t.id()===e)break}if(s===this._iterationOrder.length)return-1;const n=this._iterationOrder[s];let o=0;const i=this._buildCompareFunction(this._currentComparator);for(let e=0;e<this._iterationOrder.length;e++){if(i(this._iterationOrder[e],n)<0)++o}return o}_buildCompareFunction(e){const t=this.snapshot.createNode();const s=this.snapshot.createNode();const n=t[e.fieldName1];const o=t[e.fieldName2];const i=e.ascending1?1:-1;const r=e.ascending2?1:-1;function a(e,n){const o=e.call(t);const i=e.call(s);return o<i?-n:o>i?n:0}function l(e,l){t.nodeIndex=e;s.nodeIndex=l;let h=a(n,i);if(h===0)h=a(o,r);return h||e-l}return l}sort(e,t,s,n,o){this._iterationOrder.sortRange(this._buildCompareFunction(e),t,s,n,o)}};HeapSnapshotWorker.JSHeapSnapshot=class extends HeapSnapshotWorker.HeapSnapshot{constructor(e,t){super(e,t);this._nodeFlags={canBeQueried:1,detachedDOMTreeNode:2,pageObject:4};this._lazyStringCache={};this.initialize()}createNode(e){return new HeapSnapshotWorker.JSHeapSnapshotNode(this,e===undefined?-1:e)}createEdge(e){return new HeapSnapshotWorker.JSHeapSnapshotEdge(this,e)}createRetainingEdge(e){return new HeapSnapshotWorker.JSHeapSnapshotRetainerEdge(this,e)}containmentEdgesFilter(){return e=>!e.isInvisible()}retainingEdgesFilter(){const e=this.containmentEdgesFilter();function t(t){return e(t)&&!t.node().isRoot()&&!t.isWeak()}return t}calculateFlags(){this._flags=new Uint32Array(this.nodeCount);this._markDetachedDOMTreeNodes();this._markQueriableHeapObjects();this._markPageOwnedNodes()}calculateDistances(){function e(e,t){if(e.isHidden())return t.name()!=="sloppy_function_map"||e.rawName()!=="system / NativeContext";if(e.isArray()){if(e.rawName()!=="(map descriptors)")return true;const s=t.name();return s<2||s%3!==1}return true}super.calculateDistances(e)}isUserRoot(e){return e.isUserRoot()||e.isDocumentDOMTreesRoot()}userObjectsMapAndFlag(){return{map:this._flags,flag:this._nodeFlags.pageObject}}_flagsOfNode(e){return this._flags[e.nodeIndex/this._nodeFieldCount]}_markDetachedDOMTreeNodes(){const e=this.nodes;const t=e.length;const s=this._nodeFieldCount;const n=this._nodeNativeType;const o=this._nodeTypeOffset;const i=this._nodeFlags.detachedDOMTreeNode;const r=this.rootNode();for(let a=0,l=0;a<t;a+=s,l++){const t=e[a+o];if(t!==n)continue;r.nodeIndex=a;if(r.name().startsWith("Detached "))this._flags[l]|=i}}_markQueriableHeapObjects(){const e=this._nodeFlags.canBeQueried;const t=this._edgeHiddenType;const s=this._edgeInternalType;const n=this._edgeInvisibleType;const o=this._edgeWeakType;const i=this._edgeToNodeOffset;const r=this._edgeTypeOffset;const a=this._edgeFieldsCount;const l=this.containmentEdges;const h=this._nodeFieldCount;const c=this._firstEdgeIndexes;const d=this._flags;const u=[];for(let e=this.rootNode().edges();e.hasNext();e.next()){if(e.edge.node().isUserRoot())u.push(e.edge.node().nodeIndex/h)}while(u.length){const p=u.pop();if(d[p]&e)continue;d[p]|=e;const m=c[p];const g=c[p+1];for(let c=m;c<g;c+=a){const a=l[c+i];const p=a/h;if(d[p]&e)continue;const m=l[c+r];if(m===t||m===n||m===s||m===o)continue;u.push(p)}}}_markPageOwnedNodes(){const e=this._edgeShortcutType;const t=this._edgeElementType;const s=this._edgeToNodeOffset;const n=this._edgeTypeOffset;const o=this._edgeFieldsCount;const i=this._edgeWeakType;const r=this._firstEdgeIndexes;const a=this.containmentEdges;const l=this._nodeFieldCount;const h=this.nodeCount;const c=this._flags;const d=this._nodeFlags.pageObject;const u=new Uint32Array(h);let p=0;const m=this._rootNodeIndex/l;const g=this.rootNode();for(let i=r[m],h=r[m+1];i<h;i+=o){const o=a[i+n];const r=a[i+s];if(o===t){g.nodeIndex=r;if(!g.isDocumentDOMTreesRoot())continue}else if(o!==e){continue}const h=r/l;u[p++]=h;c[h]|=d}while(p){const e=u[--p];const t=r[e];const h=r[e+1];for(let e=t;e<h;e+=o){const t=a[e+s];const o=t/l;if(c[o]&d)continue;const r=a[e+n];if(r===i)continue;u[p++]=o;c[o]|=d}}}calculateStatistics(){const e=this._nodeFieldCount;const t=this.nodes;const s=t.length;const n=this._nodeTypeOffset;const o=this._nodeSelfSizeOffset;const i=this._nodeNativeType;const r=this._nodeCodeType;const a=this._nodeConsStringType;const l=this._nodeSlicedStringType;const h=this._nodeDistances;let c=0;let d=0;let u=0;let p=0;let m=0;const g=this.rootNode();for(let f=0;f<s;f+=e){const s=t[f+o];const _=f/e;if(h[_]>=HeapSnapshotModel.baseSystemDistance){m+=s;continue}const S=t[f+n];g.nodeIndex=f;if(S===i)c+=s;else if(S===r)d+=s;else if(S===a||S===l||g.type()==="string")u+=s;else if(g.name()==="Array")p+=this._calculateArraySize(g)}this._statistics=new HeapSnapshotModel.Statistics;this._statistics.total=this.totalSize;this._statistics.v8heap=this.totalSize-c;this._statistics.native=c;this._statistics.code=d;this._statistics.jsArrays=p;this._statistics.strings=u;this._statistics.system=m}_calculateArraySize(e){let t=e.selfSize();const s=e.edgeIndexesStart();const n=e.edgeIndexesEnd();const o=this.containmentEdges;const i=this.strings;const r=this._edgeToNodeOffset;const a=this._edgeTypeOffset;const l=this._edgeNameOffset;const h=this._edgeFieldsCount;const c=this._edgeInternalType;for(let d=s;d<n;d+=h){const s=o[d+a];if(s!==c)continue;const n=i[o[d+l]];if(n!=="elements")continue;const h=o[d+r];e.nodeIndex=h;if(e.retainersCount()===1)t+=e.selfSize();break}return t}getStatistics(){return this._statistics}};HeapSnapshotWorker.JSHeapSnapshotNode=class extends HeapSnapshotWorker.HeapSnapshotNode{constructor(e,t){super(e,t)}canBeQueried(){const e=this._snapshot._flagsOfNode(this);return!!(e&this._snapshot._nodeFlags.canBeQueried)}rawName(){return super.name()}name(){const e=this._snapshot;if(this.rawType()===e._nodeConsStringType){let t=e._lazyStringCache[this.nodeIndex];if(typeof t==="undefined"){t=this._consStringName();e._lazyStringCache[this.nodeIndex]=t}return t}return this.rawName()}_consStringName(){const e=this._snapshot;const t=e._nodeConsStringType;const s=e._edgeInternalType;const n=e._edgeFieldsCount;const o=e._edgeToNodeOffset;const i=e._edgeTypeOffset;const r=e._edgeNameOffset;const a=e.strings;const l=e.containmentEdges;const h=e._firstEdgeIndexes;const c=e._nodeFieldCount;const d=e._nodeTypeOffset;const u=e._nodeNameOffset;const p=e.nodes;const m=[];m.push(this.nodeIndex);let g="";while(m.length&&g.length<1024){const e=m.pop();if(p[e+d]!==t){g+=a[p[e+u]];continue}const f=e/c;const _=h[f];const S=h[f+1];let C=0;let x=0;for(let e=_;e<S&&(!C||!x);e+=n){const t=l[e+i];if(t===s){const t=a[l[e+r]];if(t==="first")C=l[e+o];else if(t==="second")x=l[e+o]}}m.push(x);m.push(C)}return g}className(){const e=this.type();switch(e){case"hidden":return"(system)";case"object":case"native":return this.name();case"code":return"(compiled code)";default:return"("+e+")"}}classIndex(){const e=this._snapshot;const t=e.nodes;const s=t[this.nodeIndex+e._nodeTypeOffset];if(s===e._nodeObjectType||s===e._nodeNativeType)return t[this.nodeIndex+e._nodeNameOffset];return-1-s}id(){const e=this._snapshot;return e.nodes[this.nodeIndex+e._nodeIdOffset]}isHidden(){return this.rawType()===this._snapshot._nodeHiddenType}isArray(){return this.rawType()===this._snapshot._nodeArrayType}isSynthetic(){return this.rawType()===this._snapshot._nodeSyntheticType}isUserRoot(){return!this.isSynthetic()}isDocumentDOMTreesRoot(){return this.isSynthetic()&&this.name()==="(Document DOM trees)"}serialize(){const e=super.serialize();const t=this._snapshot._flagsOfNode(this);if(t&this._snapshot._nodeFlags.canBeQueried)e.canBeQueried=true;if(t&this._snapshot._nodeFlags.detachedDOMTreeNode)e.detachedDOMTreeNode=true;return e}};HeapSnapshotWorker.JSHeapSnapshotEdge=class extends HeapSnapshotWorker.HeapSnapshotEdge{constructor(e,t){super(e,t)}clone(){const e=this._snapshot;return new HeapSnapshotWorker.JSHeapSnapshotEdge(e,this.edgeIndex)}hasStringName(){if(!this.isShortcut())return this._hasStringName();return isNaN(parseInt(this._name(),10))}isElement(){return this.rawType()===this._snapshot._edgeElementType}isHidden(){return this.rawType()===this._snapshot._edgeHiddenType}isWeak(){return this.rawType()===this._snapshot._edgeWeakType}isInternal(){return this.rawType()===this._snapshot._edgeInternalType}isInvisible(){return this.rawType()===this._snapshot._edgeInvisibleType}isShortcut(){return this.rawType()===this._snapshot._edgeShortcutType}name(){const e=this._name();if(!this.isShortcut())return String(e);const t=parseInt(e,10);return String(isNaN(t)?e:t)}toString(){const e=this.name();switch(this.type()){case"context":return"->"+e;case"element":return"["+e+"]";case"weak":return"[["+e+"]]";case"property":return e.indexOf(" ")===-1?"."+e:'["'+e+'"]';case"shortcut":if(typeof e==="string")return e.indexOf(" ")===-1?"."+e:'["'+e+'"]';else return"["+e+"]";case"internal":case"hidden":case"invisible":return"{"+e+"}"}return"?"+e+"?"}_hasStringName(){const e=this.rawType();const t=this._snapshot;return e!==t._edgeElementType&&e!==t._edgeHiddenType}_name(){return this._hasStringName()?this._snapshot.strings[this._nameOrIndex()]:this._nameOrIndex()}_nameOrIndex(){return this._edges[this.edgeIndex+this._snapshot._edgeNameOffset]}rawType(){return this._edges[this.edgeIndex+this._snapshot._edgeTypeOffset]}};HeapSnapshotWorker.JSHeapSnapshotRetainerEdge=class extends HeapSnapshotWorker.HeapSnapshotRetainerEdge{constructor(e,t){super(e,t)}clone(){const e=this._snapshot;return new HeapSnapshotWorker.JSHeapSnapshotRetainerEdge(e,this.retainerIndex())}isHidden(){return this._edge().isHidden()}isInternal(){return this._edge().isInternal()}isInvisible(){return this._edge().isInvisible()}isShortcut(){return this._edge().isShortcut()}isWeak(){return this._edge().isWeak()}};(function e(){if(self.Runtime&&Runtime.queryParam("test"))console.warn=(()=>undefined)})();HeapSnapshotWorker.HeapSnapshotLoader=class{constructor(e){this._reset();this._progress=new HeapSnapshotWorker.HeapSnapshotProgress(e);this._buffer="";this._dataCallback=null;this._done=false;this._parseInput()}dispose(){this._reset()}_reset(){this._json="";this._snapshot={}}close(){this._done=true;if(this._dataCallback)this._dataCallback("")}buildSnapshot(){this._progress.updateStatus(ls`Processing snapshot\u2026`);const e=new HeapSnapshotWorker.JSHeapSnapshot(this._snapshot,this._progress);this._reset();return e}_parseUintArray(){let e=0;const t="0".charCodeAt(0);const s="9".charCodeAt(0);const n="]".charCodeAt(0);const o=this._json.length;while(true){while(e<o){const o=this._json.charCodeAt(e);if(t<=o&&o<=s){break}else if(o===n){this._json=this._json.slice(e+1);return false}++e}if(e===o){this._json="";return true}let i=0;const r=e;while(e<o){const n=this._json.charCodeAt(e);if(t>n||n>s)break;i*=10;i+=n-t;++e}if(e===o){this._json=this._json.slice(r);return true}this._array[this._arrayIndex++]=i}}_parseStringsArray(){this._progress.updateStatus("Parsing strings…");const e=this._json.lastIndexOf("]");if(e===-1)throw new Error("Incomplete JSON");this._json=this._json.slice(0,e+1);this._snapshot.strings=JSON.parse(this._json)}write(e){this._buffer+=e;if(!this._dataCallback)return;this._dataCallback(this._buffer);this._dataCallback=null;this._buffer=""}_fetchChunk(){return this._done?Promise.resolve(this._buffer):new Promise(e=>this._dataCallback=e)}async _findToken(e,t){while(true){const s=this._json.indexOf(e,t||0);if(s!==-1)return s;t=this._json.length-e.length+1;this._json+=await this._fetchChunk()}}async _parseArray(e,t,s){const n=await this._findToken(e);const o=await this._findToken("[",n);this._json=this._json.slice(o+1);this._array=s?new Uint32Array(s):[];this._arrayIndex=0;while(this._parseUintArray()){this._progress.updateProgress(t,this._arrayIndex,this._array.length);this._json+=await this._fetchChunk()}const i=this._array;this._array=null;return i}async _parseInput(){const e='"snapshot"';const t=await this._findToken(e);if(t===-1)throw new Error("Snapshot token not found");this._progress.updateStatus(ls`Loading snapshot info\u2026`);const s=this._json.slice(t+e.length+1);this._jsonTokenizer=new TextUtils.TextUtils.BalancedJSONTokenizer(e=>{this._json=this._jsonTokenizer.remainder();this._jsonTokenizer=null;this._snapshot.snapshot=JSON.parse(e)});this._jsonTokenizer.write(s);while(this._jsonTokenizer)this._jsonTokenizer.write(await this._fetchChunk());this._snapshot.nodes=await this._parseArray('"nodes"',ls`Loading nodes\u2026 %d%%`,this._snapshot.snapshot.meta.node_fields.length*this._snapshot.snapshot.node_count);this._snapshot.edges=await this._parseArray('"edges"',ls`Loading edges\u2026 %d%%`,this._snapshot.snapshot.meta.edge_fields.length*this._snapshot.snapshot.edge_count);if(this._snapshot.snapshot.trace_function_count){this._snapshot.trace_function_infos=await this._parseArray('"trace_function_infos"',ls`Loading allocation traces\u2026 %d%%`,this._snapshot.snapshot.meta.trace_function_info_fields.length*this._snapshot.snapshot.trace_function_count);const e=await this._findToken(":");const t=await this._findToken('"',e);const s=this._json.indexOf("[");const n=this._json.lastIndexOf("]",t);this._snapshot.trace_tree=JSON.parse(this._json.substring(s,n+1));this._json=this._json.slice(n+1)}if(this._snapshot.snapshot.meta.sample_fields)this._snapshot.samples=await this._parseArray('"samples"',ls`Loading samples\u2026`);if(this._snapshot.snapshot.meta["location_fields"])this._snapshot.locations=await this._parseArray('"locations"',ls`Loading locations\u2026`);else this._snapshot.locations=[];this._progress.updateStatus(ls`Loading strings\u2026`);const n=await this._findToken('"strings"');const o=await this._findToken("[",n);this._json=this._json.slice(o);while(!this._done)this._json+=await this._fetchChunk();this._parseStringsArray()}};HeapSnapshotWorker.HeapSnapshotWorkerDispatcher=class{constructor(e,t){this._objects=[];this._global=e;this._postMessage=t}_findFunction(e){const t=e.split(".");let s=this._global;for(let e=0;e<t.length;++e)s=s[t[e]];return s}sendEvent(e,t){this._postMessage({eventName:e,data:t})}dispatchMessage(e){const t=e.data;const s={callId:t.callId};try{switch(t.disposition){case"create":const e=this._findFunction(t.methodName);this._objects[t.objectId]=new e(this);break;case"dispose":delete this._objects[t.objectId];break;case"getter":{const e=this._objects[t.objectId];const n=e[t.methodName];s.result=n;break}case"factory":{const e=this._objects[t.objectId];const n=e[t.methodName].apply(e,t.methodArguments);if(n)this._objects[t.newObjectId]=n;s.result=!!n;break}case"method":{const e=this._objects[t.objectId];s.result=e[t.methodName].apply(e,t.methodArguments);break}case"evaluateForTest":try{s.result=self.eval(t.source)}catch(e){s.result=e.toString()}break}}catch(e){s.error=e.toString();s.errorCallStack=e.stack;if(t.methodName)s.errorMethodName=t.methodName}this._postMessage(s)}};function postMessageWrapper(e){postMessage(e)}const dispatcher=new HeapSnapshotWorker.HeapSnapshotWorkerDispatcher(this,postMessageWrapper);function installMessageEventListener(e){self.addEventListener("message",e,false)}installMessageEventListener(dispatcher.dispatchMessage.bind(dispatcher));